import{c as z,r as n,R as U,j as e,a as I,m as C,F as q,t as o,T as B,D as J}from"./main-BZye3MWh.js";import{b as H,m as V,h as T,p as G,c as K,g as O}from"./Tracker-B3Wsk5ua.js";import{D as X}from"./DischargeModal-BktMOTjs.js";import{D as Z}from"./database-Cd_PbMGh.js";import{X as A}from"./x-CpP_tiue.js";import{S as Q}from"./save-C_qR2yBp.js";import{P as R}from"./plus-CeiUBWS7.js";import{T as W}from"./trending-up-BiNyPaxI.js";import{T as P}from"./trash-2-D_DkLkqJ.js";import{C as E}from"./circle-alert-CMgrqVIW.js";import{C as Y}from"./calculator-DVDYwoaV.js";import{D as ee}from"./download-CUXfZPiX.js";import{S as se}from"./search-CFPY5UOd.js";import{S as M}from"./square-pen-DTQcLPwn.js";import"./file-text-DwdbBnTO.js";import"./check-CTS_TuQ9.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],le=z("layout-grid",te);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],re=z("list",ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],D=z("ruler",oe);function ne({isOpen:b,onClose:y,onSuccess:x,fuelTypes:i=[],fuelSettings:_=[],tank:l=null}){const[u,p]=n.useState(!1),[m,a]=n.useState({name:"",fuel_type_id:"",capacity_liters:"",current_volume:"0",current_price:""});U.useEffect(()=>{if(b)if(l)a({id:l.id,name:l.name,fuel_type_id:l.fuel_type_id||"",capacity_liters:l.total_cap||l.capacity_liters,current_volume:l.current||l.current_volume,current_price:l.current_price||""});else{const r=i.length>0?i[0]:null;a({name:"",fuel_type_id:r?r.id:"",capacity_liters:"",current_volume:"0",current_price:r?r.price_per_liter||"0":""})}},[b,l,i]);const f=r=>{const{name:d,value:v}=r.target;let g={...m,[d]:v};if(d==="fuel_type_id"){const h=i.find(t=>String(t.id)===String(v));h&&(g.current_price=h.price_per_liter||"0")}a(g)},N=async r=>{r.preventDefault(),p(!0);const d=window.BASE_URL||"/PETRODIESEL2/public",v=l?`${d}/tanks/update`:`${d}/tanks/store`;try{const h=await(await fetch(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json();h.success?(o.success(h.message),x()):o.error(h.message||"حدث خطأ ما")}catch(g){console.error("Error saving tank:",g),o.error("فشل الاتصال بالخادم")}finally{p(!1)}};return e.jsx(I,{children:b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",dir:"rtl",children:e.jsxs(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden border border-slate-100",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100 bg-slate-50/50",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-navy-900 flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-600"}),l?"تعديل بيانات الخزان":"إضافة خزان جديد"]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:l?"تعديل البيانات الأساسية وسعة الخزان":"أدخل بيانات الخزان الجديد والسعة"})]}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-200 rounded-lg text-slate-500 transition-colors",children:e.jsx(A,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"اسم الخزان"}),e.jsx("input",{type:"text",name:"name",required:!0,placeholder:"مثال: خزان الديزل الرئيسي",className:"w-full p-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none transition-all",value:m.name,onChange:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"نوع الوقود"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute right-3 top-3.5 text-slate-400 w-5 h-5 pointer-events-none"}),e.jsxs("select",{name:"fuel_type_id",className:"w-full p-3 pr-10 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none appearance-none bg-white",value:m.fuel_type_id,onChange:f,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"اختر نوع الوقود"}),i.length>0?i.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id)):e.jsx("option",{value:"",disabled:!0,children:"لا توجد أنواع وقود معرفة في الإعدادات"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"السعة الكلية (لتر)"}),e.jsx("input",{type:"number",name:"capacity_liters",required:!0,min:"0",placeholder:"0",className:"w-full p-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none font-mono",value:m.capacity_liters,onChange:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"الكمية الحالية (لتر)"}),e.jsx("input",{type:"number",name:"current_volume",required:!0,min:"0",placeholder:"0",className:"w-full p-3 rounded-xl border border-slate-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none font-mono",value:m.current_volume,onChange:f})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"السعر الحالي للتر (من الإعدادات)"}),e.jsx("input",{type:"number",name:"current_price",step:"0.01",readOnly:!0,placeholder:"0.00",className:"w-full p-3 rounded-xl border border-slate-200 bg-slate-100 text-slate-500 cursor-not-allowed outline-none font-mono",value:m.current_price,onChange:f})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:y,className:"flex-1 p-3 rounded-xl font-bold text-slate-600 hover:bg-slate-100 transition-colors",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:u,className:"flex-[2] p-3 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-700 transition-all shadow-lg shadow-blue-200 flex justify-center items-center gap-2 disabled:opacity-70",children:u?"جاري الحفظ...":e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-5 h-5"}),l?"حفظ التعديلات":"حفظ الخزان"]})})]})]})]})})})}function ie({isOpen:b,onClose:y,tank:x}){const[i,_]=n.useState([]),[l,u]=n.useState({height_mm:"",volume_liters:""}),[p,m]=n.useState(""),[a,f]=n.useState(null),[N,r]=n.useState(!1);n.useEffect(()=>{b&&x&&(d(),m(""),f(null))},[b,x]);const d=async()=>{try{const c=await(await fetch(`${window.BASE_URL}/tanks/getCalibrationPoints?tank_id=${x.id}`)).json();c.success&&_(c.points||[])}catch{o.error("خطأ في تحميل نقاط المعايرة")}},v=async()=>{if(!l.height_mm||!l.volume_liters){o.error("يرجى إدخال جميع الحقول");return}try{const c=await(await fetch(`${window.BASE_URL}/tanks/addCalibrationPoint`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tank_id:x.id,height_mm:parseFloat(l.height_mm),volume_liters:parseFloat(l.volume_liters)})})).json();c.success?(o.success("تمت الإضافة بنجاح"),u({height_mm:"",volume_liters:""}),d()):o.error(c.message||"حدث خطأ")}catch{o.error("خطأ في الإضافة")}},g=async t=>{if(confirm("هل أنت متأكد من حذف هذه النقطة؟"))try{const L=await(await fetch(`${window.BASE_URL}/tanks/deleteCalibrationPoint`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({point_id:t})})).json();L.success?(o.success("تم الحذف"),d()):o.error(L.message||"حدث خطأ")}catch{o.error("خطأ في الحذف")}},h=async()=>{if(!p){o.error("يرجى إدخال الارتفاع");return}r(!0);try{const c=await(await fetch(`${window.BASE_URL}/tanks/calculateVolume?tank_id=${x.id}&height_mm=${p}`)).json();c.success?f(c.result):o.error(c.message||"حدث خطأ في الحساب")}catch{o.error("خطأ في الاتصال بالخادم")}finally{r(!1)}};return!b||!x?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(C.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold font-cairo flex items-center gap-2",children:[e.jsx(D,{size:28}),"معايرة الخزان"]}),e.jsx("p",{className:"text-blue-100 text-sm mt-1",children:x.name})]}),e.jsx("button",{onClick:y,className:"p-2 hover:bg-white/20 rounded-lg transition",children:e.jsx(A,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-bold text-emerald-900 mb-4 flex items-center gap-2",children:[e.jsx(R,{size:20})," إضافة نقطة معايرة جديدة"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 block mb-2",children:"الارتفاع (ملم)"}),e.jsx("input",{type:"number",step:"0.01",value:l.height_mm,onChange:t=>u({...l,height_mm:t.target.value}),className:"w-full px-4 py-2.5 border-2 border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none font-mono",placeholder:"مثال: 1000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 block mb-2",children:"الحجم (لتر)"}),e.jsx("input",{type:"number",step:"0.01",value:l.volume_liters,onChange:t=>u({...l,volume_liters:t.target.value}),className:"w-full px-4 py-2.5 border-2 border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none font-mono",placeholder:"مثال: 5000"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:v,className:"w-full px-4 py-2.5 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-700 transition shadow-lg shadow-emerald-200",children:"إضافة النقطة"})})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-900 mb-3 flex items-center gap-2 text-lg",children:[e.jsx(W,{size:20,className:"text-blue-600"}),"نقاط المعايرة المسجلة (",i.length,")"]}),e.jsx("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-right text-sm font-bold text-slate-700",children:"الارتفاع (ملم)"}),e.jsx("th",{className:"p-4 text-right text-sm font-bold text-slate-700",children:"الحجم (لتر)"}),e.jsx("th",{className:"p-4 text-center text-sm font-bold text-slate-700",children:"الإجراء"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[i.map(t=>e.jsxs("tr",{className:"hover:bg-blue-50/50 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono font-bold text-slate-900",children:parseFloat(t.height_mm).toLocaleString()}),e.jsx("td",{className:"p-4 font-mono font-bold text-slate-900",children:parseFloat(t.volume_liters).toLocaleString()}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>g(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"حذف",children:e.jsx(P,{size:18})})})]},t.id)),i.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(E,{size:32,className:"text-slate-300"}),e.jsx("p",{children:"لا توجد نقاط معايرة مسجلة بعد"}),e.jsx("p",{className:"text-xs",children:"أضف نقاط المعايرة أعلاه للبدء"})]})})})]})]})})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-5",children:[e.jsxs("h3",{className:"font-bold text-blue-900 mb-4 flex items-center gap-2 text-lg",children:[e.jsx(Y,{size:20})," اختبار الحساب (Linear Interpolation)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 block mb-2",children:"أدخل الارتفاع (ملم)"}),e.jsx("input",{type:"number",step:"0.01",value:p,onChange:t=>m(t.target.value),className:"w-full px-4 py-2.5 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none font-mono",placeholder:"مثال: 1250",onKeyPress:t=>t.key==="Enter"&&h()})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:h,disabled:N||!p||i.length===0,className:"w-full px-4 py-2.5 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-blue-200",children:N?"جاري الحساب...":"احسب الحجم"})})]}),a&&e.jsxs(C.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-5 bg-white border-2 border-blue-200 rounded-xl shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"النتيجة:"}),e.jsx("span",{className:"text-xs px-3 py-1 bg-blue-100 text-blue-700 rounded-full font-bold",children:a.method==="linear_interpolation"?"استيفاء خطي":a.method==="exact"?"تطابق تام":a.method==="below_range"?"أقل من النطاق":a.method==="above_range"?"أعلى من النطاق":a.method})]}),e.jsxs("div",{className:"text-4xl font-black text-blue-900 font-mono mb-2",children:[a.volume.toLocaleString()," لتر"]}),a.message&&e.jsx("div",{className:"text-sm text-slate-600 mb-2",children:a.message}),a.warning&&e.jsxs("div",{className:"text-sm text-amber-600 flex items-center gap-1 bg-amber-50 p-2 rounded-lg",children:[e.jsx(E,{size:16}),a.warning]}),a.calculation_details&&e.jsxs("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg text-xs font-mono space-y-1",children:[e.jsxs("div",{className:"text-slate-600",children:["المعادلة: ",a.calculation_details.formula]}),e.jsx("div",{className:"text-slate-800",children:a.calculation_details.substituted}),e.jsxs("div",{className:"text-blue-700 font-bold",children:["النتيجة = ",a.calculation_details.result," لتر"]})]})]}),i.length===0&&e.jsxs("div",{className:"text-sm text-amber-600 bg-amber-50 p-3 rounded-lg flex items-center gap-2",children:[e.jsx(E,{size:16}),"يرجى إضافة نقاط معايرة أولاً لاستخدام حاسبة الاختبار"]})]})]}),e.jsx("div",{className:"bg-slate-50 p-4 border-t flex justify-end gap-2",children:e.jsx("button",{onClick:y,className:"px-6 py-2.5 bg-slate-200 text-slate-700 font-bold rounded-lg hover:bg-slate-300 transition",children:"إغلاق"})})]})})}function Ce({tanks:b=[],suppliers:y=[],fuelSettings:x=[],fuelTypes:i=[]}){const[_,l]=n.useState(""),[u,p]=n.useState("grid"),[m,a]=n.useState(!1),[f,N]=n.useState(!1),[r,d]=n.useState(!1),[v,g]=n.useState(null),[h,t]=n.useState(null),c=()=>{N(!1),t(null),window.location.reload()},L=s=>{t(s),N(!0)},$=async s=>{if(!window.confirm("هل أنت متأكد من حذف هذا الخزان؟ لا يمكن التراجع عن هذا الإجراء."))return;const j=window.BASE_URL||"/PETRODIESEL2/public";try{const w=await(await fetch(`${j}/tanks/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:s})})).json();w.success?(o.success(w.message),window.location.reload()):o.error(w.message)}catch(S){console.error(S),o.error("فشل في حذف الخزان")}},k=(b||[]).map(s=>{const j=Number(s.capacity_liters||0),S=Number(s.current_volume||0),w=j>0?S/j*100:0;return{id:s.id,name:s.name,product:s.product_type||"Fuel",fuel_type_id:s.fuel_type_id,total_cap:j,current:S,current_price:s.current_price,percentage:Math.min(100,Math.max(0,Number(w.toFixed(1)))),status:w<20?"Low Stock":"Active"}}).filter(s=>s.name.toLowerCase().includes(_.toLowerCase())||s.product.toLowerCase().includes(_.toLowerCase())),F=({tank:s})=>{let j="bg-blue-500";return s.product.includes("Diesel")&&(j="bg-amber-500"),s.product.includes("91")&&(j="bg-emerald-500"),s.product.includes("95")&&(j="bg-rose-500"),e.jsxs(C.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-sm border border-slate-100 p-6 relative overflow-hidden group hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(O,{size:"xs",color:s.status==="Low Stock"?"red":"slate",children:s.product}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{g(s),d(!0)},className:"p-1.5 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg",title:"معايرة الخزان",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(s),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(s.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsxs("div",{className:"relative w-24 h-36 bg-slate-100 rounded-xl border-4 border-slate-200 overflow-hidden mb-4 shadow-inner",children:[e.jsx(C.div,{className:`absolute bottom-0 left-0 w-full ${j} opacity-80`,initial:{height:0},animate:{height:`${s.percentage}%`},transition:{duration:1.5,ease:"easeOut"},children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-white/30"})}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-full flex flex-col justify-between py-2 px-1 items-end pointer-events-none opacity-30",children:[...Array(5)].map((S,w)=>e.jsx("div",{className:"w-2 h-[1px] bg-slate-900"},w))})]}),e.jsx("h3",{className:"font-bold text-lg text-slate-800 text-center",children:s.name}),e.jsxs("div",{className:"text-2xl font-black text-slate-900 font-mono mt-1",dir:"ltr",children:[s.current.toLocaleString()," ",e.jsx("span",{className:"text-xs text-slate-400 font-sans font-medium",children:"L"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs border-t pt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"block text-slate-400 mb-1",children:"السعة الكلية"}),e.jsx("span",{className:"font-mono font-bold text-slate-700",children:s.total_cap.toLocaleString()})]}),e.jsxs("div",{className:"text-center p-2 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"block text-slate-400 mb-1",children:"النسبة"}),e.jsxs("span",{className:`font-mono font-bold ${s.percentage<20?"text-red-600":"text-emerald-600"}`,children:[s.percentage,"%"]})]})]})]})};return e.jsxs(C.div,{initial:{opacity:0},animate:{opacity:1},className:"p-6 max-w-[1800px] mx-auto space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-3xl font-bold text-navy-900 font-cairo",children:"المخزون والخزانات"}),e.jsx(V,{className:"text-slate-500",children:"مراقبة مستويات الوقود وحالة الخزانات في الوقت الفعلي"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(T,{variant:"secondary",icon:R,className:"rounded-xl font-bold bg-emerald-500 hover:bg-emerald-600 text-white border-none shadow-lg shadow-emerald-200",onClick:()=>{t(null),N(!0)},children:"إضافة خزان"}),e.jsx(T,{variant:"primary",icon:B,className:"rounded-xl font-bold bg-blue-600 hover:bg-blue-700 border-none text-white shadow-lg shadow-blue-200",onClick:()=>a(!0),children:"تفريغ شحنة"}),e.jsx(T,{variant:"secondary",icon:ee,className:"rounded-xl font-bold",children:"تقرير"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"relative w-full md:max-w-md",children:[e.jsx(se,{className:"absolute right-3 top-3 text-slate-400 w-5 h-5"}),e.jsx(G,{placeholder:"بحث عن خزان...",className:"pl-4 pr-10 py-2 rounded-xl border-slate-200",value:_,onChange:s=>l(s.target.value)})]}),e.jsxs("div",{className:"flex gap-2 bg-slate-100 p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>p("grid"),className:`p-2 rounded-lg transition-all ${u==="grid"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:e.jsx(le,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-lg transition-all ${u==="list"?"bg-white shadow text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:e.jsx(re,{className:"w-5 h-5"})})]})]}),u==="grid"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[k.map(s=>e.jsx(F,{tank:s},s.id)),k.length===0&&e.jsx("div",{className:"col-span-full text-center py-20 text-slate-400",children:"لا توجد خزانات مطابقة للبحث"})]}),u==="list"&&e.jsx(K,{className:"rounded-2xl shadow-lg ring-1 ring-slate-200 overflow-hidden p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600",children:"اسم الخزان"}),e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600",children:"المنتج"}),e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600 w-1/3",children:"المستوى"}),e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600",children:"السعة (L)"}),e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600",children:"الحالي (L)"}),e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600 text-center",children:"الإجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:k.map(s=>e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors group",children:[e.jsxs("td",{className:"p-4 font-bold text-navy-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:e.jsx(J,{className:"w-5 h-5 text-blue-500"})}),s.name]}),e.jsx("td",{className:"p-4",children:e.jsx(O,{size:"xs",color:"slate",children:s.product})}),e.jsxs("td",{className:"p-4 flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs font-bold w-10",children:[s.percentage,"%"]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${s.percentage}%`}})})]}),e.jsx("td",{className:"p-4 font-mono",children:s.total_cap.toLocaleString()}),e.jsx("td",{className:"p-4 font-mono font-bold",children:s.current.toLocaleString()}),e.jsx("td",{className:"p-4 text-center",children:e.jsxs("div",{className:"flex justify-center gap-2 md:opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{g(s),d(!0)},className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"معايرة",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(s),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(M,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>$(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(P,{className:"w-4 h-4"})})]})})]},s.id))})]})})}),e.jsx(X,{isOpen:m,onClose:()=>a(!1),tanks:b,suppliers:y}),e.jsx(ne,{isOpen:f,onClose:()=>N(!1),onSuccess:c,fuelSettings:x,fuelTypes:i,tank:h}),e.jsx(ie,{isOpen:r,onClose:()=>d(!1),tank:v})]})}export{Ce as default};
