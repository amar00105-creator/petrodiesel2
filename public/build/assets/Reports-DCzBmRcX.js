import{j as e,l as we,P as ye,ap as Se,aq as ke,t as z,T as de,n as fe,f as ge,m as W,F as De,ar as $e,A as _e,g as Ce,Q as ie,aa as Ne,U as re,W as Le,ai as ve,$ as Fe}from"./ui-Cx9d0ciQ.js";import{r as w}from"./vendor-BdFMDtQB.js";import{c as y,b as E,m as c,g as ce,v as Re,e as Ee,s as B,h as Ue,j as Ae,k as ee,a as Q}from"./main-CZ5QbTZK.js";import Te from"./CustomerReport-YRoIl89P.js";function Be({stationId:U}){var _,f;const[x,F]=w.useState(new Date().toISOString().split("T")[0]),[u,q]=w.useState(null),[s,X]=w.useState(!1),o=async()=>{X(!0);try{const p=new URLSearchParams({action:"get_detailed_daily_sales",date:x,station_id:U||"all"}).toString(),A=await(await fetch(`${window.BASE_URL||""}/reports?${p}`)).json();A.success?q(A):z.error(A.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(p){console.error(p),z.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{X(!1)}};w.useEffect(()=>{o()},[x,U]);const k=p=>parseFloat(p||0).toLocaleString("en-US"),G=()=>{window.print()};return e.jsx("div",{className:"space-y-6 animate-fade-in p-4 print:p-0",children:e.jsxs(y,{className:"bg-white print:shadow-none print:border-none",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx(E,{className:"text-2xl font-black text-slate-800",children:"ØªÙ‚Ø±ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"}),e.jsx(c,{className:"text-slate-500",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ­Ø±ÙƒØ© Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª"})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:x,onChange:p=>F(p.target.value),className:"pl-3 pr-10 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors"}),e.jsx(we,{className:"w-5 h-5 text-slate-400 absolute right-3 top-2.5 pointer-events-none"})]}),e.jsx("button",{onClick:G,className:"p-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors",children:e.jsx(ye,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"hidden print:block font-bold text-xl",children:["Ø§Ù„ØªØ§Ø±ÙŠØ®: ",x]})]}),e.jsx("div",{className:"overflow-x-auto border-2 border-slate-200 rounded-lg mt-4",children:e.jsxs("table",{className:"w-full text-center text-sm",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-800 font-bold border-b-2 border-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-r border-slate-200",children:"#"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-blue-50",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-orange-50",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-emerald-50",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹ (Ù„ØªØ±Ø§Øª)"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø³Ø¹Ø± Ø§Ù„Ù„ØªØ±"}),e.jsx("th",{className:"p-3 bg-indigo-50",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø¨ÙŠØ¹"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:s?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):((_=u==null?void 0:u.sales)==null?void 0:_.length)>0?u.sales.map((p,b)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors bg-white",children:[e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono text-slate-400",children:b+1}),e.jsxs("td",{className:"p-2 border-r border-slate-100 font-bold",children:[p.machine_name," ",e.jsxs("span",{className:"text-xs text-slate-400",children:["(",p.fuel_type,")"]})]}),e.jsx("td",{className:"p-2 border-r border-slate-100",children:p.worker_name}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono font-bold text-blue-700",children:k(p.current_counter)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono text-slate-600",children:k(p.previous_counter)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono font-bold text-emerald-600 text-lg bg-emerald-50/30",children:k(p.volume_sold)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono",children:k(p.price_per_liter)}),e.jsx("td",{className:"p-2 font-mono font-bold text-indigo-700 bg-indigo-50/30",children:k(p.total_amount)})]},b)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®"})})}),(u==null?void 0:u.totals)&&e.jsx("tfoot",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-800",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-left pl-6",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("td",{className:"p-3 font-mono text-emerald-300 text-lg",children:k(u.totals.total_liters)}),e.jsx("td",{className:"p-3"}),e.jsx("td",{className:"p-3 font-mono text-indigo-300 text-lg",children:k(u.totals.total_amount)})]})})]})}),((f=u==null?void 0:u.tanks)==null?void 0:f.length)>0&&e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.tanks.map((p,b)=>e.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden print:border-slate-800 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-slate-50 p-3 border-b border-slate-200 flex justify-between items-center",children:[e.jsx("div",{className:"font-bold text-slate-700",children:p.tank_name}),e.jsx(ce,{size:"xs",color:p.fuel_type.includes("Benzine")?"emerald":"amber",children:p.fuel_type})]}),e.jsxs("div",{className:"p-4 space-y-3 bg-white text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-dashed border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-500",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Opening)"}),e.jsx("span",{className:"font-mono font-bold",children:k(p.opening_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center text-emerald-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"})," ÙˆØ§Ø±Ø¯ (Purchases)"]}),e.jsxs("span",{className:"font-mono font-bold",children:["+",k(p.purchases_in)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-rose-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"})," Ù…Ø¨ÙŠØ¹Ø§Øª (Sales)"]}),e.jsxs("span",{className:"font-mono font-bold",children:["-",k(p.sales_out)]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-slate-700 font-bold",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¯ÙØªØ±ÙŠ (Theoretical)"}),e.jsx("span",{className:"font-mono font-bold text-blue-700",children:k(p.theoretical_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-dashed border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© (Actual)"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:k(p.actual_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-1",children:[e.jsx("span",{className:"font-bold text-slate-700",children:"Ø²ÙŠØ§Ø¯Ø© / Ø¹Ø¬Ø² (Variance)"}),e.jsx("span",{className:`font-mono font-black text-lg ${p.variance<0?"text-red-600":"text-emerald-600"}`,children:k(p.variance)})]})]})]},b))})]})})}function ze({stationId:U}){var n;const[x,F]=w.useState([]),[u,q]=w.useState(""),[s,X]=w.useState(new Date().toISOString().split("T")[0]),[o,k]=w.useState(null),[G,_]=w.useState(!1);w.useEffect(()=>{f()},[U]),w.useEffect(()=>{u&&p()},[u,s]);const f=async()=>{try{const i=new URLSearchParams({action:"get_stats",station_id:U||"all"}).toString(),a=await(await fetch(`${window.BASE_URL||""}/reports?${i}`)).json();if(a.success&&a.warehouse&&a.warehouse.tanks){const g=a.warehouse.tanks.map(r=>({id:r.id||r.name,name:r.name,fuel_type:r.fuel}));F(g),g.length>0?g.find(h=>h.id==u)||q(g[0].id):(q(""),k(null))}}catch(i){console.error("Failed to fetch tanks:",i),z.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª")}},p=async()=>{_(!0);try{const i=new URLSearchParams({action:"get_tank_sales",tank_id:u,date:s}).toString(),a=await(await fetch(`${window.BASE_URL||""}/reports?${i}`)).json();a.success?k(a):z.error(a.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(i){console.error(i),z.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{_(!1)}},b=i=>parseFloat(i||0).toLocaleString("en-US",{maximumFractionDigits:2}),A=()=>{window.print()};return e.jsx("div",{className:"space-y-6 animate-fade-in p-4 print:p-0",children:e.jsxs(y,{className:"bg-white print:shadow-none print:border-none",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 print:mb-4",children:[e.jsxs("div",{className:"text-center md:text-right",children:[e.jsxs(E,{className:"text-2xl font-black text-slate-800",children:["ØªÙ‚Ø±ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¨ÙŠØ± Ø±Ù‚Ù… ",((n=o==null?void 0:o.tank)==null?void 0:n.name)||""]}),e.jsxs(c,{className:"text-slate-500",children:["Ø§Ù„ØªØ§Ø±ÙŠØ®: ",new Date(s).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("select",{value:u,onChange:i=>q(i.target.value),className:"px-4 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨ÙŠØ±"}),x.map(i=>e.jsxs("option",{value:i.id,children:[i.name," - ",i.fuel_type]},i.id))]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:s,onChange:i=>X(i.target.value),className:"pl-3 pr-10 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors"}),e.jsx(we,{className:"w-5 h-5 text-slate-400 absolute right-3 top-2.5 pointer-events-none"})]}),e.jsx("button",{onClick:A,className:"p-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors",children:e.jsx(ye,{className:"w-5 h-5"})})]})]}),u?G?e.jsx("div",{className:"text-center py-12",children:e.jsx(c,{className:"text-slate-400",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):o?e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto border-2 border-slate-800 rounded-lg mt-4",children:e.jsxs("table",{className:"w-full text-center text-sm border-collapse",children:[e.jsx("thead",{className:"bg-slate-700 text-white font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹ (Ù„ØªØ±Ø§Øª)"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ø³Ø¹Ø± Ø§Ù„Ù„ØªØ±"}),e.jsx("th",{className:"p-3 border border-slate-600",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø¨ÙŠØ¹"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-300",children:o.sales.length>0?o.sales.map((i,D)=>e.jsxs("tr",{className:"hover:bg-slate-50 bg-white",children:[e.jsx("td",{className:"p-2 border border-slate-300 font-bold",children:i.machine_name}),e.jsx("td",{className:"p-2 border border-slate-300",children:i.worker_name}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono",children:b(i.current_counter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono",children:b(i.previous_counter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono font-bold text-blue-700",children:b(i.volume_sold)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono",children:b(i.price_per_liter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono font-bold",children:b(i.total_amount)})]},D)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400 border border-slate-300",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙŠØ± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®"})})}),e.jsxs("tfoot",{className:"bg-slate-100 font-bold",children:[e.jsxs("tr",{className:"border-t-2 border-slate-800",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right border border-slate-300",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ø¯Ø¯ Ø§Ù„Ù„ØªØ±Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©:"}),e.jsx("td",{className:"p-3 font-mono text-blue-700 text-lg border border-slate-300",children:b(o.summary.total_volume_sold)}),e.jsx("td",{className:"p-3 border border-slate-300",children:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300",children:b(o.summary.total_amount)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-right border border-slate-300",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ø¨ÙŠØ±:"}),e.jsx("td",{colSpan:"2",className:"p-3 font-mono text-lg border border-slate-300",children:b(o.tank.current_volume)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-right border border-slate-300",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©:"}),e.jsx("td",{colSpan:"2",className:"p-3 font-mono text-lg border border-slate-300",children:b(o.summary.opening_balance)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-right border border-slate-300",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©:"}),e.jsx("td",{colSpan:"2",className:"p-3 font-mono text-lg border border-slate-300",children:b(o.summary.actual_closing)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-right border border-slate-300",children:"Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹:"}),e.jsx("td",{colSpan:"2",className:"p-3 font-mono text-lg border border-slate-300",children:b(o.summary.theoretical_closing)})]}),e.jsxs("tr",{className:"bg-slate-200",children:[e.jsx("td",{colSpan:"5",className:"p-3 text-right font-black border border-slate-300",children:"Ø²ÙŠØ§Ø¯Ø© / Ø¹Ø¬Ø² ÙƒÙ…ÙŠØ©:"}),e.jsx("td",{colSpan:"2",className:`p-3 font-mono font-black text-xl border border-slate-300 ${o.summary.variance<0?"text-red-600":"text-emerald-600"}`,children:b(o.summary.variance)})]})]})]})})}):null:e.jsx("div",{className:"text-center py-12 text-slate-400",children:e.jsx(c,{children:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¨ÙŠØ± Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})})]})})}function qe({stationId:U}){const[x,F]=w.useState(!1),[u,q]=w.useState([]),[s,X]=w.useState(null),[o,k]=w.useState({supplier_id:"",period:"month",start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]});w.useEffect(()=>{G()},[]);const G=async()=>{try{const i=await(await fetch(`${window.BASE_URL}/reports?action=get_sources&type=supplier`)).json();i.suppliers&&q(i.suppliers)}catch(n){console.error("Failed to fetch suppliers",n)}},_=async()=>{if(o.supplier_id){F(!0);try{const n=new URLSearchParams({action:"get_supplier_report",station_id:U,...o}).toString(),D=await(await fetch(`${window.BASE_URL}/reports?${n}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();D.success?X(D.data):z.error(D.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(n){console.error(n),z.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{F(!1)}}};w.useEffect(()=>{o.supplier_id&&_()},[o.supplier_id,o.period,o.start_date,o.end_date]);const f=n=>{const i=new Date;let D=new Date;const a=new Date;n==="day"||(n==="week"?D.setDate(i.getDate()-7):n==="month"?D.setDate(1):n==="year"&&D.setMonth(0,1)),k(g=>({...g,period:n,start_date:D.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}))},p=n=>b(n)+" SDG",b=n=>parseFloat(n||0).toLocaleString("en-US"),A=[{id:"day",label:"Ø§Ù„ÙŠÙˆÙ…"},{id:"week",label:"Ø£Ø³Ø¨ÙˆØ¹"},{id:"month",label:"Ø´Ù‡Ø±"},{id:"year",label:"Ø³Ù†Ø©"},{id:"custom",label:"Ù…Ø®ØµØµ"}];return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-10",children:[e.jsxs(y,{className:"bg-white/80 backdrop-blur-md p-4 shadow-sm rounded-2xl border border-slate-100/50 sticky top-0 z-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2 justify-center md:justify-start w-full md:w-auto order-2 md:order-1",children:e.jsx("div",{className:"bg-slate-100 p-1 rounded-xl flex gap-1",children:A.map(n=>e.jsx("button",{onClick:()=>f(n.id),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all duration-300 ${o.period===n.id?"bg-white text-blue-600 shadow-sm scale-105":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50"}`,children:n.label},n.id))})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto order-1 md:order-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-xl text-white shadow-lg shadow-cyan-200",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-lg whitespace-nowrap",children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ù…ÙˆØ±Ø¯"})]}),e.jsx("div",{className:"w-full md:w-64",children:e.jsx(Re,{value:o.supplier_id,onValueChange:n=>k(i=>({...i,supplier_id:n})),placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯...",icon:fe,className:"font-bold",children:u.map(n=>e.jsx(Ee,{value:String(n.id),children:n.name},n.id))})})]})]}),e.jsx(ge,{children:o.period==="custom"&&e.jsx(W.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center justify-start gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 ml-2",children:"Ù…Ù† ØªØ§Ø±ÙŠØ®"}),e.jsx("input",{type:"date",value:o.start_date,onChange:n=>k(i=>({...i,start_date:n.target.value})),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2 outline-none"})]}),e.jsx("div",{className:"flex items-center self-end pb-2",children:e.jsx("span",{className:"text-slate-300",children:"-----"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 ml-2",children:"Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®"}),e.jsx("input",{type:"date",value:o.end_date,onChange:n=>k(i=>({...i,end_date:n.target.value})),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2 outline-none"})]})]})})})]}),o.supplier_id?!s&&x?e.jsxs("div",{className:"text-center py-24",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4 shadow-xl shadow-blue-200"}),e.jsx(c,{className:"text-blue-600 font-bold animate-pulse",children:"Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white hover:shadow-lg transition-shadow",children:[e.jsx(c,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª (Ù„Ù†Ø§)"}),e.jsx(B,{className:"mt-2 text-emerald-600 drop-shadow-sm",children:p(s.totals.total_paid)})]})}),e.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white hover:shadow-lg transition-shadow",children:[e.jsx(c,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsx(B,{className:"mt-2 text-blue-600 drop-shadow-sm",children:p(s.totals.total_purchased)})]})}),e.jsx(W.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:e.jsxs(y,{decoration:"top",decorationColor:s.totals.net_balance>0?"rose":"teal",className:"bg-white hover:shadow-lg transition-shadow",children:[e.jsx(c,{children:"ØµØ§ÙÙŠ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"}),e.jsx(B,{className:`mt-2 ${s.totals.net_balance>0?"text-rose-600":"text-teal-600"} drop-shadow-sm`,children:p(s.totals.net_balance)}),e.jsx(c,{className:"text-xs text-slate-400 mt-1",children:s.totals.net_balance>0?"Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚ Ù„Ù„Ù…ÙˆØ±Ø¯":"ÙØ§Ø¦Ø¶ Ù…Ø¯ÙÙˆØ¹"})]})})]}),e.jsx(y,{className:"px-0 py-0 overflow-hidden bg-white shadow-lg rounded-2xl border border-slate-100",children:e.jsxs("div",{className:"overflow-x-auto min-h-[400px]",children:[x&&e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-[1px] z-10 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full"})}),e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ØªØµÙ†ÙŠÙ"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-emerald-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ù…ÙˆØ±Ø¯)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-blue-600",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ø´Ø±Ø§Ø¡"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (ØªØ±Ø§ÙƒÙ…ÙŠ)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:e.jsx(ge,{mode:"wait",children:s.transactions.length>0?s.transactions.map((n,i)=>e.jsxs(W.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.98},transition:{delay:i*.02},className:"hover:bg-blue-50/50 transition-colors group",children:[e.jsx("td",{className:"p-4 whitespace-nowrap text-slate-500 font-mono text-xs",children:n.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:n.statement_title}),e.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-slate-500",children:n.statement_subtitle})]}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold inline-flex items-center gap-1 ${n.type==="purchase"?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-700"}`,children:[n.type==="purchase"?e.jsx(De,{className:"w-3 h-3"}):e.jsx($e,{className:"w-3 h-3"}),n.category]})}),e.jsx("td",{className:"p-4 font-mono text-slate-600",children:n.quantity?b(n.quantity):"-"}),e.jsx("td",{className:"p-4 font-mono text-slate-400 text-xs",children:n.price?b(n.price):"-"}),e.jsx("td",{className:"p-4 font-mono font-bold text-emerald-600",children:n.amount_paid?b(n.amount_paid):"-"}),e.jsx("td",{className:"p-4 font-mono font-bold text-blue-600",children:n.purchase_value?b(n.purchase_value):"-"}),e.jsx("td",{className:"p-4 font-bold",dir:"ltr",children:e.jsx("span",{className:n.running_balance>=0?"text-emerald-600":"text-rose-600",children:b(n.running_balance)})})]},i)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-12 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})})})}),e.jsx("tfoot",{className:"bg-slate-900 text-white font-bold border-t-2 border-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-4 text-left",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„ÙƒÙ„ÙŠØ©:"}),e.jsx("td",{className:"p-4 text-emerald-400",children:b(s.totals.total_paid)}),e.jsx("td",{className:"p-4 text-blue-400",children:b(s.totals.total_purchased)}),e.jsx("td",{className:"p-4",dir:"ltr",children:e.jsx("span",{className:s.totals.net_balance>=0?"text-emerald-400":"text-rose-400",children:b(s.totals.net_balance)})})]})})]})]})})]}):null:e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-24 bg-white rounded-3xl border border-slate-100 shadow-sm",children:[e.jsx(fe,{className:"w-20 h-20 text-slate-200 mx-auto mb-4"}),e.jsx(E,{className:"text-slate-700 text-xl font-bold",children:"Ø­Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"}),e.jsx(c,{className:"text-slate-400",children:"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡"})]})]})}function Ie(){const U=new Date;new Date(U.getFullYear(),U.getMonth(),1).toLocaleDateString("en-CA"),U.toLocaleDateString("en-CA");const[x,F]=w.useState({source_type:"safe",source_id:"",start_date:null,end_date:null,group_sales:"none"}),[u,q]=w.useState("month"),[s,X]=w.useState({safes:[],banks:[]}),[o,k]=w.useState(null),[G,_]=w.useState(!1);w.useEffect(()=>{f()},[]),w.useEffect(()=>{if(x.source_id){if(x.start_date>x.end_date){z.warning("ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„ØªØ§Ø±ÙŠØ®: ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©"),F(a=>({...a,start_date:a.end_date,end_date:a.start_date}));return}p()}},[x.source_id,x.source_type,x.start_date,x.end_date,x.group_sales]);const f=async()=>{try{const g=await(await fetch(`${window.BASE_URL||""}/reports?action=get_sources`)).json();g.success&&(X({safes:g.safes||[],banks:g.banks||[]}),x.source_id||(g.safes&&g.safes.length>0?F(r=>({...r,source_type:"safe",source_id:g.safes[0].id})):g.banks&&g.banks.length>0&&F(r=>({...r,source_type:"bank",source_id:g.banks[0].id}))))}catch(a){console.error("Failed to fetch sources:",a),z.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª")}},p=async()=>{if(x.source_id){_(!0);try{const a=new URLSearchParams({id:x.source_id,start_date:x.start_date,end_date:x.end_date}),g=x.source_type==="safe"?`${window.BASE_URL||""}/finance/getSafeDetails?${a.toString()}`:`${window.BASE_URL||""}/finance/getBankDetails?${a.toString()}`,r=await fetch(g);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const h=await r.json();if(h.success){let m=h.transactions||[];if(x.group_sales==="fuel_type"){const l={},N=[];m.forEach(d=>{let v=d.fuel_name;!v&&d.description&&(d.description.includes("Ø¬Ø§Ø²")||d.description.toLowerCase().includes("diesel")?v="Ø¬Ø§Ø²":(d.description.includes("Ø¨Ù†Ø²ÙŠÙ†")||d.description.toLowerCase().includes("benzene"))&&(v="Ø¨Ù†Ø²ÙŠÙ†"));const C=(d.description||"").toLowerCase(),T=(d.category_name||"").toLowerCase(),I=(d.tank_name||"").toLowerCase();v||(C.includes("Ø¬Ø§Ø²")||C.includes("diesel")||T.includes("Ø¬Ø§Ø²")||T.includes("diesel")||I.includes("Ø¬Ø§Ø²")||I.includes("diesel")?v="Ø¬Ø§Ø²":(C.includes("Ø¨Ù†Ø²ÙŠÙ†")||C.includes("benzene")||T.includes("Ø¨Ù†Ø²ÙŠÙ†")||T.includes("benzene")||I.includes("Ø¨Ù†Ø²ÙŠÙ†")||I.includes("benzene"))&&(v="Ø¨Ù†Ø²ÙŠÙ†"));const H=["sales","sale"].includes(d.related_entity_type)||T.includes("Ù…Ø¨ÙŠØ¹Ø§Øª")||C.includes("Ù…Ø¨ÙŠØ¹Ø§Øª")||C.includes("Ù…Ø­Ø±ÙˆÙ‚Ø§Øª")||C.includes("Ø¹Ù…Ù„ÙŠØ©")||C.includes("sale")||C.includes("fuel");if(H&&!v&&(v="ÙˆÙ‚ÙˆØ¯ (ØºÙŠØ± Ù…Ø­Ø¯Ø¯)"),H&&v){const Y=`${d.created_at?d.created_at.split(" ")[0]:d.date}_${v}`;l[Y]||(l[Y]={...d,id:`group_${Math.random()}`,description:`Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¨ÙŠØ¹Ø§Øª ${v}`,fuel_name:v,original_amount:0,amount:0,user_name:"-",created_at:d.created_at||d.date}),l[Y].amount=(parseFloat(l[Y].amount)+parseFloat(d.amount)).toString()}else N.push(d)}),m=[...Object.values(l),...N].sort((d,v)=>{const C=d.id.toString().startsWith("group_"),T=v.id.toString().startsWith("group_");if(C&&T)return parseFloat(v.amount)-parseFloat(d.amount);if(C)return-1;if(T)return 1;const I=d.created_at||d.date,H=v.created_at||v.date;return new Date(H)-new Date(I)})}const j=m.map(l=>{const N=l.to_type===x.source_type&&l.to_id==x.source_id;return{date:l.created_at?l.created_at.split(" ")[0]:l.date,id:l.id,type:l.type,category:l.category_name||"Ø¹Ø§Ù…",description:l.description,user_name:l.user_name||null,beneficiary:l.beneficiary_name||null,fuel_name:l.fuel_name||null,amount_in:N?parseFloat(l.amount):0,amount_out:N?0:parseFloat(l.amount),balance:0,is_sale:l.related_entity_type==="sales"}});let S=0;j.forEach(l=>{S+=l.amount_in,S-=l.amount_out,l.balance=S}),k({success:!0,summary:{opening_balance:0,closing_balance:S,total_sales:0,total_other_income:0,total_expenses:0,total_transfers_in:0,total_transfers_out:0},movements:j})}else z.error(h.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(a){console.error("Fetch error:",a),z.error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${a.message}`)}finally{_(!1)}}},b=(a,g)=>{var r,h;if(a==="source_type"){const m=g==="safe"?((r=s.safes[0])==null?void 0:r.id)||"":((h=s.banks[0])==null?void 0:h.id)||"";F(j=>({...j,source_type:g,source_id:m}))}else F(m=>({...m,[a]:g}))};w.useEffect(()=>{(async()=>{try{const r=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();if(r.success){const h=r.date,[m,j,S]=h.split("-"),l=`${m}-${j}-01`;F(N=>({...N,start_date:l,end_date:h}))}}catch{console.warn("Using client date fallback");const r=new Date,h=r.toLocaleDateString("en-CA"),m=new Date(r.getFullYear(),r.getMonth(),1).toLocaleDateString("en-CA");F(j=>({...j,start_date:m,end_date:h}))}})()},[]);const A=async a=>{q(a);let g;try{const d=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();d.success&&(g=d.date)}catch{console.warn("Server date fetch failed")}const r=g||new Date().toISOString().split("T")[0],[h,m,j]=r.split("-");let S,l;switch(a){case"today":S=l=r;break;case"week":const N=new Date(r);N.setDate(N.getDate()-6),S=N.toISOString().split("T")[0],l=r;break;case"month":S=`${h}-${m}-01`,l=r;break;case"quarter":const d=Math.floor((parseInt(m)+2)/3),v=String((d-1)*3+1).padStart(2,"0");S=`${h}-${v}-01`,l=r;break;case"year":S=`${h}-01-01`,l=r;break;case"all":S="2024-01-01",l=r;break;case"custom":return}a!=="custom"&&F(N=>({...N,start_date:S,end_date:l}))},n=()=>x.source_type==="safe"?s.safes:s.banks,i=a=>parseFloat(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" SDG",D=a=>a?parseFloat(a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0";return e.jsxs("div",{className:"space-y-6 w-full",children:[e.jsxs(W.div,{className:"bg-white p-6 rounded-2xl border border-slate-100",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6",children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("select",{value:x.source_type,onChange:a=>b("source_type",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none",children:[e.jsx("option",{value:"safe",children:"Ø®Ø²Ù†Ø©"}),e.jsx("option",{value:"bank",children:"Ø¨Ù†Ùƒ"})]})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("select",{value:x.source_id,onChange:a=>b("source_id",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none",children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± --"}),n().map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",i(a.balance),")"]},a.id))]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"}),e.jsxs("select",{value:x.group_sales,onChange:a=>b("group_sales",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none",children:[e.jsx("option",{value:"none",children:"ØªÙØµÙŠÙ„ÙŠ (Ø¨Ø¯ÙˆÙ† ØªØ¬Ù…ÙŠØ¹)"}),e.jsx("option",{value:"fuel_type",children:"Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"})]})]}),e.jsxs("div",{className:"md:col-span-5 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ø§Ù„ÙØªØ±Ø©"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A("today"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${u==="today"?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-slate-50 text-slate-700 hover:bg-slate-100"}`,children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("button",{onClick:()=>A("week"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${u==="week"?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-slate-50 text-slate-700 hover:bg-slate-100"}`,children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsx("button",{onClick:()=>A("month"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${u==="month"?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-slate-50 text-slate-700 hover:bg-slate-100"}`,children:"Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("button",{onClick:()=>A("custom"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${u==="custom"?"bg-blue-600 text-white shadow-md shadow-blue-200":"bg-slate-50 text-slate-700 hover:bg-slate-100"}`,children:"Ù…Ø®ØµØµ"})]})]}),u==="custom"&&e.jsxs("div",{className:"md:col-span-12 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø®ØµØµØ©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:x.start_date,onChange:a=>b("start_date",a.target.value),className:"w-full h-[46px] px-4 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"}),e.jsx("span",{className:"text-slate-400 font-bold",children:"Ø¥Ù„Ù‰"}),e.jsx("input",{type:"date",value:x.end_date,onChange:a=>b("end_date",a.target.value),className:"w-full h-[46px] px-4 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none"})]})]})]})]}),G&&e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}),!G&&o&&o.movements&&e.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-50",children:[e.jsx("h3",{className:"font-bold text-base text-slate-800",children:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª: ",o.movements.length]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("th",{className:"p-4 text-right",children:"Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯"}),e.jsx("th",{className:"p-4 text-left text-emerald-600",children:"ÙˆØ§Ø±Ø¯"}),e.jsx("th",{className:"p-4 text-left text-rose-600",children:"Ù…Ù†ØµØ±Ù"}),e.jsx("th",{className:"p-4 text-left",children:"Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ"})]})}),e.jsx("tbody",{children:o.movements.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})}):o.movements.map((a,g)=>e.jsxs("tr",{className:`border-b border-slate-50 transition-colors ${a.id.toString().startsWith("group_")?"bg-blue-50/80 hover:bg-blue-100/80":"hover:bg-slate-50/50"}`,children:[e.jsx("td",{className:"p-4 text-slate-500 font-mono text-sm",children:a.date}),e.jsxs("td",{className:"p-4 font-medium text-slate-700",children:[e.jsx("div",{children:a.description}),a.user_name&&e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",a.user_name]})]}),e.jsx("td",{className:"p-4 text-slate-600 text-sm",children:a.fuel_name?e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-lg text-xs font-bold",children:a.fuel_name}):"-"}),e.jsx("td",{className:"p-4 text-slate-600 text-sm",children:a.user_name||"-"}),e.jsx("td",{className:"p-4 text-slate-600 text-sm",children:a.beneficiary||"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-emerald-600",dir:"ltr",children:a.amount_in>0?D(a.amount_in):"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-rose-600",dir:"ltr",children:a.amount_out>0?D(a.amount_out):"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-slate-700",dir:"ltr",children:D(a.balance)})]},g))}),o.movements.length>0&&e.jsx("tfoot",{className:"bg-slate-100 font-bold text-slate-800 border-t-2 border-slate-200",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-4 text-center text-sm uppercase tracking-wider",children:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("td",{className:"p-4 text-left font-mono text-emerald-700",dir:"ltr",children:D(o.movements.reduce((a,g)=>a+(parseFloat(g.amount_in)||0),0))}),e.jsx("td",{className:"p-4 text-left font-mono text-rose-700",dir:"ltr",children:D(o.movements.reduce((a,g)=>a+(parseFloat(g.amount_out)||0),0))}),e.jsx("td",{className:"p-4 text-left font-mono text-blue-700",dir:"ltr",children:D(o.movements[o.movements.length-1].balance)})]})})]})})]}),!o&&!G&&e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-100",children:[e.jsx(_e,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Ø§Ø®ØªØ± Ø­Ø³Ø§Ø¨Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})]})]})}function We({user:U}){const[x,F]=w.useState(0),[u,q]=w.useState({station_id:(U==null?void 0:U.station_id)||"all",start_date:null,end_date:null,period:"month"}),[s,X]=w.useState(null),[o,k]=w.useState(!1),G=async()=>{var r;k(!0);try{const h=new URLSearchParams({action:"get_stats",...u}).toString(),j=await(await fetch(`${window.BASE_URL||""}/reports?${h}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();j.success?(console.log("ğŸ“Š Reports Data:",j),console.log("ğŸ“¦ Warehouse Readings:",(r=j==null?void 0:j.warehouse)==null?void 0:r.readings),X(j)):z.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}catch(h){console.error(h),z.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{k(!1)}};w.useEffect(()=>{(async()=>{try{const m=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();if(m.success){const j=m.date,[S,l,N]=j.split("-"),d=`${S}-${l}-01`;q(v=>({...v,start_date:d,end_date:j}))}}catch{console.warn("Failed to get server date, using client date");const m=new Date;q(j=>({...j,start_date:new Date(m.getFullYear(),m.getMonth(),1).toISOString().split("T")[0],end_date:m.toISOString().split("T")[0]}))}})()},[]),w.useEffect(()=>{u.start_date&&u.end_date&&G()},[u.start_date,u.end_date]);const _=r=>parseFloat(r||0).toLocaleString("en-US",{style:"currency",currency:"USD"}).replace("$","")+" SDG",f=r=>parseFloat(r||0).toLocaleString("en-US"),[p,b]=w.useState(0),A=()=>{var r,h,m,j,S,l,N,d,v,C,T,I,H,K,Y,se,te,ae,le,t,R,P,O,J,V,ne,Z,$,oe,xe,me,he,pe,ue;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100/50 rounded-xl w-fit",children:[e.jsx("button",{onClick:()=>b(0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${p===0?"bg-white shadow text-blue-700":"text-slate-500 hover:text-slate-700"}`,children:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"}),e.jsx("button",{onClick:()=>b(1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${p===1?"bg-white shadow text-blue-700":"text-slate-500 hover:text-slate-700"}`,children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨ (Ø®Ø²Ù†Ø©/Ø¨Ù†Ùƒ)"})]}),p===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white",children:[e.jsxs(Q,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-emerald-100 text-emerald-600 rounded-xl",children:e.jsx(Ne,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(c,{children:"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ / Ø§Ù„Ø®Ø³Ø§Ø±Ø©"}),e.jsx(B,{className:((r=s==null?void 0:s.financial)==null?void 0:r.net_profit)>=0?"text-emerald-700":"text-rose-600",children:_((h=s==null?void 0:s.financial)==null?void 0:h.net_profit)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{className:"text-xs",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsx("div",{className:"font-bold text-emerald-600",children:_((m=s==null?void 0:s.financial)==null?void 0:m.income)})]}),e.jsxs("div",{children:[e.jsx(c,{className:"text-xs",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª"}),e.jsx("div",{className:"font-bold text-rose-600",children:_((j=s==null?void 0:s.financial)==null?void 0:j.expense)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"indigo",className:"bg-white",children:[e.jsxs(Q,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-xl",children:e.jsx(Le,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(c,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù…ØªØ§Ø­"}),e.jsx(B,{className:"text-indigo-700",children:_((S=s==null?void 0:s.financial)==null?void 0:S.total_cash)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(c,{className:"text-xs",children:["Ø§Ù„Ø®Ø²Ø§Ø¦Ù† (",((N=(l=s==null?void 0:s.financial)==null?void 0:l.safes)==null?void 0:N.length)||0,")"]}),e.jsx("div",{className:"font-bold text-blue-600",children:_((d=s==null?void 0:s.financial)==null?void 0:d.total_safes)})]}),e.jsxs("div",{children:[e.jsxs(c,{className:"text-xs",children:["Ø§Ù„Ø¨Ù†ÙˆÙƒ (",((C=(v=s==null?void 0:s.financial)==null?void 0:v.banks)==null?void 0:C.length)||0,")"]}),e.jsx("div",{className:"font-bold text-indigo-600",children:_((T=s==null?void 0:s.financial)==null?void 0:T.total_banks)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white",children:[e.jsxs(Q,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-xl",children:e.jsx(ie,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(c,{children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù„Ø­Ø¸ÙŠ"}),e.jsx(B,{children:_((I=s==null?void 0:s.financial)==null?void 0:I.inventory_value)})]})]}),e.jsx(c,{className:"mt-2 text-slate-400 text-xs",children:"Ù…Ø¬Ù…ÙˆØ¹ (Ø­Ø¬Ù… Ø§Ù„Ø®Ø²Ø§Ù† Ã— Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ)"})]}),e.jsxs(y,{decoration:"top",decorationColor:"amber",className:"bg-white",children:[e.jsxs(Q,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-xl",children:e.jsx(ve,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(c,{children:"Ø§Ù„Ø°Ù…Ù… ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±ØµØ¯Ø©"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs(Q,{className:"justify-between",children:[e.jsx(c,{children:"Ø¯ÙŠÙˆÙ† Ø§Ù„Ø´Ø±ÙƒØ§Øª (Ù„Ù†Ø§)"}),e.jsx(c,{className:"font-bold text-emerald-600",children:_((H=s==null?void 0:s.financial)==null?void 0:H.corporate_debts)})]}),e.jsxs(Q,{className:"justify-between",children:[e.jsx(c,{children:"Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsx(c,{className:"font-bold text-rose-600",children:_((K=s==null?void 0:s.financial)==null?void 0:K.supplier_debts)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"text-slate-800 mb-4",children:"ğŸ’° ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(c,{className:"font-bold text-blue-600 mb-2",children:"Ø§Ù„Ø®Ø²Ø§Ø¦Ù†"}),e.jsxs("div",{className:"space-y-2",children:[(se=(Y=s==null?void 0:s.financial)==null?void 0:Y.safes)==null?void 0:se.map((L,M)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-slate-700",children:L.name}),e.jsx("span",{className:"font-bold text-blue-700",children:_(L.balance)})]},M)),(!((te=s==null?void 0:s.financial)!=null&&te.safes)||((ae=s==null?void 0:s.financial)==null?void 0:ae.safes.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø²Ø§Ø¦Ù†"})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"font-bold text-indigo-600 mb-2",children:"Ø§Ù„Ø¨Ù†ÙˆÙƒ"}),e.jsxs("div",{className:"space-y-2",children:[(t=(le=s==null?void 0:s.financial)==null?void 0:le.banks)==null?void 0:t.map((L,M)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-indigo-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:L.name}),L.account_number&&e.jsxs("span",{className:"text-xs text-slate-400 mr-2",children:["(",L.account_number,")"]})]}),e.jsx("span",{className:"font-bold text-indigo-700",children:_(L.balance)})]},M)),(!((R=s==null?void 0:s.financial)!=null&&R.banks)||((P=s==null?void 0:s.financial)==null?void 0:P.banks.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ù†ÙƒÙŠØ©"})]})]})]})]}),e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"text-slate-800 mb-4",children:"ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"}),e.jsxs("div",{className:"space-y-3",children:[(J=(O=s==null?void 0:s.financial)==null?void 0:O.expense_breakdown)==null?void 0:J.map((L,M)=>{var je;const be=((je=s==null?void 0:s.financial)==null?void 0:je.expense)>0?(L.total_amount/s.financial.expense*100).toFixed(1):0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:L.category_name}),e.jsx("span",{className:"font-bold text-rose-600",children:_(L.total_amount)})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-rose-400 to-rose-600 rounded-full transition-all duration-500",style:{width:`${be}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[e.jsxs("span",{children:[L.transaction_count," Ø¹Ù…Ù„ÙŠØ©"]}),e.jsxs("span",{children:[be,"%"]})]})]},M)}),(!((V=s==null?void 0:s.financial)!=null&&V.expense_breakdown)||((ne=s==null?void 0:s.financial)==null?void 0:ne.expense_breakdown.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"text-slate-800 mb-4",children:"ğŸ‘¥ Ø£ÙƒØ¨Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠÙ†ÙŠÙ† (Ù„Ù†Ø§)"}),e.jsxs("div",{className:"space-y-2",children:[($=(Z=s==null?void 0:s.financial)==null?void 0:Z.top_customers)==null?void 0:$.map((L,M)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-emerald-50 rounded-lg border border-emerald-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 text-white rounded-full flex items-center justify-center font-bold text-sm",children:M+1}),e.jsx("span",{className:"font-medium text-slate-700",children:L.name})]}),e.jsx("span",{className:"font-bold text-emerald-700",children:_(L.balance)})]},M)),(!((oe=s==null?void 0:s.financial)!=null&&oe.top_customers)||((xe=s==null?void 0:s.financial)==null?void 0:xe.top_customers.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙŠÙˆÙ† Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]}),e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"text-slate-800 mb-4",children:"ğŸš› Ø£ÙƒØ¨Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¯Ø§Ø¦Ù†ÙŠÙ† (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsxs("div",{className:"space-y-2",children:[(he=(me=s==null?void 0:s.financial)==null?void 0:me.top_suppliers)==null?void 0:he.map((L,M)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-rose-50 rounded-lg border border-rose-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-rose-500 text-white rounded-full flex items-center justify-center font-bold text-sm",children:M+1}),e.jsx("span",{className:"font-medium text-slate-700",children:L.name})]}),e.jsx("span",{className:"font-bold text-rose-700",children:_(L.balance)})]},M)),(!((pe=s==null?void 0:s.financial)!=null&&pe.top_suppliers)||((ue=s==null?void 0:s.financial)==null?void 0:ue.top_suppliers.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù„Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†"})]})]})]})]}):e.jsx(Ie,{})]})},n=()=>{var r,h,m,j,S,l,N,d,v,C,T,I,H,K,Y,se,te,ae,le;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white",children:[e.jsx(c,{children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx(B,{className:"mt-2 text-blue-700",children:_((r=s==null?void 0:s.financial)==null?void 0:r.inventory_value)})]}),e.jsxs(y,{decoration:"top",decorationColor:"cyan",className:"bg-white",children:[e.jsx(c,{children:"Ø§Ù„ÙˆØ§Ø±Ø¯ (Ù…Ø´ØªØ±ÙŠØ§Øª) Ù„Ù„ÙØªØ±Ø©"}),e.jsxs(B,{className:"mt-2 text-cyan-700",children:[f((m=(h=s==null?void 0:s.warehouse)==null?void 0:h.incoming_stock)==null?void 0:m.total_volume)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]}),e.jsxs(c,{className:"mt-2 text-xs text-slate-400",children:["Ø¨ØªÙƒÙ„ÙØ©: ",_((S=(j=s==null?void 0:s.warehouse)==null?void 0:j.incoming_stock)==null?void 0:S.total_cost)]})]}),e.jsxs(y,{decoration:"top",decorationColor:"orange",className:"bg-white",children:[e.jsx(c,{children:"ÙØ§Ù‚Ø¯ Ø§Ù„ØªØ¨Ø®Ø± (ØªÙ‚Ø¯ÙŠØ±ÙŠ)"}),e.jsxs(B,{className:"mt-2 text-orange-700",children:[f((l=s==null?void 0:s.financial)==null?void 0:l.evaporation_loss)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]}),e.jsx(c,{className:"mt-2 text-xs text-slate-400",children:"Ø­Ø³Ø¨ Ø§Ù„ØªØ¨Ø§ÙŠÙ† Ø¨ÙŠÙ† Ø§Ù„Ø£Ø±ØµØ¯Ø©"})]})]}),e.jsx(E,{className:"text-slate-700 mt-4 mb-2",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(N=s==null?void 0:s.warehouse)==null?void 0:N.tanks.map((t,R)=>{const P=t.volume/(t.capacity||1)*100,O=P<20,J=P<10,V=Z=>{const $=(Z||"").toLowerCase();return $.includes("diesel")||$.includes("Ø¯ÙŠØ²Ù„")?"from-amber-400 to-orange-500":$.includes("petrol")||$.includes("Ø¨Ù†Ø²ÙŠÙ†")||$.includes("91")||$.includes("95")?"from-emerald-400 to-teal-500":$.includes("gas")||$.includes("ØºØ§Ø²")?"from-purple-400 to-pink-500":"from-blue-400 to-indigo-500"},ne=Z=>{const $=(Z||"").toLowerCase();return $.includes("diesel")||$.includes("Ø¯ÙŠØ²Ù„")?"bg-amber-50":$.includes("petrol")||$.includes("Ø¨Ù†Ø²ÙŠÙ†")||$.includes("91")||$.includes("95")?"bg-emerald-50":$.includes("gas")||$.includes("ØºØ§Ø²")?"bg-purple-50":"bg-blue-50"};return e.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:R*.1},children:e.jsxs(y,{className:`relative overflow-hidden group hover:shadow-xl transition-all duration-300 border-2 ${J?"border-red-300 animate-pulse":O?"border-orange-300":"border-slate-200"}`,children:[e.jsx("div",{className:`absolute bottom-0 left-0 w-full transition-all duration-1000 ${ne(t.fuel)}`,style:{height:`${P}%`,opacity:.4}}),(O||J)&&e.jsxs("div",{className:`absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 z-20 ${J?"bg-red-500 text-white animate-bounce":"bg-orange-500 text-white"}`,children:[e.jsx(_e,{className:"w-3 h-3"}),J?"Ø­Ø±Ø¬!":"Ù…Ù†Ø®ÙØ¶"]}),e.jsxs(Q,{justifyContent:"between",alignItems:"start",className:"relative z-10",children:[e.jsxs("div",{children:[e.jsx(c,{className:"font-bold text-slate-800 text-lg",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${V(t.fuel)}`}),e.jsx(c,{className:"text-xs text-slate-500",children:t.fuel})]})]}),e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-xs font-bold bg-gradient-to-r ${V(t.fuel)} text-white shadow-lg`,children:[P.toFixed(1),"%"]})]}),e.jsxs("div",{className:"mt-6 mb-4 relative z-10",children:[e.jsx("div",{className:"h-3 bg-slate-200 rounded-full overflow-hidden relative",children:e.jsx(W.div,{initial:{width:0},animate:{width:`${P}%`},transition:{duration:1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${V(t.fuel)} shadow-lg`})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1.5 font-mono",children:[e.jsx("span",{children:"0"}),e.jsxs("span",{className:"font-bold text-slate-600",children:[f(t.volume)," L"]}),e.jsx("span",{children:f(t.capacity)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4 relative z-10",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-xl border border-slate-100",children:[e.jsx(c,{className:"text-xs text-slate-500 mb-1",children:"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsx("div",{className:"font-bold text-emerald-600",children:_(t.value)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-xl border border-slate-100",children:[e.jsx(c,{className:"text-xs text-slate-500 mb-1",children:"Ø¢Ø®Ø± Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"font-mono text-xs font-bold text-slate-700",children:t.last_calibration==="N/A"?"ØºÙŠØ± Ù…ØªÙˆÙØ±":new Date(t.last_calibration).toLocaleDateString("ar-EG",{month:"short",day:"numeric"})})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex justify-between items-center relative z-10",children:[e.jsx(c,{className:"text-xs text-slate-500",children:"Ø§Ù„ØªØ¨Ø§ÙŠÙ† (Variance)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-mono font-bold text-sm ${t.variance<-50?"text-red-600":t.variance<0?"text-orange-600":t.variance>50?"text-blue-600":"text-emerald-600"}`,children:[t.variance>0?"+":"",f(t.variance)," L"]}),Math.abs(t.variance)>50&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]})]})]})},R)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2",children:"Ø³Ø¬Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯ (Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª)"}),((C=(v=(d=s==null?void 0:s.warehouse)==null?void 0:d.incoming_stock)==null?void 0:v.list)==null?void 0:C.length)>0?e.jsx("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…ÙˆØ±Ø¯"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.warehouse.incoming_stock.list.map((t,R)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3 font-bold",children:t.supplier_name}),e.jsx("td",{className:"p-3 text-xs",children:t.tank_name}),e.jsx("td",{className:"p-3 font-mono text-blue-600",children:f(t.volume_received)})]},R))})]})}):e.jsx(c,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ø±Ø¯Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]}),e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2",children:"Ø³Ø¬Ù„ Ù‚Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª (Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© ÙˆØ§Ù„Ù‚ÙŠØ§Ø³)"}),((I=(T=s==null?void 0:s.warehouse)==null?void 0:T.readings)==null?void 0:I.length)>0?e.jsx("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© (Ø³Ù…)"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø­Ø¬Ù… (Ù„ØªØ±)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.warehouse.readings.map((t,R)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3 font-bold",children:t.tank_name}),e.jsx("td",{className:"p-3 text-xs",children:e.jsx("span",{className:`px-2 py-1 rounded-full ${t.reading_type==="opening"?"bg-indigo-100 text-indigo-700":t.reading_type==="closing"?"bg-slate-100 text-slate-700":t.reading_type==="check"?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"}`,children:t.reading_type==="check"?"Ù…Ø¹Ø§ÙŠØ±Ø©/ÙØ­Øµ":t.reading_type})}),e.jsx("td",{className:"p-3 font-mono",children:t.reading_cm}),e.jsx("td",{className:"p-3 font-mono font-bold text-slate-700",children:f(t.volume_liters)})]},R))})]})}):e.jsx(c,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±Ø§Ø¡Ø§Øª Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]}),((H=s==null?void 0:s.warehouse)==null?void 0:H.calibration_logs)&&s.warehouse.calibration_logs.length>0&&e.jsxs(y,{className:"bg-white mt-6",children:[e.jsx(E,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2",children:"Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„ÙØ¹Ù„ÙŠØ©"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙØ±Ù‚"}),e.jsx("th",{className:"p-3",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.warehouse.calibration_logs.map((t,R)=>e.jsxs("tr",{className:`hover:bg-slate-50 ${t.tank_updated?"bg-amber-50/30":""}`,children:[e.jsx("td",{className:"p-3 whitespace-nowrap text-xs",children:new Date(t.created_at).toLocaleString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"p-3 font-bold text-slate-700",children:t.tank_name}),e.jsx("td",{className:"p-3 text-xs text-slate-600",children:t.user_name||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}),e.jsxs("td",{className:"p-3 font-mono text-blue-600",children:[f(t.previous_quantity)," L"]}),e.jsxs("td",{className:"p-3 font-mono text-indigo-600 font-bold",children:[f(t.actual_quantity)," L"]}),e.jsxs("td",{className:`p-3 font-mono font-bold ${parseFloat(t.variance)>0?"text-green-600":parseFloat(t.variance)<0?"text-red-600":"text-gray-600"}`,children:[parseFloat(t.variance)>0&&"+",f(t.variance)," L",e.jsx("span",{className:"text-xs ml-2",children:parseFloat(t.variance)>0?"(Ø²ÙŠØ§Ø¯Ø©)":parseFloat(t.variance)<0?"(Ø¹Ø¬Ø²)":"(Ù…ØªØ·Ø§Ø¨Ù‚)"})]}),e.jsx("td",{className:"p-3 text-xs text-slate-500 max-w-xs truncate",children:t.notes||"-"})]},R))})]})}),e.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg text-xs text-slate-600",children:"ğŸ’¡ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø°Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ±Ø§Ø¡ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²Ø§Ù† Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"})]}),e.jsxs(y,{className:"bg-white mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-100",children:[e.jsxs(E,{className:"text-slate-700 flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5 text-orange-500"}),"ØªÙ†Ø§ÙƒØ± Ø´Ø§Ø­Ù†Ø©"]}),e.jsxs(ce,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[((Y=(K=s==null?void 0:s.warehouse)==null?void 0:K.pending_shipments)==null?void 0:Y.length)||0," ØªÙ†ÙƒØ± Ù…Ø¹Ù„Ù‚"]})]}),((te=(se=s==null?void 0:s.warehouse)==null?void 0:se.pending_shipments)==null?void 0:te.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.warehouse.pending_shipments.map((t,R)=>{const P=Math.floor((new Date-new Date(t.created_at))/864e5),O=P>3;return e.jsxs(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:R*.05},className:`p-4 rounded-xl border-2 transition-all hover:shadow-md ${O?"border-red-200 bg-red-50/50 hover:border-red-300":"border-orange-200 bg-orange-50/30 hover:border-orange-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${O?"bg-red-500":"bg-orange-500"}`,children:e.jsx(de,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-800",children:["#",t.invoice_number]}),e.jsx("div",{className:"text-xs text-slate-500",children:t.supplier_name})]})]}),O&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full animate-pulse",children:"ØªØ£Ø®ÙŠØ±!"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯:"}),e.jsxs("span",{className:"font-bold text-slate-700 flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:t.fuel_color||"#94a3b8"}}),t.fuel_type||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Ø§Ù„ÙƒÙ…ÙŠØ©:"}),e.jsxs("span",{className:"font-mono font-bold text-blue-600",children:[f(t.volume_ordered)," L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Ø§Ù„Ø³Ø§Ø¦Ù‚:"}),e.jsx("span",{className:"font-medium text-slate-700",children:t.driver_name_resolved||t.driver_name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®:"}),e.jsxs("span",{className:"font-mono text-slate-600 text-xs",children:[new Date(t.created_at).toLocaleDateString("ar-EG"),e.jsxs("span",{className:`mr-1 ${O?"text-red-600":"text-slate-400"}`,children:["(",P," ",P===1?"ÙŠÙˆÙ…":"Ø£ÙŠØ§Ù…",")"]})]})]})]}),e.jsx("div",{className:`mt-3 pt-3 border-t ${O?"border-red-200":"border-orange-200"} text-center`,children:e.jsxs("span",{className:`text-xs font-bold ${O?"text-red-700":"text-orange-700"}`,children:[t.status==="ordered"&&"ğŸ“¦ ØªÙ… Ø§Ù„Ø·Ù„Ø¨",t.status==="in_transit"&&"ğŸšš ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",t.status==="arrived"&&"âœ… ÙˆØµÙ„Øª - Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ±ÙŠØº",t.status==="offloading"&&"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ±ÙŠØº"]})})]},R)})}):e.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200",children:e.jsxs("div",{className:"flex flex-col items-center text-slate-400",children:[e.jsx(Fe,{className:"w-16 h-16 mb-3 text-emerald-400"}),e.jsx(c,{className:"font-bold text-slate-600",children:"Ù…Ù…ØªØ§Ø²! Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø§ÙƒØ± ØªÙ… ØªÙØ±ÙŠØºÙ‡Ø§"}),e.jsx(c,{className:"text-sm mt-1",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø§ÙƒØ± Ø´Ø§Ø­Ù†Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ"})]})})]}),e.jsxs(y,{className:"bg-white mt-6",children:[e.jsx(E,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2",children:"ØªÙØ§ØµÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©)"}),((le=(ae=s==null?void 0:s.warehouse)==null?void 0:ae.daily_reconciliation)==null?void 0:le.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø±ØµÙŠØ¯ Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("th",{className:"p-3 text-cyan-600",children:"ÙˆØ§Ø±Ø¯ (+)"}),e.jsx("th",{className:"p-3 text-rose-600",children:"Ù…Ù†ØµØ±Ù (-)"}),e.jsx("th",{className:"p-3 text-blue-600",children:"Ø±ØµÙŠØ¯ Ù†Ø¸Ø±ÙŠ (=)"}),e.jsx("th",{className:"p-3 text-purple-600",children:"Ø±ØµÙŠØ¯ ÙØ¹Ù„ÙŠ (Ù‚ÙŠØ§Ø³)"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙØ§Ø±Ù‚ (Variance)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.warehouse.daily_reconciliation.map((t,R)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-3 whitespace-nowrap",children:t.date}),e.jsx("td",{className:"p-3 font-bold",children:t.tank_name}),e.jsx("td",{className:"p-3 font-mono",children:f(t.opening)}),e.jsx("td",{className:"p-3 font-mono text-cyan-600",children:f(t.in)}),e.jsx("td",{className:"p-3 font-mono text-rose-600",children:f(t.out)}),e.jsx("td",{className:"p-3 font-mono font-bold text-blue-600",children:f(t.theoretical)}),e.jsx("td",{className:"p-3 font-mono font-bold text-purple-600",children:t.actual!==null?f(t.actual):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-3",children:t.actual!==null?e.jsx("span",{className:`font-mono font-bold px-2 py-1 rounded ${t.variance<0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:f(t.variance)}):e.jsx("span",{className:"text-slate-300",children:"-"})})]},R))})]})}):e.jsx(c,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ù…Ø®Ø²ÙˆÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})},[i,D]=w.useState(0),a=()=>{var r,h,m,j,S,l,N;return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100/50 rounded-xl w-fit",children:[e.jsx("button",{onClick:()=>D(0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===0?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"}),e.jsx("button",{onClick:()=>D(1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===1?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ"}),e.jsx("button",{onClick:()=>D(2),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===2?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¢Ø¨Ø§Ø±"})]}),i===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"violet",className:"bg-white",children:[e.jsx(c,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsx(B,{className:"mt-2 text-violet-700",children:_((r=s==null?void 0:s.sales)==null?void 0:r.total_revenue)}),e.jsxs(Q,{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsx(c,{children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx(c,{className:"font-bold",children:(h=s==null?void 0:s.sales)==null?void 0:h.total_transactions})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"indigo",className:"bg-white",children:[e.jsx(c,{children:"Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©"}),e.jsxs(B,{className:"mt-2 text-indigo-700",children:[f((m=s==null?void 0:s.sales)==null?void 0:m.total_liters)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"mb-4",children:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("div",{className:"space-y-4",children:((S=(j=s==null?void 0:s.sales)==null?void 0:j.by_product)==null?void 0:S.length)>0?s.sales.by_product.map((d,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:d.color_hex||"#94a3b8"}}),e.jsx("span",{className:"font-bold text-slate-700",children:d.product_name})]}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"text-slate-500",children:[e.jsx("span",{className:"font-bold text-slate-800",children:f(d.total_liters)})," Ù„ØªØ±"]}),e.jsxs("div",{className:"text-slate-500 font-mono",children:[e.jsx("span",{className:"font-bold text-slate-800",children:f(d.total_revenue)})," SDG"]})]})]},v)):e.jsx("div",{className:"text-center text-slate-400 py-6",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})})]}),e.jsxs(y,{className:"bg-white",children:[e.jsx(E,{className:"mb-4",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© (Ù…Ø¨Ø§Ø´Ø±)"}),((N=(l=s==null?void 0:s.sales)==null?void 0:l.recent_sales)==null?void 0:N.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:s.sales.recent_sales.map((d,v)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 whitespace-nowrap text-slate-400 text-xs",children:new Date(d.created_at).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"p-2 font-medium",children:[d.pump_name,e.jsx("span",{className:"block text-xs text-slate-400",children:d.fuel_type})]}),e.jsx("td",{className:"p-2 font-mono text-blue-600",children:f(d.volume_sold)}),e.jsx("td",{className:"p-2 font-mono font-bold text-emerald-600",children:f(d.total_amount)})]},v))})]})}):e.jsx("div",{className:"text-center text-slate-400 py-6",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø¯ÙŠØ«Ø©"})]})]})]}):i===1?e.jsx(Be,{stationId:u.station_id}):e.jsx(ze,{stationId:u.station_id})]})},g=()=>{var S;const r=((S=s==null?void 0:s.employees)==null?void 0:S.list)||[],h=[...r].sort((l,N)=>N.total_sales-l.total_sales)[0],m=[...r].sort((l,N)=>N.total_volume-l.total_volume)[0],j=[...r].sort((l,N)=>N.shifts_count-l.shifts_count)[0];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(re,{className:"w-24 h-24 text-emerald-600"})}),e.jsx(c,{children:"Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø¨ÙŠØ¹Ø§Ù‹ (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xl border-2 border-emerald-200",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:h==null?void 0:h.worker_name}),e.jsx(B,{className:"text-emerald-600 text-xl",children:_(h==null?void 0:h.total_sales)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(ie,{className:"w-24 h-24 text-blue-600"})}),e.jsx(c,{children:"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ (ÙƒÙ…ÙŠØ©)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-xl border-2 border-blue-200",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:m==null?void 0:m.worker_name}),e.jsxs(B,{className:"text-blue-600 text-xl",children:[f(m==null?void 0:m.total_volume)," Ù„ØªØ±"]})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"amber",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(ve,{className:"w-24 h-24 text-amber-600"})}),e.jsx(c,{children:"Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø¶ÙˆØ±Ø§Ù‹ (ÙˆØ±Ø¯ÙŠØ§Øª)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-amber-700 font-bold text-xl border-2 border-amber-200",children:"â˜…"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:j==null?void 0:j.worker_name}),e.jsxs(B,{className:"text-amber-600 text-xl",children:[j==null?void 0:j.shifts_count," ÙˆØ±Ø¯ÙŠØ©"]})]})]})]})]}),e.jsxs(y,{className:"bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-slate-500"}),"Ø³Ø¬Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª"]}),e.jsxs(ce,{className:"bg-slate-100 text-slate-600",children:[r.length," Ù…ÙˆØ¸Ù Ù†Ø´Ø·"]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm border-separate border-spacing-y-2",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"Ø§Ù„Ù…ÙˆØ¸Ù"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙˆØ±Ø¯ÙŠØ§Øª"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ù„ØªØ±)"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsx("th",{className:"p-3 text-emerald-600",children:"Ø§Ù„Ø­ÙˆØ§ÙØ² (+)"}),e.jsx("th",{className:"p-3 text-red-600",children:"Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª (-)"}),e.jsx("th",{className:"p-3",children:"Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡"})]})}),e.jsx("tbody",{children:r.map((l,N)=>{const d=(m==null?void 0:m.total_volume)||1,v=l.total_volume/d*100;return e.jsxs("tr",{className:"bg-white hover:bg-slate-50 transition-shadow hover:shadow-sm group",children:[e.jsxs("td",{className:"p-3 border-y border-r border-slate-100 rounded-r-lg font-bold text-slate-700 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 text-xs",children:l.worker_name.charAt(0)}),l.worker_name,l===h&&e.jsx("span",{className:"text-emerald-500 text-xs",children:"ğŸ‘‘"})]}),e.jsx("td",{className:"p-3 border-y border-slate-100 text-slate-500 font-mono",children:l.shifts_count}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono text-blue-600 font-medium",children:f(l.total_volume)}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono font-bold text-slate-700",children:_(l.total_sales)}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono text-emerald-600 bg-emerald-50/50 group-hover:bg-emerald-100/50 transition-colors",children:l.bonuses>0?f(l.bonuses):"-"}),e.jsx("td",{className:"p-3 border-y border-l border-slate-100 rounded-l-lg font-mono text-red-600 bg-red-50/50 group-hover:bg-red-100/50 transition-colors",children:l.deductions>0?f(l.deductions):"-"}),e.jsx("td",{className:"p-3 border-y border-l border-slate-100",children:e.jsx("div",{className:"w-24 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${v}%`}})})})]},N)})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[e.jsx(re,{className:"w-12 h-12 mb-3 text-slate-200"}),e.jsx(c,{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})]})};return e.jsxs("div",{className:"p-6 max-w-[1800px] mx-auto min-h-screen space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 rounded-3xl p-6 shadow-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"}),e.jsx("p",{className:"text-purple-100",children:"ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ù„ÙŠØ© ÙˆØ¹Ø§Ù…Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±ÙƒØ©"})]}),e.jsxs(Ue,{index:x,onIndexChange:F,children:[e.jsxs(Ae,{variant:"solid",className:"bg-white p-1 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-slate-100 rounded-lg mr-2",children:e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"ğŸ“ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ù„ÙŠØ©"})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-emerald-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©"})]})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-blue-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª"})]})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-violet-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"})]})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-amber-500 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"})]})}),e.jsx("div",{className:"inline-block w-px h-8 bg-slate-200 mx-3"}),e.jsx("div",{className:"inline-flex items-center px-3 py-1 bg-gradient-to-r from-cyan-100 to-blue-100 rounded-lg mr-2",children:e.jsx("span",{className:"text-xs font-bold text-cyan-700 uppercase tracking-wider",children:"ğŸŒ ØªÙ‚Ø§Ø±ÙŠØ± Ø¹Ø§Ù…Ø©"})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-gradient-to-r ui-selected:from-cyan-600 ui-selected:to-blue-600 ui-selected:text-white ui-selected:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"})," ",e.jsx("span",{children:"ØªÙ‚Ø±ÙŠØ± Ù…ÙˆØ±Ø¯"})]})}),e.jsx(ee,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-gradient-to-r ui-selected:from-emerald-600 ui-selected:to-green-600 ui-selected:text-white ui-selected:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5"})," ",e.jsx("span",{children:"ØªÙ‚Ø±ÙŠØ± Ø¹Ù…ÙŠÙ„"})]})})]}),e.jsxs("div",{className:"mt-8",children:[x===0&&A(),x===1&&n(),x===2&&a(),x===3&&g(),x===4&&e.jsx(qe,{stationId:u.station_id}),x===5&&e.jsx(Te,{stationId:u.station_id})]})]})]})}export{We as default};
