import{j as e,P as U,ac as X,r as F,k as E,f as $,m as k,X as W,aj as Y,a3 as ie,h as J,ak as ne,t as p,c as M,a2 as Z,a0 as G,q as oe,A as z,al as ce,am as xe,an as he,S as q,F as K,ao as H,G as V,a1 as me,z as be,B as ue}from"./ui-DtuMUTb1.js";import{r as m}from"./vendor-BdFMDtQB.js";import{c as C,b as v,g as R,p as f,m as O,w as pe,o as ge,j as je,k as ke,l as A,q as fe,r as I,t as Q}from"./main-D8tG-o71.js";import we from"./StationList-obT04LNX.js";function Ne({roles:N=[],onSave:S,onDelete:u}){const[i,c]=m.useState(null),[d,o]=m.useState(!1),w=[{id:"sales.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"},{id:"sales.create",label:"Ø¥Ø¶Ø§ÙØ© Ù…Ø¨ÙŠØ¹Ø§Øª"},{id:"sales.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"},{id:"sales.delete",label:"Ø­Ø°Ù Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"},{id:"purchases.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"},{id:"purchases.create",label:"Ø¥Ø¶Ø§ÙØ© Ù…Ø´ØªØ±ÙŠØ§Øª"},{id:"purchases.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"},{id:"purchases.delete",label:"Ø­Ø°Ù Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª"},{id:"inventory.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"},{id:"inventory.create",label:"Ø¥Ø¶Ø§ÙØ© Ù…Ø®Ø²ÙˆÙ†"},{id:"inventory.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"},{id:"inventory.delete",label:"Ø­Ø°Ù Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"},{id:"finance.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"finance.create",label:"Ø¥Ø¶Ø§ÙØ© Ù…Ø§Ù„ÙŠØ©"},{id:"finance.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"finance.delete",label:"Ø­Ø°Ù Ø§Ù„Ù…Ø§Ù„ÙŠØ©"},{id:"hr.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"},{id:"hr.create",label:"Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸ÙÙŠÙ†"},{id:"hr.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"},{id:"hr.delete",label:"Ø­Ø°Ù Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"},{id:"settings.view",label:"Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"},{id:"settings.edit",label:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª"},{id:"reports.view",label:"Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"},{id:"reports.export",label:"ØªØµØ¯ÙŠØ± Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"}],b=l=>{let r=[];try{r=typeof l.permissions=="string"?JSON.parse(l.permissions):l.permissions}catch{r=[]}const n=r.includes("*");c({...l,_permissions:new Set(r),isSuper:n}),o(!0)},s=()=>{c({id:null,name:"",description:"",_permissions:new Set,isSuper:!1}),o(!0)},g=l=>{if(i.isSuper)return;const r=new Set(i._permissions);r.has(l)?r.delete(l):r.add(l),c({...i,_permissions:r})},x=()=>{c(l=>({...l,isSuper:!l.isSuper,_permissions:l.isSuper?new Set:new Set(["*"])}))},a=()=>{if(!i.name){p.error("Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ± Ù…Ø·Ù„ÙˆØ¨");return}const l=i.isSuper?["*"]:Array.from(i._permissions);S({id:i.id,name:i.name,description:i.description,permissions:l}),o(!1)},[_,y]=m.useState({isOpen:!1,roleId:null,roleName:""}),T=l=>{y({isOpen:!0,roleId:l.id,roleName:l.name})},L=()=>{u&&_.roleId&&(u(_.roleId),y({isOpen:!1,roleId:null,roleName:""}),o(!1))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(v,{children:"Ø£Ø¯ÙˆØ§Ø± Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª"}),e.jsxs("button",{onClick:s,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Ø¯ÙˆØ± Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:N.map(l=>e.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl hover:shadow-md transition-shadow bg-white relative group dark:bg-white/5 dark:border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:`w-5 h-5 ${l.is_system==1?"text-amber-500":"text-blue-500"}`}),e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:l.name})]}),e.jsxs("div",{className:"flex gap-2 opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>b(l),className:"p-1.5 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",title:"ØªØ¹Ø¯ÙŠÙ„",children:e.jsx(F,{className:"w-4 h-4"})}),l.is_system!=1&&e.jsx("button",{onClick:()=>T(l),className:"p-1.5 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg transition-colors",title:"Ø­Ø°Ù",children:e.jsx(E,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-slate-500 mb-4 h-10 line-clamp-2 dark:text-slate-400",children:l.description||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ"}),e.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t border-slate-50",children:[e.jsx(R,{size:"xs",color:l.is_system==1?"amber":"slate",children:l.is_system==1?"Ù†Ø¸Ø§Ù…":"Ù…Ø®ØµØµ"}),e.jsxs("span",{className:"text-xs text-slate-400 font-mono",children:["ID: ",l.id]})]})]},l.id))})]}),e.jsx($,{children:d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col dark:bg-slate-900 dark:border dark:border-white/10 dark:text-white",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50 dark:bg-white/5 dark:border-white/10",children:[e.jsx(v,{className:"dark:text-white",children:i.id?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±":"Ø¥Ù†Ø´Ø§Ø¡ Ø¯ÙˆØ± Ø¬Ø¯ÙŠØ¯"}),e.jsx("button",{onClick:()=>o(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:e.jsx(W,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±"}),e.jsx(f,{value:i.name,onChange:l=>c({...i,name:l.target.value}),placeholder:"Ù…Ø«Ø§Ù„: Ù…Ø¯ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª",className:"text-right dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(f,{value:i.description,onChange:l=>c({...i,description:l.target.value}),placeholder:"ÙˆØµÙ Ù…Ø®ØªØµØ±...",className:"text-right dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-amber-50 rounded-xl border border-amber-100",children:[e.jsx(X,{className:"w-6 h-6 text-amber-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-amber-900",children:"ØµÙ„Ø§Ø­ÙŠØ§Øª ÙƒØ§Ù…Ù„Ø© (Super Admin)"}),e.jsx("p",{className:"text-xs text-amber-700",children:"Ù…Ù†Ø­ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¯ÙˆÙ† Ø§Ø³ØªØ«Ù†Ø§Ø¡."})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:i.isSuper,onChange:x}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-amber-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-600"})]})]}),!i.isSuper&&e.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50/50",children:[e.jsxs("h4",{className:"font-bold text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-slate-500"})," ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø©"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(l=>{const r=i._permissions.has(l.id);return e.jsxs("div",{onClick:()=>g(l.id),className:`
                                                            cursor-pointer select-none px-3 py-2 rounded-lg border text-xs font-bold flex items-center gap-2 transition-all
                                                            ${r?"bg-blue-600 border-blue-600 text-white shadow-sm":"bg-white border-slate-200 text-slate-600 hover:border-blue-300 hover:bg-white"}
                                                        `,children:[e.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${r?"bg-white/20 border-transparent":"border-slate-300"}`,children:r&&e.jsx(ie,{className:"w-3 h-3 text-white"})}),l.label]},l.id)})})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-between gap-3 dark:bg-white/5 dark:border-white/10",children:[e.jsx("div",{children:i.id&&i.is_system!=1&&e.jsxs("button",{onClick:()=>T(i),className:"px-4 py-2 rounded-xl font-bold text-red-600 bg-red-50 hover:bg-red-100 transition-colors flex items-center gap-2 dark:bg-red-900/20 dark:hover:bg-red-900/30 dark:text-red-400",children:[e.jsx(E,{className:"w-4 h-4"})," Ø­Ø°Ù Ø§Ù„Ø¯ÙˆØ±"]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-6 py-2 rounded-xl font-bold text-slate-500 hover:bg-slate-200 transition-colors dark:text-slate-400 dark:hover:bg-white/10",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:a,className:"px-8 py-2 rounded-xl font-bold bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"})," Ø­ÙØ¸ Ø§Ù„Ø¯ÙˆØ±"]})]})]})]})})}),e.jsx($,{children:_.isOpen&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"p-6 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ne,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"Ø­Ø°Ù Ø§Ù„Ø¯ÙˆØ±"}),e.jsxs("p",{className:"text-slate-500",children:["Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ø¯ÙˆØ± ",e.jsxs("span",{className:"font-bold text-slate-800",children:['"',_.roleName,'"']}),"ØŸ",e.jsx("br",{}),"Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ØŒ ÙˆØ³ÙŠØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø±ØªØ¨Ø·ÙŠÙ† Ø¨Ù‡."]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 flex gap-3 justify-center border-t border-slate-100",children:[e.jsx("button",{onClick:()=>y({isOpen:!1,roleId:null,roleName:""}),className:"px-6 py-2 rounded-xl font-bold text-slate-500 hover:bg-slate-200 transition-colors",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:L,className:"px-6 py-2 rounded-xl font-bold bg-red-600 text-white shadow-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"})," Ù†Ø¹Ù…ØŒ Ø­Ø°Ù"]})]})]})})})]})}function ve({users:N=[],roles:S=[],stations:u=[],onSave:i,onCreate:c}){const[d,o]=m.useState(null),[w,b]=m.useState(!1),s=a=>{const _=a.stations?a.stations.map(y=>String(y.id)):a.station_id?[String(a.station_id)]:[];o({...a,station_ids:_,mode:"edit"}),b(!0)},g=()=>{o({id:null,name:"",email:"",password:"",role_id:"",station_ids:[],status:"active",mode:"create"}),b(!0)},x=()=>{if(d){if(d.mode==="create"){if(!d.name||!d.email||!d.password){p.error("Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØŒ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©");return}c&&c(d)}else i(d);b(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"dark:text-white",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ø¯ÙˆØ§Ø±"}),e.jsxs(R,{color:"blue",children:[N.length," Ù…Ø³ØªØ®Ø¯Ù…"]})]}),e.jsxs("button",{onClick:g,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-bold text-sm hover:bg-emerald-700 flex items-center gap-2 shadow-sm transition-all",children:[e.jsx(M,{className:"w-4 h-4"})," Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase font-bold border-b border-slate-200 dark:bg-white/5 dark:text-slate-400 dark:border-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ù…Ø­Ø·Ø© (Ù…ÙƒØ§Ù† Ø§Ù„Ø¹Ù…Ù„)"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø¯ÙˆØ± (Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©)"}),e.jsx("th",{className:"p-4",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("th",{className:"p-4",children:"Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 text-sm",children:N.map(a=>{const _=a.role_name||(a.role==="super_admin"?"Ù…Ø¯ÙŠØ± Ø¹Ø§Ù… (Legacy)":a.role),y=a.station_name||"Ø¹Ø§Ù… / Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø·Ø§Øª";return e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors dark:hover:bg-white/5 dark:border-white/10",children:[e.jsxs("td",{className:"p-4 font-bold text-slate-800 flex items-center gap-3 dark:text-white",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold",children:a.name.charAt(0).toUpperCase()}),a.name]}),e.jsx("td",{className:"p-4 text-slate-500 font-mono",children:a.email}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold ${a.station_id?"bg-sky-50 text-sky-700":"bg-purple-50 text-purple-700"}`,children:[e.jsx(Z,{className:"w-3 h-3"}),y]})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-bold ${a.role_id?"bg-emerald-50 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:[e.jsx(Y,{className:"w-3 h-3"}),_]})}),e.jsx("td",{className:"p-4",children:e.jsx(R,{size:"xs",color:a.status==="active"?"emerald":"red",children:a.status==="active"?"Ù†Ø´Ø·":"ØºÙŠØ± Ù†Ø´Ø·"})}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>s(a),className:"p-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsx(F,{className:"w-4 h-4"})})})]},a.id)})})]})})]}),e.jsx($,{children:w&&d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-2xl shadow-xl w-full max-w-lg overflow-hidden dark:bg-slate-900 dark:border dark:border-white/10 dark:text-white",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50 dark:bg-white/5 dark:border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center",children:e.jsx(M,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx(v,{className:"dark:text-white",children:d.mode==="create"?"Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯":d.name}),e.jsx(O,{className:"text-xs dark:text-slate-400",children:d.mode==="create"?"Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯":d.email})]})]}),e.jsx("button",{onClick:()=>b(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-white",children:e.jsx(W,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[d.mode==="create"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx(f,{value:d.name,onChange:a=>o({...d,name:a.target.value}),placeholder:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„",className:"text-right dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx(f,{value:d.email,onChange:a=>o({...d,email:a.target.value}),placeholder:"example@email.com",className:"text-right dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Secret)"}),e.jsx(f,{type:"password",value:d.password,onChange:a=>o({...d,password:a.target.value}),placeholder:"********",className:"text-right dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ø¹Ù…Ù„ (Ø§Ù„Ù…Ø­Ø·Ø§Øª)"}),e.jsx(pe,{value:d.station_ids||[],onValueChange:a=>o({...d,station_ids:a}),placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø·Ø§Øª...",className:"text-right !dark:bg-slate-800 !dark:fill-slate-800 !dark:border-slate-700 !dark:text-white [&>button]:!dark:bg-slate-800 [&>button]:!dark:text-white",children:u.map(a=>e.jsx(ge,{value:String(a.id),children:a.name},a.id))}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ø­Ø·Ø© ÙŠÙ‚ÙŠØ¯ ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø­Ø·Ø© ÙÙ‚Ø·. ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ ÙŠØ¹Ù†ÙŠ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø·Ø§Øª (Ø¥Ø¯Ø§Ø±Ø© Ù…Ø±ÙƒØ²ÙŠØ©)."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300 text-right",children:"Ø§Ù„Ø¯ÙˆØ± Ø§Ù„ÙˆØ¸ÙŠÙÙŠ (Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)"}),e.jsxs("select",{value:String(d.role_id||"0"),onChange:a=>o({...d,role_id:a.target.value==="0"?null:a.target.value}),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"0",children:"ØºÙŠØ± Ù…Ø­Ø¯Ø¯ (ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©)"}),S.map(a=>e.jsx("option",{value:String(a.id),children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1",children:"Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-xl flex-1 hover:bg-emerald-50 peer-checked:border-emerald-500",children:[e.jsx("input",{type:"radio",name:"status",checked:d.status==="active",onChange:()=>o({...d,status:"active"}),className:"w-4 h-4 text-emerald-600"}),e.jsx("span",{className:"font-bold text-emerald-700",children:"Ù†Ø´Ø· (Active)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-3 border rounded-xl flex-1 hover:bg-red-50",children:[e.jsx("input",{type:"radio",name:"status",checked:d.status==="inactive",onChange:()=>o({...d,status:"inactive"}),className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"font-bold text-red-700",children:"Ù…ÙˆÙ‚ÙˆÙ (Inactive)"})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3 dark:bg-white/5 dark:border-white/10",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-6 py-2 rounded-xl font-bold text-slate-500 hover:bg-slate-200 transition-colors",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsxs("button",{onClick:x,className:"px-8 py-2 rounded-xl font-bold bg-blue-600 text-white shadow-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"})," Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª"]})]})]})})})]})}const ye={login:xe,logout:ce,create:U,update:F,delete:E},Se={login:"emerald",logout:"slate",create:"blue",update:"amber",delete:"red"},_e={login:"ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„",logout:"ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬",create:"Ø¥Ø¶Ø§ÙØ©",update:"ØªØ¹Ø¯ÙŠÙ„",delete:"Ø­Ø°Ù"},Ce={session:"Ø¬Ù„Ø³Ø©",sale:"Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹",purchase:"Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡",transaction:"Ù…Ø¹Ø§Ù…Ù„Ø© Ù…Ø§Ù„ÙŠØ©",user:"Ù…Ø³ØªØ®Ø¯Ù…",tank:"Ø®Ø²Ø§Ù†",pump:"Ù…Ø§ÙƒÙŠÙ†Ø©",fuel_type:"Ù†ÙˆØ¹ ÙˆÙ‚ÙˆØ¯",role:"ØµÙ„Ø§Ø­ÙŠØ©",supplier:"Ù…ÙˆØ±Ø¯",customer:"Ø¹Ù…ÙŠÙ„"};function Oe(){const[N,S]=m.useState([]),[u,i]=m.useState(!0),[c,d]=m.useState(""),o=async()=>{i(!0);try{const g=await(await fetch(`${window.BASE_URL||""}/api/activity-logs?limit=100`)).json();g.success&&S(g.logs||[])}catch(s){console.error("Failed to fetch logs",s)}finally{i(!1)}};m.useEffect(()=>{o()},[]);const w=N.filter(s=>{var g,x,a;return((g=s.description)==null?void 0:g.toLowerCase().includes(c.toLowerCase()))||((x=s.user_name)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||((a=s.action)==null?void 0:a.toLowerCase().includes(c.toLowerCase()))}),b=s=>new Date(s).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"dark:text-white",children:"Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsxs(R,{color:"blue",children:[N.length," Ø³Ø¬Ù„"]})]}),e.jsx("button",{onClick:o,disabled:u,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 dark:bg-white/10 dark:hover:bg-white/20 transition-all",children:e.jsx(G,{className:`w-4 h-4 text-slate-600 dark:text-slate-300 ${u?"animate-spin":""}`})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª...",value:c,onChange:s=>d(s.target.value),className:"w-full pr-10 pl-4 py-2 rounded-xl border border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white text-right"})]}),e.jsx(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10 overflow-hidden",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(G,{className:"w-8 h-8 text-slate-400 animate-spin"})}):w.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[e.jsx(z,{className:"w-12 h-12 mb-3 opacity-50"}),e.jsx(O,{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª"})]}):e.jsx("div",{className:"divide-y divide-slate-100 dark:divide-white/10 max-h-[500px] overflow-y-auto",children:w.map((s,g)=>{const x=ye[s.action]||z,a=Se[s.action]||"slate";return e.jsx(k.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:g*.02},className:"p-4 hover:bg-slate-50 dark:hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${a}-100 dark:bg-${a}-900/30`,children:e.jsx(x,{className:`w-4 h-4 text-${a}-600 dark:text-${a}-400`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(R,{color:a,size:"sm",children:_e[s.action]||s.action}),e.jsx(R,{color:"slate",size:"sm",children:Ce[s.entity_type]||s.entity_type})]}),e.jsx(O,{className:"text-slate-700 dark:text-slate-200 font-medium text-right",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"}),s.user_name||s.user_display_name||"Ù…Ø¬Ù‡ÙˆÙ„"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),b(s.created_at)]}),s.ip_address&&e.jsx("span",{className:"font-mono text-xs",children:s.ip_address})]})]})]})},s.id||g)})})})]})}function Re({general:N={},fuel:S={},alerts:u={},roles:i=[],fuelTypes:c=[],stations:d=[],users:o=[]}){const[w,b]=m.useState(!1),[s,g]=m.useState(N),[x,a]=m.useState(c),[_,y]=m.useState(!1),[T,L]=m.useState(null),[l,r]=m.useState(!1);m.useEffect(()=>{g(N),a(c)},[N,c]);const n=(t,h)=>{g({...s,[t]:h})},D=async()=>{b(!0);try{const t=new FormData;t.append("section","general"),Object.entries(s).forEach(([h,j])=>t.append(h,j)),await fetch("/PETRODIESEL2/public/settings/update",{method:"POST",body:t}),p.success("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ù†Ø¬Ø§Ø­"),setTimeout(()=>window.location.reload(),1e3)}catch{p.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸")}finally{b(!1)}},ee=async t=>{try{const h=await fetch("/PETRODIESEL2/public/settings/save_fuel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!h.ok){const P=await h.text();throw console.error("Server Error:",P),new Error(`Server responded with ${h.status}`)}const j=await h.json();j.success?(p.success("ØªÙ… Ø­ÙØ¸ Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"),setTimeout(()=>window.location.reload(),500)):p.error(j.message)}catch(h){console.error(h),p.error("ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: "+h.message)}},te=async t=>{if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù†ÙˆØ¹ØŸ"))try{const h=await fetch("/PETRODIESEL2/public/settings/delete_fuel",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({id:t})});let j;const P=await h.text();try{j=JSON.parse(P)}catch{throw new Error("Server returned invalid JSON: "+P.substring(0,100))}if(!h.ok)throw new Error(j.message||`Server Error (${h.status})`);j.success?(p.success("ØªÙ… Ø§Ù„Ø­Ø°Ù Ø¨Ù†Ø¬Ø§Ø­"),a(B=>B.filter(de=>de.id!==t))):p.error(j.message)}catch(h){console.error(h),p.error("ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù: "+h.message)}},se=async t=>{try{const j=await(await fetch("/PETRODIESEL2/public/settings/save_role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();j.success?(p.success("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­"),setTimeout(()=>window.location.reload(),500)):p.error(j.message)}catch{p.error("ÙØ´Ù„ Ø­ÙØ¸ Ø§Ù„Ø¯ÙˆØ±")}},ae=async t=>{try{const j=await(await fetch("/PETRODIESEL2/public/settings/delete_role",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})})).json();j.success?(p.success("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¯ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­"),setTimeout(()=>window.location.reload(),500)):p.error(j.message)}catch{p.error("ÙØ´Ù„ Ø­Ø°Ù Ø§Ù„Ø¯ÙˆØ±")}},le=async t=>{try{const j=await(await fetch("/PETRODIESEL2/public/settings/save_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();j.success?(p.success("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"),setTimeout(()=>window.location.reload(),500)):p.error(j.message)}catch{p.error("ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}},re=async t=>{try{const j=await(await fetch("/PETRODIESEL2/public/settings/create_user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();j.success?(p.success("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­"),setTimeout(()=>window.location.reload(),500)):p.error(j.message)}catch{p.error("ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")}};return e.jsxs(k.div,{initial:{opacity:0},animate:{opacity:1},className:"p-6 max-w-[1800px] mx-auto space-y-6 dark:bg-[#0F172A]",children:[e.jsxs(je,{children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4 mb-6 mt-4",children:[e.jsxs(ke,{className:"bg-white p-1 rounded-2xl shadow-sm ring-1 ring-slate-200 w-full xl:w-fit overflow-x-auto dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(A,{icon:q,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø¹Ø§Ù…"}),e.jsx(A,{icon:Z,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ø§Øª"}),e.jsx(A,{icon:K,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø§Ù„ÙˆÙ‚ÙˆØ¯ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±"}),e.jsx(A,{icon:X,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„Ø£Ù…Ø§Ù†"}),e.jsx(A,{icon:z,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx(A,{icon:H,className:"dark:text-slate-400 ui-selected:dark:bg-emerald-600 ui-selected:dark:text-white",children:"Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ"})]}),e.jsx("button",{onClick:D,disabled:w,className:"w-full xl:w-auto px-6 py-2.5 bg-emerald-600 text-white font-bold rounded-xl shadow-lg hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 whitespace-nowrap dark:bg-emerald-600 dark:hover:bg-emerald-700",children:w?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...":e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"})," Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª"]})})]}),e.jsxs(fe,{children:[e.jsx(I,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"mb-4 font-bold flex items-center gap-2 dark:text-white",children:[e.jsx(V,{className:"w-5 h-5"})," Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¤Ø³Ø³Ø©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø­Ø·Ø©"}),e.jsx(f,{value:s.station_name||"",onChange:t=>n("station_name",t.target.value),placeholder:"Ù…Ø«Ø§Ù„: Ù…Ø­Ø·Ø© Ø¨ØªØ±ÙˆØ¯ÙŠØ²Ù„",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white text-right"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø±Ù‚Ù… Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„ØªØ¬Ø§Ø±ÙŠ"}),e.jsx(f,{value:s.cr_number||"",onChange:t=>n("cr_number",t.target.value),placeholder:"70XXXXXXXX",className:"rounded-xl font-mono dark:bg-slate-800 dark:border-slate-700 dark:text-white text-right"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¶Ø±ÙŠØ¨ÙŠ VAT"}),e.jsx(f,{value:s.vat_number||"",onChange:t=>n("vat_number",t.target.value),placeholder:"3XXXXXXXXXXXXX",className:"rounded-xl font-mono dark:bg-slate-800 dark:border-slate-700 dark:text-white text-right"})]})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"mb-4 font-bold flex items-center gap-2 dark:text-white",children:[e.jsx(V,{className:"w-5 h-5"})," Ø§Ù„Ù„ØºØ© ÙˆØ§Ù„Ø¹Ù…Ù„Ø©"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ù„ØºØ© Ø§Ù„Ù†Ø¸Ø§Ù…"}),e.jsxs("select",{value:s.language||"ar",onChange:t=>n("language",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"ar",children:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Arabic)"}),e.jsx("option",{value:"en",children:"English (Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©"}),e.jsxs("select",{value:s.currency||"SDG",onChange:t=>n("currency",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"SDG",children:"Ø¬Ù†ÙŠÙ‡ Ø³ÙˆØ¯Ø§Ù†ÙŠ (SDG)"}),e.jsx("option",{value:"SAR",children:"Ø±ÙŠØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ (SAR)"}),e.jsx("option",{value:"USD",children:"Ø¯ÙˆÙ„Ø§Ø± Ø£Ù…Ø±ÙŠÙƒÙŠ (USD)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© (Timezone)"}),e.jsxs("select",{value:s.timezone||"Africa/Khartoum",onChange:t=>n("timezone",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"Africa/Khartoum",children:"ğŸ‡¸ğŸ‡© Ø§Ù„Ø®Ø±Ø·ÙˆÙ… (Khartoum)"}),e.jsx("option",{value:"Africa/Cairo",children:"ğŸ‡ªğŸ‡¬ Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© (Cairo)"}),e.jsx("option",{value:"Asia/Riyadh",children:"ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø±ÙŠØ§Ø¶ (Riyadh)"}),e.jsx("option",{value:"Asia/Dubai",children:"ğŸ‡¦ğŸ‡ª Ø¯Ø¨ÙŠ (Dubai)"}),e.jsx("option",{value:"Asia/Baghdad",children:"ğŸ‡®ğŸ‡¶ Ø¨ØºØ¯Ø§Ø¯ (Baghdad)"}),e.jsx("option",{value:"Asia/Kuwait",children:"ğŸ‡°ğŸ‡¼ Ø§Ù„ÙƒÙˆÙŠØª (Kuwait)"}),e.jsx("option",{value:"Africa/Tripoli",children:"ğŸ‡±ğŸ‡¾ Ø·Ø±Ø§Ø¨Ù„Ø³ (Tripoli)"}),e.jsx("option",{value:"Asia/Beirut",children:"ğŸ‡±ğŸ‡§ Ø¨ÙŠØ±ÙˆØª (Beirut)"})]}),e.jsx(O,{className:"text-xs text-slate-500 mt-2 dark:text-slate-400 text-right",children:"ÙŠÙØ³ØªØ®Ø¯Ù… Ù„Ø¶Ø¨Ø· Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª ÙÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§ØªØŒ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§ØªØŒ ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"})]}),s.currency!=="SAR"&&e.jsx(k.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:e.jsx(O,{className:"text-xs text-slate-400 mt-1",children:"Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø© ÙƒØ¹Ù…Ù„Ø© Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„"})})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"mb-4 font-bold flex items-center gap-2 dark:text-white",children:[e.jsx(H,{className:"w-5 h-5"})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ´ØºÙŠÙ„"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø©"}),e.jsx(Q,{checked:s.maintenance_mode==="1",onChange:t=>n("maintenance_mode",t?"1":"0")})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx(Q,{checked:s.enable_notifications==="1",onChange:t=>n("enable_notifications",t?"1":"0")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ù„Ù‚ÙÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Auto Lock)"}),e.jsxs("select",{value:s.auto_lock_minutes||"0",onChange:t=>n("auto_lock_minutes",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"0",className:"dark:bg-slate-800",children:"Ù…Ø¹Ø·Ù„ (Disabled)"}),e.jsx("option",{value:"1",className:"dark:bg-slate-800",children:"Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø©"}),e.jsx("option",{value:"2",className:"dark:bg-slate-800",children:"Ø¯Ù‚ÙŠÙ‚ØªØ§Ù†"}),e.jsx("option",{value:"5",className:"dark:bg-slate-800",children:"5 Ø¯Ù‚Ø§Ø¦Ù‚"}),e.jsx("option",{value:"10",className:"dark:bg-slate-800",children:"10 Ø¯Ù‚Ø§Ø¦Ù‚"})]})]})]})]})}),e.jsx(I,{children:e.jsx("div",{className:"mt-6",children:e.jsx(we,{stations:d,users:o})})}),e.jsx(I,{children:e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6",children:[e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"mb-4 font-bold flex items-center gap-2 dark:text-white",children:[e.jsx(q,{className:"w-5 h-5"})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ù‚ÙŠØ§Ø³"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"ÙˆØ­Ø¯Ø© Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ…ÙŠØ§Øª (Fuel Volume Unit)"}),e.jsxs("select",{value:s.volume_display_mode||"liters",onChange:t=>n("volume_display_mode",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"liters",children:"Ù„ØªØ± ÙÙ‚Ø· (Liters Only)"}),e.jsx("option",{value:"gallons",children:"Ø¬Ø§Ù„ÙˆÙ† ÙÙ‚Ø· (Gallons Only)"}),e.jsx("option",{value:"both",children:"ÙƒÙ„Ø§Ù‡Ù…Ø§ (Ù„ØªØ± + Ø¬Ø§Ù„ÙˆÙ†)"})]}),e.jsx(O,{className:"text-xs text-slate-500 mt-2 dark:text-slate-400 text-right",children:"Ø³ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„ØªØ­ÙˆÙŠÙ„: 1 Ø¬Ø§Ù„ÙˆÙ† = 4.5 Ù„ØªØ±"})]})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(v,{className:"dark:text-white",children:"Ù‚Ø§Ø¦Ù…Ø© Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"}),e.jsxs("button",{onClick:()=>{L(null),y(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold text-sm hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"})," Ù†ÙˆØ¹ Ø¬Ø¯ÙŠØ¯"]})]}),e.jsx("div",{className:"space-y-4",children:x.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100 dark:bg-white/5 dark:border-white/10 dark:text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:t.color_hex+"20",color:t.color_hex},children:e.jsx(K,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-lg text-slate-700 block dark:text-white",children:t.name}),e.jsx("span",{className:"text-xs text-slate-400 font-sans",children:t.code})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsxs("p",{className:"font-bold font-mono text-lg text-navy-900 dark:text-white",children:[t.price_per_liter," ",e.jsx("span",{className:"text-xs",children:s.currency||"SDG"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{L(t),y(!0)},className:"p-2 bg-white border border-slate-200 rounded-lg text-blue-600 hover:bg-blue-50 transition-all dark:bg-slate-800 dark:border-slate-700 dark:text-blue-400",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>te(t.id),className:"p-2 bg-white border border-slate-200 rounded-lg text-red-600 hover:bg-red-50 transition-all dark:bg-slate-800 dark:border-slate-700 dark:text-red-400",children:e.jsx(E,{className:"w-4 h-4"})})]})]})]},t.id))})]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-8",children:[e.jsx(Ne,{roles:i,onSave:se,onDelete:ae}),e.jsx(ve,{users:o,roles:i,stations:d,onSave:le,onCreate:re})]})}),e.jsx(I,{children:e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 py-8 flex flex-col items-center justify-center space-y-6 bg-slate-50/50 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:text-white",children:[e.jsx(me,{className:"w-16 h-16 text-slate-300 dark:text-slate-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"dark:text-white",children:"Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ Ù„Ù„Ù†Ø¸Ø§Ù…"}),e.jsx(O,{className:"mt-2 dark:text-slate-400",children:"Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© ÙƒØ§Ù…Ù„Ø© Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"})]}),e.jsxs("a",{href:"/PETRODIESEL2/public/settings/backup",target:"_blank",className:"px-6 py-3 bg-navy-900 text-white font-bold rounded-xl shadow-lg hover:bg-navy-800 transition-all flex items-center gap-2 dark:bg-indigo-600 dark:hover:bg-indigo-700",children:[e.jsx(be,{className:"w-5 h-5"}),"ØªØ­Ù…ÙŠÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© (SQL)"]})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-4 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"flex items-center gap-2 dark:text-white",children:[e.jsx(ue,{className:"w-5 h-5"})," Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"SMTP Server"}),e.jsx(f,{value:s.smtp_host||"",onChange:t=>n("smtp_host",t.target.value),placeholder:"smtp.gmail.com",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"SMTP Port"}),e.jsx(f,{value:s.smtp_port||"587",onChange:t=>n("smtp_port",t.target.value),placeholder:"587",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Email)"}),e.jsx(f,{value:s.smtp_username||"",onChange:t=>n("smtp_username",t.target.value),placeholder:"your@email.com",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsx(f,{type:"password",value:s.smtp_password||"",onChange:t=>n("smtp_password",t.target.value),placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø¨Ø±ÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª"}),e.jsx(f,{value:s.notification_email||"",onChange:t=>n("notification_email",t.target.value),placeholder:"admin@yourcompany.com",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-slate-100 p-6 space-y-4 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(v,{className:"flex items-center gap-2 dark:text-white",children:[e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙˆØ§ØªØ³Ø§Ø¨"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ù…Ø²ÙˆØ¯ Ø§Ù„Ø®Ø¯Ù…Ø©"}),e.jsxs("select",{value:s.whatsapp_provider||"ultramsg",onChange:t=>n("whatsapp_provider",t.target.value),className:"w-full rounded-xl border-slate-200 dark:bg-slate-800 dark:border-slate-700 dark:text-white px-3 py-2 text-right focus:ring-2 focus:ring-blue-500 border outline-none transition-all",children:[e.jsx("option",{value:"ultramsg",children:"UltraMsg"}),e.jsx("option",{value:"twilio",children:"Twilio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Instance ID / SID"}),e.jsx(f,{value:s.whatsapp_instance_id||"",onChange:t=>n("whatsapp_instance_id",t.target.value),placeholder:"instance12345",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"API Token"}),e.jsx(f,{type:"password",value:s.whatsapp_api_key||"",onChange:t=>n("whatsapp_api_key",t.target.value),placeholder:"your-api-token",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-bold text-slate-700 mb-1 block dark:text-slate-300 text-right",children:"Ø±Ù‚Ù… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª"}),e.jsx(f,{value:s.notification_phone||"",onChange:t=>n("notification_phone",t.target.value),placeholder:"+249123456789",className:"rounded-xl dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]})]}),e.jsxs(C,{className:"rounded-2xl shadow-md ring-1 ring-red-100 py-6 flex flex-col items-center justify-center space-y-4 bg-red-50/50 dark:bg-red-900/10 dark:border dark:border-red-900/20",children:[e.jsx(v,{className:"text-red-700 dark:text-red-400",children:"Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø®Ø·Ø±"}),e.jsx(O,{className:"text-red-600 dark:text-red-300",children:"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹ (Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)"}),e.jsxs("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-red-600 text-white font-bold rounded-xl shadow-lg hover:bg-red-700 transition-all flex items-center gap-2 dark:bg-red-700 dark:hover:bg-red-600",children:[e.jsx(E,{className:"w-5 h-5"}),"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹"]})]})]})}),e.jsx(I,{children:e.jsx("div",{className:"mt-6",children:e.jsx(Oe,{})})})]})]}),e.jsx(Ee,{isOpen:_,onClose:()=>y(!1),fuel:T,onSave:ee}),e.jsx(Te,{isOpen:l,onClose:()=>r(!1)})]})}function Ee({isOpen:N,onClose:S,fuel:u,onSave:i}){const[c,d]=m.useState(""),[o,w]=m.useState(""),[b,s]=m.useState("#64748b");m.useEffect(()=>{u?(d(u.name),w(u.price_per_liter),s(u.color_hex)):(d(""),w(""),s("#64748b"))},[u,N]);const g=x=>{x.preventDefault(),i({id:u==null?void 0:u.id,name:c,price_per_liter:o,color_hex:b}),S()};return N?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm",children:e.jsxs(k.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md dark:bg-slate-900 dark:border dark:border-white/10 dark:text-white",children:[e.jsx(v,{className:"mb-4 dark:text-white",children:u?"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ÙˆÙ‚ÙˆØ¯":"Ø¥Ø¶Ø§ÙØ© ÙˆÙ‚ÙˆØ¯ Ø¬Ø¯ÙŠØ¯"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-white",children:"Ø§Ø³Ù… Ø§Ù„ÙˆÙ‚ÙˆØ¯"}),e.jsx(f,{value:c,onChange:x=>d(x.target.value),required:!0,placeholder:"Ù…Ø«Ø§Ù„: Ø¨Ù†Ø²ÙŠÙ† 98",className:"dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-white",children:"Ø§Ù„Ø³Ø¹Ø± (Ù„ÙƒÙ„ Ù„ØªØ±)"}),e.jsx(f,{type:"number",step:"0.01",value:o,onChange:x=>w(x.target.value),required:!0,className:"dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-white",children:"Ù„ÙˆÙ† Ø§Ù„ØªÙ…ÙŠÙŠØ²"}),e.jsx("div",{className:"flex gap-2",children:["#64748b","#ef4444","#f97316","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899"].map(x=>e.jsx("button",{type:"button",onClick:()=>s(x),className:`w-8 h-8 rounded-full border-2 ${b===x?"border-navy-900 dark:border-white scale-110":"border-transparent"}`,style:{backgroundColor:x}},x))})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:S,className:"flex-1 py-2 text-slate-500 font-bold hover:bg-slate-100 rounded-lg dark:text-slate-400 dark:hover:bg-white/5",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx("button",{type:"submit",className:"flex-1 py-2 bg-blue-600 text-white font-bold rounded-lg hover:bg-blue-700",children:"Ø­ÙØ¸"})]})]})]})}):null}function Te({isOpen:N,onClose:S}){const[u,i]=m.useState(1),[c,d]=m.useState(!1),[o,w]=m.useState({sales:!1,purchases:!1,tanks_pumps:!1,accounts:!1,hr:!1,customers_suppliers:!1,fuel_types:!1}),[b,s]=m.useState({email:"",password:""}),[g,x]=m.useState(""),a=[{key:"sales",label:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",desc:"Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹",icon:"ğŸ’°"},{key:"purchases",label:"Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª",desc:"Ø¬Ù…ÙŠØ¹ ÙÙˆØ§ØªÙŠØ± ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡",icon:"ğŸ“¦"},{key:"tanks_pumps",label:"Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª ÙˆØ§Ù„Ù…ÙƒØ§Ø¦Ù†",desc:"Ø§Ù„Ø®Ø²Ø§Ù†Ø§ØªØŒ Ø§Ù„Ù…Ø¶Ø®Ø§ØªØŒ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª",icon:"â›½"},{key:"accounts",label:"Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª",desc:"Ø§Ù„Ø®Ø²Ø§Ø¦Ù†ØŒ Ø§Ù„Ø¨Ù†ÙˆÙƒØŒ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©",icon:"ğŸ¦"},{key:"hr",label:"Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©",desc:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†ØŒ Ø§Ù„Ø­Ø¶ÙˆØ±ØŒ Ø§Ù„Ø³Ù„ÙØŒ Ø§Ù„Ø±ÙˆØ§ØªØ¨",icon:"ğŸ‘¥"},{key:"customers_suppliers",label:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†",desc:"Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†",icon:"ğŸ¤"},{key:"fuel_types",label:"Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯",desc:"ØªØ¹Ø±ÙŠÙØ§Øª Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯ ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±",icon:"ğŸ›¢ï¸"}],_=r=>{w(n=>({...n,[r]:!n[r]}))},y=()=>{const n=!Object.values(o).every(D=>D);w(Object.fromEntries(Object.keys(o).map(D=>[D,n])))},T=async()=>{d(!0),x("");try{const n=await(await fetch("/PETRODIESEL2/public/settings/factory_reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sections:o,email:b.email,password:b.password})})).json();n.success?(S(),p.success(n.message),setTimeout(()=>window.location.reload(),2e3)):x(n.message||"ÙØ´Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©")}catch{x("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…")}finally{d(!1)}},L=()=>{i(1),w({sales:!1,purchases:!1,tanks_pumps:!1,accounts:!1,hr:!1,customers_suppliers:!1,fuel_types:!1}),s({email:"",password:""}),x(""),S()},l=Object.values(o).filter(r=>r).length;return N?e.jsx($,{children:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs(k.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden",children:[u===1&&e.jsxs(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 text-center",children:[e.jsx(k.div,{animate:{scale:[1,1.1,1],rotate:[0,-5,5,0]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-red-500 to-red-700 rounded-full flex items-center justify-center shadow-lg shadow-red-500/30",children:e.jsx(k.span,{animate:{scale:[1,1.2,1]},transition:{duration:.8,repeat:1/0},className:"text-5xl",children:"âš ï¸"})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-3",children:"ØªØ­Ø°ÙŠØ± Ù‡Ø§Ù…!"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6 leading-relaxed",children:["Ø£Ù†Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ù…ØµÙ†Ø¹.",e.jsx("br",{}),e.jsx("span",{className:"text-red-500 font-bold",children:"Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡!"})]}),e.jsx(k.div,{animate:{boxShadow:["0 0 20px rgba(239,68,68,0.3)","0 0 40px rgba(239,68,68,0.5)","0 0 20px rgba(239,68,68,0.3)"]},transition:{duration:2,repeat:1/0},className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 mb-6",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:"Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:L,className:"flex-1 py-3 px-6 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(2),className:"flex-1 py-3 px-6 bg-gradient-to-r from-red-600 to-red-700 text-white font-bold rounded-xl shadow-lg shadow-red-500/30 hover:from-red-700 hover:to-red-800 transition-all",children:"Ù…ØªØ§Ø¨Ø¹Ø© â†"})]})]}),u===2&&e.jsxs(k.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Ø§Ø®ØªØ± Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù„Ù„Ø­Ø°Ù"}),e.jsx("button",{onClick:y,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:Object.values(o).every(r=>r)?"Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ÙƒÙ„":"ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„"})]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto mb-6",children:a.map((r,n)=>e.jsx(k.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:n*.05},onClick:()=>_(r.key),className:`p-4 rounded-xl cursor-pointer border-2 transition-all ${o[r.key]?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:r.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:r.label}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:r.desc})]}),e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${o[r.key]?"border-red-500 bg-red-500":"border-slate-300 dark:border-slate-600"}`,children:o[r.key]&&e.jsx(k.span,{initial:{scale:0},animate:{scale:1},className:"text-white text-sm",children:"âœ“"})})]})},r.key))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(1),className:"flex-1 py-3 px-6 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",children:"â† Ø±Ø¬ÙˆØ¹"}),e.jsxs(k.button,{whileHover:{scale:l>0?1.02:1},whileTap:{scale:l>0?.98:1},onClick:()=>l>0&&i(3),disabled:l===0,className:`flex-1 py-3 px-6 font-bold rounded-xl transition-all ${l>0?"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg shadow-red-500/30":"bg-slate-200 dark:bg-slate-700 text-slate-400 cursor-not-allowed"}`,children:["Ù…ØªØ§Ø¨Ø¹Ø© (",l," Ù‚Ø³Ù…)"]})]})]}),u===3&&e.jsxs(k.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-slate-600 to-slate-800 rounded-full flex items-center justify-center",children:e.jsx(X,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-2",children:"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‡ÙˆÙŠØ©"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ Ù„Ù„ØªØ£ÙƒÙŠØ¯"})]}),g&&e.jsx(k.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 mb-4 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-center text-sm text-red-600 dark:text-red-400",children:g}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 text-right",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"}),e.jsx("input",{type:"email",value:b.email,onChange:r=>s(n=>({...n,email:r.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:ring-2 focus:ring-red-500 outline-none transition-all text-right",placeholder:"admin@example.com",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 text-right",children:"ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"}),e.jsx("input",{type:"password",value:b.password,onChange:r=>s(n=>({...n,password:r.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-white focus:ring-2 focus:ring-red-500 outline-none transition-all text-right",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})]}),e.jsxs("div",{className:"p-4 mb-6 bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 font-bold mb-2",children:"Ø³ÙŠØªÙ… Ø­Ø°Ù:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.filter(r=>o[r.key]).map(r=>e.jsxs("span",{className:"px-2 py-1 bg-red-200 dark:bg-red-800 text-red-700 dark:text-red-200 text-xs rounded-lg",children:[r.icon," ",r.label]},r.key))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>i(2),disabled:c,className:"flex-1 py-3 px-6 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all disabled:opacity-50",children:"â† Ø±Ø¬ÙˆØ¹"}),e.jsx(k.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:T,disabled:c||!b.email||!b.password,className:`flex-1 py-3 px-6 font-bold rounded-xl transition-all flex items-center justify-center gap-2 ${c||!b.email||!b.password?"bg-slate-300 dark:bg-slate-700 text-slate-500 cursor-not-allowed":"bg-gradient-to-r from-red-600 to-red-700 text-white shadow-lg shadow-red-500/30"}`,children:c?e.jsxs(e.Fragment,{children:[e.jsx(k.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-5 h-5"}),"ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù"]})})]})]})]})})}):null}export{Re as default};
