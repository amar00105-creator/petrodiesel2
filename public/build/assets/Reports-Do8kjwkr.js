import{j as e,o as ke,p as ve,aq as _e,ar as Se,t as I,T as ne,q as je,f as fe,m as X,F as De,ap as $e,A as ye,g as Ce,Q as ie,a8 as Ne,U as le,W as Fe,af as we,_ as Le}from"./ui-DtuMUTb1.js";import{r as k}from"./vendor-BdFMDtQB.js";import{c as y,b as T,m as o,g as oe,s as q,j as Re,k as Ee,l as te,a as J}from"./main-D8tG-o71.js";import Ue from"./CustomerReport-B1O6zsqU.js";function Te({stationId:z}){var v,j;const[D,w]=k.useState(new Date().toISOString().split("T")[0]),[u,E]=k.useState(null),[t,P]=k.useState(!1),p=async()=>{P(!0);try{const g=new URLSearchParams({action:"get_detailed_daily_sales",date:D,station_id:z||"all"}).toString(),A=await(await fetch(`${window.BASE_URL||""}/reports?${g}`)).json();A.success?E(A):I.error(A.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(g){console.error(g),I.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{P(!1)}};k.useEffect(()=>{p()},[D,z]);const f=g=>parseFloat(g||0).toLocaleString("en-US"),Q=()=>{window.print()};return e.jsx("div",{className:"space-y-6 animate-fade-in p-4 print:p-0",children:e.jsxs(y,{className:"bg-white print:shadow-none print:border-none",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-4",children:[e.jsxs("div",{className:"text-center md:text-right",children:[e.jsx(T,{className:"text-2xl font-black text-slate-800",children:"ØªÙ‚Ø±ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©"}),e.jsx(o,{className:"text-slate-500",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª ÙˆØ­Ø±ÙƒØ© Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª"})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:D,onChange:g=>w(g.target.value),className:"pl-3 pr-10 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors"}),e.jsx(ke,{className:"w-5 h-5 text-slate-400 absolute right-3 top-2.5 pointer-events-none"})]}),e.jsx("button",{onClick:Q,className:"p-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors",children:e.jsx(ve,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"hidden print:block font-bold text-xl",children:["Ø§Ù„ØªØ§Ø±ÙŠØ®: ",D]})]}),e.jsx("div",{className:"overflow-x-auto border-2 border-slate-200 rounded-lg mt-4",children:e.jsxs("table",{className:"w-full text-center text-sm",children:[e.jsx("thead",{className:"bg-slate-100 text-slate-800 font-bold border-b-2 border-slate-300",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border-r border-slate-200",children:"#"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-blue-50",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-orange-50",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3 border-r border-slate-200 bg-emerald-50",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹ (Ù„ØªØ±Ø§Øª)"}),e.jsx("th",{className:"p-3 border-r border-slate-200",children:"Ø³Ø¹Ø± Ø§Ù„Ù„ØªØ±"}),e.jsx("th",{className:"p-3 bg-indigo-50",children:"Ù…Ø¨Ù„Øº Ø§Ù„Ø¨ÙŠØ¹"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:t?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):((v=u==null?void 0:u.sales)==null?void 0:v.length)>0?u.sales.map((g,h)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors bg-white",children:[e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono text-slate-400",children:h+1}),e.jsxs("td",{className:"p-2 border-r border-slate-100 font-bold",children:[g.machine_name," ",e.jsxs("span",{className:"text-xs text-slate-400",children:["(",g.fuel_type,")"]})]}),e.jsx("td",{className:"p-2 border-r border-slate-100",children:g.worker_name}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono font-bold text-blue-700",children:f(g.current_counter)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono text-slate-600",children:f(g.previous_counter)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono font-bold text-emerald-600 text-lg bg-emerald-50/30",children:f(g.volume_sold)}),e.jsx("td",{className:"p-2 border-r border-slate-100 font-mono",children:f(g.price_per_liter)}),e.jsx("td",{className:"p-2 font-mono font-bold text-indigo-700 bg-indigo-50/30",children:f(g.total_amount)})]},h)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®"})})}),(u==null?void 0:u.totals)&&e.jsx("tfoot",{className:"bg-slate-800 text-white font-bold border-t-2 border-slate-800",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-3 text-left pl-6",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("td",{className:"p-3 font-mono text-emerald-300 text-lg",children:f(u.totals.total_liters)}),e.jsx("td",{className:"p-3"}),e.jsx("td",{className:"p-3 font-mono text-indigo-300 text-lg",children:f(u.totals.total_amount)})]})})]})}),((j=u==null?void 0:u.tanks)==null?void 0:j.length)>0&&e.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.tanks.map((g,h)=>e.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden print:border-slate-800 print:break-inside-avoid",children:[e.jsxs("div",{className:"bg-slate-50 p-3 border-b border-slate-200 flex justify-between items-center",children:[e.jsx("div",{className:"font-bold text-slate-700",children:g.tank_name}),e.jsx(oe,{size:"xs",color:g.fuel_type.includes("Benzine")?"emerald":"amber",children:g.fuel_type})]}),e.jsxs("div",{className:"p-4 space-y-3 bg-white text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-dashed border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-500",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Opening)"}),e.jsx("span",{className:"font-mono font-bold",children:f(g.opening_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center text-emerald-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_e,{className:"w-3 h-3"})," ÙˆØ§Ø±Ø¯ (Purchases)"]}),e.jsxs("span",{className:"font-mono font-bold",children:["+",f(g.purchases_in)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-rose-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-3 h-3"})," Ù…Ø¨ÙŠØ¹Ø§Øª (Sales)"]}),e.jsxs("span",{className:"font-mono font-bold",children:["-",f(g.sales_out)]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-2 rounded-lg",children:[e.jsx("span",{className:"text-slate-700 font-bold",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø¯ÙØªØ±ÙŠ (Theoretical)"}),e.jsx("span",{className:"font-mono font-bold text-blue-700",children:f(g.theoretical_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center border-b border-dashed border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-500",children:"Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ© (Actual)"}),e.jsx("span",{className:"font-mono font-bold text-slate-800",children:f(g.actual_balance)})]}),e.jsxs("div",{className:"flex justify-between items-center pt-1",children:[e.jsx("span",{className:"font-bold text-slate-700",children:"Ø²ÙŠØ§Ø¯Ø© / Ø¹Ø¬Ø² (Variance)"}),e.jsx("span",{className:`font-mono font-black text-lg ${g.variance<0?"text-red-600":"text-emerald-600"}`,children:f(g.variance)})]})]})]},h))})]})})}function Ae({stationId:z}){var l;const[D,w]=k.useState([]),[u,E]=k.useState(""),[t,P]=k.useState(new Date().toISOString().split("T")[0]),[p,f]=k.useState(null),[Q,v]=k.useState(!1);k.useEffect(()=>{j()},[z]),k.useEffect(()=>{u&&g()},[u,t]);const j=async()=>{try{const i=new URLSearchParams({action:"get_stats",station_id:z||"all"}).toString(),$=await(await fetch(`${window.BASE_URL||""}/reports?${i}`)).json();if($.success&&$.warehouse&&$.warehouse.tanks){const a=$.warehouse.tanks.map(r=>({id:r.id||r.name,name:r.name,fuel_type:r.fuel}));w(a),a.length>0?a.find(d=>d.id==u)||E(a[0].id):(E(""),f(null))}}catch(i){console.error("Failed to fetch tanks:",i),I.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª")}},g=async()=>{v(!0);try{const i=new URLSearchParams({action:"get_tank_sales",tank_id:u,date:t}).toString(),$=await(await fetch(`${window.BASE_URL||""}/reports?${i}`)).json();$.success?f($):I.error($.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(i){console.error(i),I.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{v(!1)}},h=i=>parseFloat(i||0).toLocaleString("en-US",{maximumFractionDigits:2}),A=()=>{window.print()};return e.jsx("div",{className:"space-y-6 animate-fade-in p-4 print:p-0",children:e.jsxs(y,{className:"bg-white print:shadow-none print:border-none dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6 print:mb-4",children:[e.jsxs("div",{className:"text-center md:text-right",children:[e.jsxs(T,{className:"text-2xl font-black text-slate-800 dark:text-white",children:["ØªÙ‚Ø±ÙŠØ± Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¨ÙŠØ± Ø±Ù‚Ù… ",((l=p==null?void 0:p.tank)==null?void 0:l.name)||""]}),e.jsxs(o,{className:"text-slate-500 dark:text-slate-400",children:["Ø§Ù„ØªØ§Ø±ÙŠØ®: ",new Date(t).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 print:hidden",children:[e.jsxs("select",{value:u,onChange:i=>E(i.target.value),className:"px-4 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors dark:bg-slate-800 dark:border-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ø¨ÙŠØ±"}),D.map(i=>e.jsxs("option",{value:i.id,children:[i.name," - ",i.fuel_type]},i.id))]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"date",value:t,onChange:i=>P(i.target.value),className:"pl-3 pr-10 py-2 border-2 border-slate-200 rounded-xl font-bold text-slate-700 focus:border-blue-500 outline-none transition-colors dark:bg-slate-800 dark:border-slate-700 dark:text-white"}),e.jsx(ke,{className:"w-5 h-5 text-slate-400 absolute right-3 top-2.5 pointer-events-none"})]}),e.jsx("button",{onClick:A,className:"p-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl transition-colors dark:bg-slate-800 dark:text-white dark:hover:bg-slate-700",children:e.jsx(ve,{className:"w-5 h-5"})})]})]}),u?Q?e.jsx("div",{className:"text-center py-12",children:e.jsx(o,{className:"text-slate-400",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})}):p?e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-auto border-2 border-slate-800 rounded-lg mt-4 dark:border-white/10",children:e.jsxs("table",{className:"w-full text-center text-sm border-collapse",children:[e.jsx("thead",{className:"bg-slate-700 text-white font-bold dark:bg-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø±Ù‚Ù… Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ù„ØªØ±Ø§Øª"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10 bg-blue-600",children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹ Ø¬Ø§Ù„ÙˆÙ†"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø³Ø¹Ø± Ø§Ù„Ù„ØªØ±"}),e.jsx("th",{className:"p-3 border border-slate-600 dark:border-white/10",children:"Ø§Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¨Ù„Øº Ø§Ù„Ø¨ÙŠØ¹"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-300 dark:divide-white/10",children:p.sales.length>0?p.sales.map((i,F)=>{const $=parseFloat(i.volume_sold||0)/3.78541;return e.jsxs("tr",{className:"hover:bg-slate-50 bg-white dark:bg-white/5 dark:hover:bg-white/10 text-slate-800 dark:text-slate-200",children:[e.jsx("td",{className:"p-2 border border-slate-300 font-bold dark:border-white/10",children:i.machine_name}),e.jsx("td",{className:"p-2 border border-slate-300 dark:border-white/10",children:i.worker_name}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono dark:border-white/10",children:h(i.current_counter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono dark:border-white/10",children:h(i.previous_counter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono font-bold text-blue-700 dark:text-blue-400 dark:border-white/10",children:h(i.volume_sold)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono font-bold text-blue-700 bg-blue-50 dark:text-blue-400 dark:border-white/10 dark:bg-blue-900/20",children:h($)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono dark:border-white/10",children:h(i.price_per_liter)}),e.jsx("td",{className:"p-2 border border-slate-300 font-mono font-bold dark:border-white/10",children:h(i.total_amount)})]},F)}):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400 border border-slate-300 dark:border-white/10 dark:bg-white/5",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¨ÙŠØ± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®"})})}),e.jsxs("tfoot",{className:"bg-slate-100 font-bold text-slate-800 dark:bg-white/5 dark:text-white",children:[e.jsxs("tr",{className:"border-t-2 border-slate-800 dark:border-white/10 bg-yellow-50 dark:bg-yellow-900/20",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right border border-slate-300 dark:border-white/10 font-black",children:"Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ¹"}),e.jsx("td",{className:"p-3 font-mono text-blue-700 text-lg border border-slate-300 dark:text-blue-400 dark:border-white/10",children:h(p.summary.total_volume_sold)}),e.jsx("td",{className:"p-3 font-mono text-blue-700 text-lg border border-slate-300 bg-blue-50 dark:text-blue-400 dark:border-white/10 dark:bg-blue-900/20",children:h(parseFloat(p.summary.total_volume_sold||0)/3.78541)}),e.jsx("td",{className:"p-3 border border-slate-300 dark:border-white/10"}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 dark:border-white/10",children:h(p.summary.total_amount)})]}),e.jsxs("tr",{className:"bg-white dark:bg-white/5",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right border border-slate-300 dark:border-white/10",children:"ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¨ÙŠØ¹"}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 dark:border-white/10",children:h(p.summary.opening_balance)}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 bg-blue-50 dark:border-white/10 dark:bg-blue-900/20",children:h(parseFloat(p.summary.opening_balance||0)/3.78541)}),e.jsx("td",{colSpan:"2",className:"p-3 border border-slate-300 dark:border-white/10"})]}),e.jsxs("tr",{className:"bg-white dark:bg-white/5",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right border border-slate-300 dark:border-white/10",children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØ± Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹ ÙˆÙ‚Ø¨Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ù‡"}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 dark:border-white/10",children:h(p.summary.theoretical_closing)}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 bg-blue-50 dark:border-white/10 dark:bg-blue-900/20",children:h(parseFloat(p.summary.theoretical_closing||0)/3.78541)}),e.jsx("td",{colSpan:"2",className:"p-3 border border-slate-300 dark:border-white/10"})]}),e.jsxs("tr",{className:"bg-white dark:bg-white/5",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right border border-slate-300 dark:border-white/10",children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ¹"}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 dark:border-white/10",children:h(p.summary.actual_closing)}),e.jsx("td",{className:"p-3 font-mono text-lg border border-slate-300 bg-blue-50 dark:border-white/10 dark:bg-blue-900/20",children:h(parseFloat(p.summary.actual_closing||0)/3.78541)}),e.jsx("td",{colSpan:"2",className:"p-3 border border-slate-300 dark:border-white/10"})]}),e.jsxs("tr",{className:"bg-slate-200 dark:bg-white/10",children:[e.jsx("td",{colSpan:"4",className:"p-3 text-right font-black border border-slate-300 dark:border-white/10",children:"Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ù‡ Ø¹Ø¬Ø² Ø²ÙŠØ§Ø¯Ù‡"}),e.jsxs("td",{className:`p-3 font-mono font-black text-xl border border-slate-300 dark:border-white/10 ${parseFloat(p.summary.variance||0)<0?"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20":"text-emerald-600 bg-emerald-50 dark:text-emerald-400 dark:bg-emerald-900/20"}`,children:[parseFloat(p.summary.variance||0)<0?"-":"+",h(Math.abs(parseFloat(p.summary.variance||0)))]}),e.jsxs("td",{className:`p-3 font-mono font-black text-xl border border-slate-300 dark:border-white/10 ${parseFloat(p.summary.variance||0)<0?"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20":"text-emerald-600 bg-emerald-50 dark:text-emerald-400 dark:bg-emerald-900/20"}`,children:[parseFloat(p.summary.variance||0)<0?"-":"+",h(Math.abs(parseFloat(p.summary.variance||0)/3.78541))]}),e.jsx("td",{colSpan:"2",className:"p-3 border border-slate-300 dark:border-white/10"})]})]})]})})}):null:e.jsx("div",{className:"text-center py-12 text-slate-400",children:e.jsx(o,{children:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø¨ÙŠØ± Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})})]})})}function Be({stationId:z}){const[D,w]=k.useState(!1),[u,E]=k.useState([]),[t,P]=k.useState(null),[p,f]=k.useState({supplier_id:"",period:"month",start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]});k.useEffect(()=>{Q()},[]);const Q=async()=>{try{const i=await(await fetch(`${window.BASE_URL}/reports?action=get_sources&type=supplier`)).json();i.suppliers&&E(i.suppliers)}catch(l){console.error("Failed to fetch suppliers",l)}},v=async()=>{if(p.supplier_id){w(!0);try{const l=new URLSearchParams({action:"get_supplier_report",station_id:z,...p}).toString(),F=await(await fetch(`${window.BASE_URL}/reports?${l}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();F.success?P(F.data):I.error(F.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(l){console.error(l),I.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}finally{w(!1)}}};k.useEffect(()=>{p.supplier_id&&v()},[p.supplier_id,p.period,p.start_date,p.end_date]);const j=l=>{const i=new Date;let F=new Date;const $=new Date;l==="day"||(l==="week"?F.setDate(i.getDate()-7):l==="month"?F.setDate(1):l==="year"&&F.setMonth(0,1)),f(a=>({...a,period:l,start_date:F.toISOString().split("T")[0],end_date:$.toISOString().split("T")[0]}))},g=l=>h(l)+" SDG",h=l=>parseFloat(l||0).toLocaleString("en-US"),A=[{id:"day",label:"Ø§Ù„ÙŠÙˆÙ…"},{id:"week",label:"Ø£Ø³Ø¨ÙˆØ¹"},{id:"month",label:"Ø´Ù‡Ø±"},{id:"year",label:"Ø³Ù†Ø©"},{id:"custom",label:"Ù…Ø®ØµØµ"}];return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-10",children:[e.jsxs(y,{className:"bg-white/80 backdrop-blur-md p-4 shadow-sm rounded-2xl border border-slate-100/50 sticky top-0 z-20 dark:bg-white/5 dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsx("div",{className:"flex flex-wrap items-center gap-2 justify-center md:justify-start w-full md:w-auto order-2 md:order-1",children:e.jsx("div",{className:"bg-slate-100 p-1 rounded-xl flex gap-1 dark:bg-slate-800",children:A.map(l=>e.jsx("button",{onClick:()=>j(l.id),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-all duration-300 ${p.period===l.id?"bg-white text-blue-600 shadow-sm scale-105 dark:bg-blue-600 dark:text-white":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/50 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:bg-slate-700"}`,children:l.label},l.id))})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto order-1 md:order-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-500 rounded-xl text-white shadow-lg shadow-cyan-200",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"font-bold text-lg whitespace-nowrap",children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨ Ù…ÙˆØ±Ø¯"})]}),e.jsxs("div",{className:"w-full md:w-64 relative",children:[e.jsx(je,{className:"w-4 h-4 text-slate-400 absolute right-3 top-3 pointer-events-none"}),e.jsxs("select",{value:p.supplier_id,onChange:l=>f(i=>({...i,supplier_id:l.target.value})),className:"w-full h-10 pr-9 pl-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none appearance-none dark:bg-slate-800 dark:border-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ±Ø¯..."}),u.map(l=>e.jsx("option",{value:String(l.id),children:l.name},l.id))]})]})]})]}),e.jsx(fe,{children:p.period==="custom"&&e.jsx(X.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 flex items-center justify-start gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 ml-2",children:"Ù…Ù† ØªØ§Ø±ÙŠØ®"}),e.jsx("input",{type:"date",value:p.start_date,onChange:l=>f(i=>({...i,start_date:l.target.value})),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2 outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsx("div",{className:"flex items-center self-end pb-2",children:e.jsx("span",{className:"text-slate-300",children:"-----"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 ml-2",children:"Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®"}),e.jsx("input",{type:"date",value:p.end_date,onChange:l=>f(i=>({...i,end_date:l.target.value})),className:"bg-slate-50 border border-slate-200 text-slate-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2 outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]})})})]}),p.supplier_id?!t&&D?e.jsxs("div",{className:"text-center py-24",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-4 shadow-xl shadow-blue-200"}),e.jsx(o,{className:"text-blue-600 font-bold animate-pulse",children:"Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª..."})]}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1},children:e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white hover:shadow-lg transition-shadow dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª (Ù„Ù†Ø§)"}),e.jsx(q,{className:"mt-2 text-emerald-600 drop-shadow-sm dark:text-emerald-400",children:g(t.totals.total_paid)})]})}),e.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white hover:shadow-lg transition-shadow dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsx(q,{className:"mt-2 text-blue-600 drop-shadow-sm dark:text-blue-400",children:g(t.totals.total_purchased)})]})}),e.jsx(X.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:e.jsxs(y,{decoration:"top",decorationColor:t.totals.net_balance>0?"rose":"teal",className:"bg-white hover:shadow-lg transition-shadow dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"ØµØ§ÙÙŠ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ"}),e.jsx(q,{className:`mt-2 ${t.totals.net_balance>0?"text-rose-600 dark:text-rose-400":"text-teal-600 dark:text-teal-400"} drop-shadow-sm`,children:g(t.totals.net_balance)}),e.jsx(o,{className:"text-xs text-slate-400 mt-1",children:t.totals.net_balance>0?"Ù…Ø¨Ù„Øº Ù…Ø³ØªØ­Ù‚ Ù„Ù„Ù…ÙˆØ±Ø¯":"ÙØ§Ø¦Ø¶ Ù…Ø¯ÙÙˆØ¹"})]})})]}),e.jsx(y,{className:"px-0 py-0 overflow-hidden bg-white shadow-lg rounded-2xl border border-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:e.jsxs("div",{className:"overflow-x-auto min-h-[400px]",children:[D&&e.jsx("div",{className:"absolute inset-0 bg-white/50 backdrop-blur-[1px] z-10 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full"})}),e.jsxs("table",{className:"w-full text-right text-base",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-600 font-bold border-b border-slate-200 dark:bg-white/5 dark:text-slate-400 dark:border-white/10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø¨ÙŠØ§Ù†"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ØªØµÙ†ÙŠÙ"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-emerald-600",children:"Ø§Ù„Ù…Ø¨Ù„Øº (Ø§Ù„Ù…ÙˆØ±Ø¯)"}),e.jsx("th",{className:"p-4 whitespace-nowrap text-blue-600",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ø´Ø±Ø§Ø¡"}),e.jsx("th",{className:"p-4 whitespace-nowrap",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (ØªØ±Ø§ÙƒÙ…ÙŠ)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/10",children:e.jsx(fe,{mode:"wait",children:t.transactions.length>0?t.transactions.map((l,i)=>e.jsxs(X.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.98},transition:{delay:i*.02},className:"hover:bg-blue-50/50 transition-colors group dark:hover:bg-white/5",children:[e.jsx("td",{className:"p-4 whitespace-nowrap text-slate-500 font-mono text-sm dark:text-slate-400",children:l.date}),e.jsxs("td",{className:"p-4",children:[e.jsx("div",{className:"font-bold text-slate-800 text-lg dark:text-white",children:l.statement_title}),e.jsx("div",{className:"text-sm text-slate-400 group-hover:text-slate-500 dark:text-slate-500 dark:group-hover:text-slate-400",children:l.statement_subtitle})]}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-sm font-bold inline-flex items-center gap-1 ${l.type==="purchase"?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-700"}`,children:[l.type==="purchase"?e.jsx(De,{className:"w-4 h-4"}):e.jsx($e,{className:"w-4 h-4"}),l.category]})}),e.jsx("td",{className:"p-4 font-mono text-lg text-slate-600 dark:text-slate-300",children:l.quantity?h(l.quantity):"-"}),e.jsx("td",{className:"p-4 font-mono text-slate-400 text-sm dark:text-slate-500",children:l.price?h(l.price):"-"}),e.jsx("td",{className:"p-4 font-mono font-bold text-lg text-emerald-600 dark:text-emerald-400",children:l.amount_paid?h(l.amount_paid):"-"}),e.jsx("td",{className:"p-4 font-mono font-bold text-lg text-blue-600 dark:text-blue-400",children:l.purchase_value?h(l.purchase_value):"-"}),e.jsx("td",{className:"p-4 font-bold text-lg",dir:"ltr",children:e.jsx("span",{className:l.running_balance>=0?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:h(l.running_balance)})})]},i)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-12 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})})})}),e.jsx("tfoot",{className:"bg-slate-900 text-white font-bold border-t-2 border-slate-700",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-4 text-left",children:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ§Øª Ø§Ù„ÙƒÙ„ÙŠØ©:"}),e.jsx("td",{className:"p-4 text-emerald-400",children:h(t.totals.total_paid)}),e.jsx("td",{className:"p-4 text-blue-400",children:h(t.totals.total_purchased)}),e.jsx("td",{className:"p-4",dir:"ltr",children:e.jsx("span",{className:t.totals.net_balance>=0?"text-emerald-400":"text-rose-400",children:h(t.totals.net_balance)})})]})})]})]})}),t.transactions.length>0&&e.jsxs("div",{className:"grid grid-cols-3 gap-1 bg-slate-900 text-white font-bold p-4 rounded-xl mt-4 border-t-2 border-slate-700 dark:bg-white/5 dark:border-white/10 dark:text-slate-200 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Ø§Ù„Ù…Ø¯ÙÙˆØ¹"}),e.jsx("div",{className:"text-emerald-400",children:h(t.totals.total_paid)})]}),e.jsxs("div",{className:"text-center border-r border-slate-700 dark:border-white/10",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Ù…Ø´ØªØ±ÙŠØ§Øª"}),e.jsx("div",{className:"text-blue-400",children:h(t.totals.total_purchased)})]}),e.jsxs("div",{className:"text-center border-r border-slate-700 dark:border-white/10",children:[e.jsx("div",{className:"text-slate-400 text-xs mb-1",children:"Ø§Ù„Ø±ØµÙŠØ¯"}),e.jsx("div",{dir:"ltr",className:t.totals.net_balance>=0?"text-emerald-400":"text-rose-400",children:h(t.totals.net_balance)})]})]})]}):null:e.jsxs(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-24 bg-white rounded-3xl border border-slate-100 shadow-sm dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10",children:[e.jsx(je,{className:"w-20 h-20 text-slate-200 mx-auto mb-4 dark:text-slate-600"}),e.jsx(T,{className:"text-slate-700 text-xl font-bold dark:text-white",children:"Ø­Ø¯Ø¯ Ø§Ù„Ù…ÙˆØ±Ø¯ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"}),e.jsx(o,{className:"text-slate-400",children:"ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡"})]})]})}function qe({initialGroup:z}){const D=new Date;new Date(D.getFullYear(),D.getMonth(),1).toLocaleDateString("en-CA"),D.toLocaleDateString("en-CA");const[w,u]=k.useState({source_type:"safe",source_id:"",start_date:null,end_date:null,group_sales:z||"none"}),[E,t]=k.useState("month"),[P,p]=k.useState({safes:[],banks:[]}),[f,Q]=k.useState(null),[v,j]=k.useState(!1);k.useEffect(()=>{g()},[]),k.useEffect(()=>{if(w.source_id){if(w.start_date>w.end_date){I.warning("ØªÙ… ØªØµØ­ÙŠØ­ Ø§Ù„ØªØ§Ø±ÙŠØ®: ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©"),u(a=>({...a,start_date:a.end_date,end_date:a.start_date}));return}h()}},[w.source_id,w.source_type,w.start_date,w.end_date,w.group_sales]);const g=async()=>{try{const r=await(await fetch(`${window.BASE_URL||""}/reports?action=get_sources`)).json();r.success&&(p({safes:r.safes||[],banks:r.banks||[]}),w.source_id||(r.safes&&r.safes.length>0?u(d=>({...d,source_type:"safe",source_id:r.safes[0].id})):r.banks&&r.banks.length>0&&u(d=>({...d,source_type:"bank",source_id:r.banks[0].id}))))}catch(a){console.error("Failed to fetch sources:",a),I.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª")}},h=async()=>{if(w.source_id){j(!0);try{const a=new URLSearchParams({id:w.source_id,start_date:w.start_date,end_date:w.end_date}),r=w.source_type==="safe"?`${window.BASE_URL||""}/finance/getSafeDetails?${a.toString()}`:`${window.BASE_URL||""}/finance/getBankDetails?${a.toString()}`,d=await fetch(r);if(!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const c=await d.json();if(c.success){let m=c.transactions||[];if(w.group_sales==="fuel_type"){const n={},N=[];m.forEach(x=>{let _=x.fuel_name;!_&&x.description&&(x.description.includes("Ø¬Ø§Ø²")||x.description.toLowerCase().includes("diesel")?_="Ø¬Ø§Ø²":(x.description.includes("Ø¨Ù†Ø²ÙŠÙ†")||x.description.toLowerCase().includes("benzene"))&&(_="Ø¨Ù†Ø²ÙŠÙ†"));const L=(x.description||"").toLowerCase(),B=(x.category_name||"").toLowerCase(),G=(x.tank_name||"").toLowerCase();_||(L.includes("Ø¬Ø§Ø²")||L.includes("diesel")||B.includes("Ø¬Ø§Ø²")||B.includes("diesel")||G.includes("Ø¬Ø§Ø²")||G.includes("diesel")?_="Ø¬Ø§Ø²":(L.includes("Ø¨Ù†Ø²ÙŠÙ†")||L.includes("benzene")||B.includes("Ø¨Ù†Ø²ÙŠÙ†")||B.includes("benzene")||G.includes("Ø¨Ù†Ø²ÙŠÙ†")||G.includes("benzene"))&&(_="Ø¨Ù†Ø²ÙŠÙ†"));const H=["sales","sale"].includes(x.related_entity_type)||B.includes("Ù…Ø¨ÙŠØ¹Ø§Øª")||L.includes("Ù…Ø¨ÙŠØ¹Ø§Øª")||L.includes("Ù…Ø­Ø±ÙˆÙ‚Ø§Øª")||L.includes("Ø¹Ù…Ù„ÙŠØ©")||L.includes("sale")||L.includes("fuel");if(H&&!_&&(_="ÙˆÙ‚ÙˆØ¯ (ØºÙŠØ± Ù…Ø­Ø¯Ø¯)"),H&&_){const Y=`${x.created_at?x.created_at.split(" ")[0]:x.date}_${_}`;n[Y]||(n[Y]={...x,id:`group_${Math.random()}`,description:`Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¨ÙŠØ¹Ø§Øª ${_}`,fuel_name:_,original_amount:0,amount:0,user_name:"-",created_at:x.created_at||x.date}),n[Y].amount=(parseFloat(n[Y].amount)+parseFloat(x.amount)).toString()}else N.push(x)}),m=[...Object.values(n),...N].sort((x,_)=>{const L=x.id.toString().startsWith("group_"),B=_.id.toString().startsWith("group_");if(L&&B)return parseFloat(_.amount)-parseFloat(x.amount);if(L)return-1;if(B)return 1;const G=x.created_at||x.date,H=_.created_at||_.date;return new Date(H)-new Date(G)})}const S=m.map(n=>{const N=n.to_type===w.source_type&&n.to_id==w.source_id;return{date:n.created_at?n.created_at.split(" ")[0]:n.date,id:n.id,type:n.type,category:n.category_name||"Ø¹Ø§Ù…",description:n.description,user_name:n.user_name||null,beneficiary:n.beneficiary_name||null,fuel_name:n.fuel_name||null,amount_in:N?parseFloat(n.amount):0,amount_out:N?0:parseFloat(n.amount),balance:0,is_sale:n.related_entity_type==="sales"}});let b=0;S.forEach(n=>{b+=n.amount_in,b-=n.amount_out,n.balance=b}),Q({success:!0,summary:{opening_balance:0,closing_balance:b,total_sales:0,total_other_income:0,total_expenses:0,total_transfers_in:0,total_transfers_out:0},movements:S})}else I.error(c.message||"ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±")}catch(a){console.error("Fetch error:",a),I.error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${a.message}`)}finally{j(!1)}}},A=(a,r)=>{var d,c;if(a==="source_type"){const m=r==="safe"?((d=P.safes[0])==null?void 0:d.id)||"":((c=P.banks[0])==null?void 0:c.id)||"";u(S=>({...S,source_type:r,source_id:m}))}else u(m=>({...m,[a]:r}))};k.useEffect(()=>{(async()=>{try{const d=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();if(d.success){const c=d.date,[m,S,b]=c.split("-"),n=`${m}-${S}-01`;u(N=>({...N,start_date:n,end_date:c}))}}catch{console.warn("Using client date fallback");const d=new Date,c=d.toLocaleDateString("en-CA"),m=new Date(d.getFullYear(),d.getMonth(),1).toLocaleDateString("en-CA");u(S=>({...S,start_date:m,end_date:c}))}})()},[]);const l=async a=>{t(a);let r;try{const x=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();x.success&&(r=x.date)}catch{console.warn("Server date fetch failed")}const d=r||new Date().toISOString().split("T")[0],[c,m,S]=d.split("-");let b,n;switch(a){case"today":b=n=d;break;case"week":const N=new Date(d);N.setDate(N.getDate()-6),b=N.toISOString().split("T")[0],n=d;break;case"month":b=`${c}-${m}-01`,n=d;break;case"quarter":const x=Math.floor((parseInt(m)+2)/3),_=String((x-1)*3+1).padStart(2,"0");b=`${c}-${_}-01`,n=d;break;case"year":b=`${c}-01-01`,n=d;break;case"all":b="2024-01-01",n=d;break;case"custom":return}a!=="custom"&&u(N=>({...N,start_date:b,end_date:n}))},i=()=>w.source_type==="safe"?P.safes:P.banks,F=a=>parseFloat(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})+" SDG",$=a=>a?parseFloat(a).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"0";return e.jsxs("div",{className:"space-y-6 w-full",children:[e.jsxs(X.div,{className:"bg-white p-6 rounded-2xl border border-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 dark:text-white",children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("select",{value:w.source_type,onChange:a=>A("source_type",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white",children:[e.jsx("option",{value:"safe",children:"Ø®Ø²Ù†Ø©"}),e.jsx("option",{value:"bank",children:"Ø¨Ù†Ùƒ"})]})]}),e.jsxs("div",{className:"md:col-span-3 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("select",{value:w.source_id,onChange:a=>A("source_id",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white",children:[e.jsx("option",{value:"",children:"-- Ø§Ø®ØªØ± --"}),i().map(a=>e.jsxs("option",{value:a.id,children:[a.name," (",F(a.balance),")"]},a.id))]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"}),e.jsxs("select",{value:w.group_sales,onChange:a=>A("group_sales",a.target.value),className:"w-full h-10 px-3 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white",children:[e.jsx("option",{value:"none",children:"ØªÙØµÙŠÙ„ÙŠ (Ø¨Ø¯ÙˆÙ† ØªØ¬Ù…ÙŠØ¹)"}),e.jsx("option",{value:"fuel_type",children:"Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"})]})]}),e.jsxs("div",{className:"md:col-span-5 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Ø§Ù„ÙØªØ±Ø©"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("today"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${E==="today"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-slate-50 text-slate-700 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:"Ø§Ù„ÙŠÙˆÙ…"}),e.jsx("button",{onClick:()=>l("week"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${E==="week"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-slate-50 text-slate-700 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:"Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"}),e.jsx("button",{onClick:()=>l("month"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${E==="month"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-slate-50 text-slate-700 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:"Ø§Ù„Ø´Ù‡Ø±"}),e.jsx("button",{onClick:()=>l("custom"),className:`flex-1 h-10 px-2 rounded-lg text-xs font-bold transition-all ${E==="custom"?"bg-blue-600 text-white shadow-md shadow-blue-200 dark:shadow-none":"bg-slate-50 text-slate-700 hover:bg-slate-100 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700"}`,children:"Ù…Ø®ØµØµ"})]})]}),E==="custom"&&e.jsxs("div",{className:"md:col-span-12 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø§Ù„Ù…Ø®ØµØµØ©"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:w.start_date,onChange:a=>A("start_date",a.target.value),className:"w-full h-[46px] px-4 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"}),e.jsx("span",{className:"text-slate-400 font-bold dark:text-slate-500",children:"Ø¥Ù„Ù‰"}),e.jsx("input",{type:"date",value:w.end_date,onChange:a=>A("end_date",a.target.value),className:"w-full h-[46px] px-4 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-700 focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 transition-all outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]})]})]})]}),v&&e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto dark:border-white/10 dark:border-t-blue-400"}),e.jsx("p",{className:"text-slate-500 mt-4 dark:text-slate-400",children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„..."})]}),!v&&f&&f.movements&&e.jsxs(X.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"p-5 border-b border-slate-50 dark:border-white/10",children:[e.jsx("h3",{className:"font-bold text-base text-slate-800 dark:text-white",children:"ÙƒØ´Ù Ø§Ù„Ø­Ø³Ø§Ø¨"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1 dark:text-slate-400",children:["Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª: ",f.movements.length]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs font-medium dark:bg-white/5 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx("th",{className:"p-4 text-right",children:"Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"p-4 text-right",children:"Ø§Ù„Ù…Ø³ØªÙÙŠØ¯"}),e.jsx("th",{className:"p-4 text-left text-emerald-600",children:"ÙˆØ§Ø±Ø¯"}),e.jsx("th",{className:"p-4 text-left text-rose-600",children:"Ù…Ù†ØµØ±Ù"}),e.jsx("th",{className:"p-4 text-left",children:"Ø§Ù„Ø§Ø¬Ù…Ø§Ù„ÙŠ"})]})}),e.jsx("tbody",{children:f.movements.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-8 text-center text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})}):f.movements.map((a,r)=>e.jsxs("tr",{className:`border-b border-slate-50 transition-colors dark:border-white/10 ${a.id.toString().startsWith("group_")?"bg-blue-50/80 hover:bg-blue-100/80 dark:bg-blue-900/20 dark:hover:bg-blue-900/30":"hover:bg-slate-50/50 dark:hover:bg-white/5"}`,children:[e.jsx("td",{className:"p-4 text-slate-500 font-mono text-sm dark:text-slate-300",children:a.date}),e.jsxs("td",{className:"p-4 font-medium text-slate-700 dark:text-white",children:[e.jsx("div",{children:a.description}),a.user_name&&e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["Ø¨ÙˆØ§Ø³Ø·Ø©: ",a.user_name]})]}),e.jsx("td",{className:"p-4 text-slate-600 text-sm dark:text-slate-300",children:a.fuel_name?e.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded-lg text-xs font-bold dark:bg-blue-500/20 dark:text-blue-300",children:a.fuel_name}):"-"}),e.jsx("td",{className:"p-4 text-slate-600 text-sm dark:text-slate-300",children:a.user_name||"-"}),e.jsx("td",{className:"p-4 text-slate-600 text-sm dark:text-slate-300",children:a.beneficiary||"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-emerald-600 dark:text-emerald-400",dir:"ltr",children:a.amount_in>0?$(a.amount_in):"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-rose-600 dark:text-rose-400",dir:"ltr",children:a.amount_out>0?$(a.amount_out):"-"}),e.jsx("td",{className:"p-4 text-left font-mono font-bold text-slate-700 dark:text-slate-300",dir:"ltr",children:$(a.balance)})]},r))}),f.movements.length>0&&e.jsx("tfoot",{className:"bg-slate-100 font-bold text-slate-800 border-t-2 border-slate-200 dark:bg-white/5 dark:text-white dark:border-white/10",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"5",className:"p-4 text-center text-sm uppercase tracking-wider",children:"Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ"}),e.jsx("td",{className:"p-4 text-left font-mono text-emerald-700 dark:text-emerald-400",dir:"ltr",children:$(f.movements.reduce((a,r)=>a+(parseFloat(r.amount_in)||0),0))}),e.jsx("td",{className:"p-4 text-left font-mono text-rose-700 dark:text-rose-400",dir:"ltr",children:$(f.movements.reduce((a,r)=>a+(parseFloat(r.amount_out)||0),0))}),e.jsx("td",{className:"p-4 text-left font-mono text-blue-700 dark:text-blue-400",dir:"ltr",children:$(f.movements[f.movements.length-1].balance)})]})})]})})]}),!f&&!v&&e.jsxs("div",{className:"bg-white rounded-2xl p-12 text-center border border-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10",children:[e.jsx(ye,{className:"w-12 h-12 text-slate-300 mx-auto mb-4 dark:text-slate-600"}),e.jsx("p",{className:"text-slate-400 font-medium",children:"Ø§Ø®ØªØ± Ø­Ø³Ø§Ø¨Ø§Ù‹ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"})]})]})}function Me({user:z}){const[D,w]=k.useState(0);k.useEffect(()=>{const r=new URLSearchParams(window.location.search),d=r.get("tab"),c=r.get("subtab");d==="sales"?w(2):d==="financial"?(w(0),c==="statement"&&h(1)):d==="warehouse"&&w(1)},[]);const[u,E]=k.useState({station_id:(z==null?void 0:z.station_id)||"all",start_date:null,end_date:null,period:"month"}),[t,P]=k.useState(null),[p,f]=k.useState(!1),Q=async()=>{var r;f(!0);try{const d=new URLSearchParams({action:"get_stats",...u}).toString(),m=await(await fetch(`${window.BASE_URL||""}/reports?${d}`,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();m.success?(console.log("ğŸ“Š Reports Data:",m),console.log("ğŸ“¦ Warehouse Readings:",(r=m==null?void 0:m.warehouse)==null?void 0:r.readings),P(m)):I.error("ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª")}catch(d){console.error(d),I.error("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„")}finally{f(!1)}};k.useEffect(()=>{(async()=>{try{const c=await(await fetch(`${window.BASE_URL||""}/api/server-time`)).json();if(c.success){const m=c.date,[S,b,n]=m.split("-"),N=`${S}-${b}-01`;E(x=>({...x,start_date:N,end_date:m}))}}catch{console.warn("Failed to get server date, using client date");const c=new Date;E(m=>({...m,start_date:new Date(c.getFullYear(),c.getMonth(),1).toISOString().split("T")[0],end_date:c.toISOString().split("T")[0]}))}})()},[]),k.useEffect(()=>{u.start_date&&u.end_date&&Q()},[u.start_date,u.end_date]);const v=r=>parseFloat(r||0).toLocaleString("en-US",{style:"currency",currency:"USD"}).replace("$","")+" SDG",j=r=>parseFloat(r||0).toLocaleString("en-US"),[g,h]=k.useState(0),A=()=>{var r,d,c,m,S,b,n,N,x,_,L,B,G,H,Z,Y,se,ae,re,s,U,M,O,K,V,de,ee,C,ce,xe,he,me,be,ue;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100/50 rounded-xl w-fit dark:bg-white/5",children:[e.jsx("button",{onClick:()=>h(0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${g===0?"bg-white shadow text-blue-700 dark:bg-blue-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white"}`,children:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"}),e.jsx("button",{onClick:()=>h(1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${g===1?"bg-white shadow text-blue-700 dark:bg-blue-600 dark:text-white":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-white"}`,children:"ÙƒØ´Ù Ø­Ø³Ø§Ø¨ (Ø®Ø²Ù†Ø©/Ø¨Ù†Ùƒ)"})]}),g===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(J,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-emerald-100 text-emerald-600 rounded-xl dark:bg-emerald-500/20 dark:text-emerald-400",children:e.jsx(Ne,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(o,{className:"dark:text-slate-400",children:"ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ / Ø§Ù„Ø®Ø³Ø§Ø±Ø©"}),e.jsx(q,{className:((r=t==null?void 0:t.financial)==null?void 0:r.net_profit)>=0?"text-emerald-700 dark:text-emerald-400":"text-rose-600 dark:text-rose-400",children:v((d=t==null?void 0:t.financial)==null?void 0:d.net_profit)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 grid grid-cols-2 gap-4 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-xs dark:text-slate-400",children:"Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª"}),e.jsx("div",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:v((c=t==null?void 0:t.financial)==null?void 0:c.income)})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-xs dark:text-slate-400",children:"Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª"}),e.jsx("div",{className:"font-bold text-rose-600 dark:text-rose-400",children:v((m=t==null?void 0:t.financial)==null?void 0:m.expense)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"indigo",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(J,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-indigo-100 text-indigo-600 rounded-xl dark:bg-indigo-500/20 dark:text-indigo-400",children:e.jsx(Fe,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø¯ Ø§Ù„Ù…ØªØ§Ø­"}),e.jsx(q,{className:"text-indigo-700 dark:text-indigo-400",children:v((S=t==null?void 0:t.financial)==null?void 0:S.total_cash)})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 grid grid-cols-2 gap-4 dark:border-white/10",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"text-xs dark:text-slate-400",children:["Ø§Ù„Ø®Ø²Ø§Ø¦Ù† (",((n=(b=t==null?void 0:t.financial)==null?void 0:b.safes)==null?void 0:n.length)||0,")"]}),e.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:v((N=t==null?void 0:t.financial)==null?void 0:N.total_safes)})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"text-xs dark:text-slate-400",children:["Ø§Ù„Ø¨Ù†ÙˆÙƒ (",((_=(x=t==null?void 0:t.financial)==null?void 0:x.banks)==null?void 0:_.length)||0,")"]}),e.jsx("div",{className:"font-bold text-indigo-600 dark:text-indigo-400",children:v((L=t==null?void 0:t.financial)==null?void 0:L.total_banks)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(J,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-blue-100 text-blue-600 rounded-xl dark:bg-blue-500/20 dark:text-blue-400",children:e.jsx(ie,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù„Ø­Ø¸ÙŠ"}),e.jsx(q,{className:"dark:text-white",children:v((B=t==null?void 0:t.financial)==null?void 0:B.inventory_value)})]})]}),e.jsx(o,{className:"mt-2 text-slate-400 text-xs",children:"Ù…Ø¬Ù…ÙˆØ¹ (Ø­Ø¬Ù… Ø§Ù„Ø®Ø²Ø§Ù† Ã— Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ)"})]}),e.jsxs(y,{decoration:"top",decorationColor:"amber",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs(J,{justifyContent:"start",className:"space-x-4 space-x-reverse",children:[e.jsx("div",{className:"p-3 bg-amber-100 text-amber-600 rounded-xl dark:bg-amber-500/20 dark:text-amber-400",children:e.jsx(we,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø§Ù„Ø°Ù…Ù… ÙˆØ§Ù„Ø¯ÙŠÙˆÙ†"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700 dark:text-white",children:"Ù…Ù„Ø®Øµ Ø§Ù„Ø£Ø±ØµØ¯Ø©"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs(J,{className:"justify-between",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø¯ÙŠÙˆÙ† Ø§Ù„Ø´Ø±ÙƒØ§Øª (Ù„Ù†Ø§)"}),e.jsx(o,{className:"font-bold text-emerald-600 dark:text-emerald-400",children:v((G=t==null?void 0:t.financial)==null?void 0:G.corporate_debts)})]}),e.jsxs(J,{className:"justify-between",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsx(o,{className:"font-bold text-rose-600 dark:text-rose-400",children:v((H=t==null?void 0:t.financial)==null?void 0:H.supplier_debts)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"text-slate-800 mb-4 dark:text-white",children:"ğŸ’° ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù†Ù‚Ø¯ÙŠØ©"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{className:"font-bold text-blue-600 mb-2 dark:text-blue-400",children:"Ø§Ù„Ø®Ø²Ø§Ø¦Ù†"}),e.jsxs("div",{className:"space-y-2",children:[(Y=(Z=t==null?void 0:t.financial)==null?void 0:Z.safes)==null?void 0:Y.map((R,W)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-50 rounded-lg dark:bg-blue-900/20",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:R.name}),e.jsx("span",{className:"font-bold text-blue-700 dark:text-blue-400",children:v(R.balance)})]},W)),(!((se=t==null?void 0:t.financial)!=null&&se.safes)||((ae=t==null?void 0:t.financial)==null?void 0:ae.safes.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø®Ø²Ø§Ø¦Ù†"})]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"font-bold text-indigo-600 mb-2 dark:text-indigo-400",children:"Ø§Ù„Ø¨Ù†ÙˆÙƒ"}),e.jsxs("div",{className:"space-y-2",children:[(s=(re=t==null?void 0:t.financial)==null?void 0:re.banks)==null?void 0:s.map((R,W)=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-indigo-50 rounded-lg dark:bg-indigo-900/20",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:R.name}),R.account_number&&e.jsxs("span",{className:"text-xs text-slate-400 mr-2",children:["(",R.account_number,")"]})]}),e.jsx("span",{className:"font-bold text-indigo-700 dark:text-indigo-400",children:v(R.balance)})]},W)),(!((U=t==null?void 0:t.financial)!=null&&U.banks)||((M=t==null?void 0:t.financial)==null?void 0:M.banks.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-2",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨Ø§Øª Ø¨Ù†ÙƒÙŠØ©"})]})]})]})]}),e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"text-slate-800 mb-4 dark:text-white",children:"ğŸ“Š ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©"}),e.jsxs("div",{className:"space-y-3",children:[(K=(O=t==null?void 0:t.financial)==null?void 0:O.expense_breakdown)==null?void 0:K.map((R,W)=>{var ge;const pe=((ge=t==null?void 0:t.financial)==null?void 0:ge.expense)>0?(R.total_amount/t.financial.expense*100).toFixed(1):0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:R.category_name}),e.jsx("span",{className:"font-bold text-rose-600 dark:text-rose-400",children:v(R.total_amount)})]}),e.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden dark:bg-slate-700",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-rose-400 to-rose-600 rounded-full transition-all duration-500",style:{width:`${pe}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[e.jsxs("span",{children:[R.transaction_count," Ø¹Ù…Ù„ÙŠØ©"]}),e.jsxs("span",{children:[pe,"%"]})]})]},W)}),(!((V=t==null?void 0:t.financial)!=null&&V.expense_breakdown)||((de=t==null?void 0:t.financial)==null?void 0:de.expense_breakdown.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…ØµØ±ÙˆÙØ§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"text-slate-800 mb-4 dark:text-white",children:"ğŸ‘¥ Ø£ÙƒØ¨Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø¯ÙŠÙ†ÙŠÙ† (Ù„Ù†Ø§)"}),e.jsxs("div",{className:"space-y-2",children:[(C=(ee=t==null?void 0:t.financial)==null?void 0:ee.top_customers)==null?void 0:C.map((R,W)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-emerald-50 rounded-lg border border-emerald-100 dark:bg-emerald-900/20 dark:border-emerald-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-emerald-500 text-white rounded-full flex items-center justify-center font-bold text-sm",children:W+1}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:R.name})]}),e.jsx("span",{className:"font-bold text-emerald-700 dark:text-emerald-400",children:v(R.balance)})]},W)),(!((ce=t==null?void 0:t.financial)!=null&&ce.top_customers)||((xe=t==null?void 0:t.financial)==null?void 0:xe.top_customers.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¯ÙŠÙˆÙ† Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡"})]})]}),e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"text-slate-800 mb-4 dark:text-white",children:"ğŸš› Ø£ÙƒØ¨Ø± Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ø§Ù„Ø¯Ø§Ø¦Ù†ÙŠÙ† (Ø¹Ù„ÙŠÙ†Ø§)"}),e.jsxs("div",{className:"space-y-2",children:[(me=(he=t==null?void 0:t.financial)==null?void 0:he.top_suppliers)==null?void 0:me.map((R,W)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-rose-50 rounded-lg border border-rose-100 dark:bg-rose-900/20 dark:border-rose-900/30",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-rose-500 text-white rounded-full flex items-center justify-center font-bold text-sm",children:W+1}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:R.name})]}),e.jsx("span",{className:"font-bold text-rose-700 dark:text-rose-400",children:v(R.balance)})]},W)),(!((be=t==null?void 0:t.financial)!=null&&be.top_suppliers)||((ue=t==null?void 0:t.financial)==null?void 0:ue.top_suppliers.length)===0)&&e.jsx("div",{className:"text-slate-400 text-sm text-center py-4",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù„Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†"})]})]})]})]}):e.jsx(qe,{initialGroup:new URLSearchParams(window.location.search).get("group")})]})},l=()=>{var r,d,c,m,S,b,n,N,x,_,L,B,G,H,Z,Y,se,ae,re;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ"}),e.jsx(q,{className:"mt-2 text-blue-700 dark:text-blue-400",children:v((r=t==null?void 0:t.financial)==null?void 0:r.inventory_value)})]}),e.jsxs(y,{decoration:"top",decorationColor:"cyan",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"Ø§Ù„ÙˆØ§Ø±Ø¯ (Ù…Ø´ØªØ±ÙŠØ§Øª) Ù„Ù„ÙØªØ±Ø©"}),e.jsxs(q,{className:"mt-2 text-cyan-700 dark:text-cyan-400",children:[j((c=(d=t==null?void 0:t.warehouse)==null?void 0:d.incoming_stock)==null?void 0:c.total_volume)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]}),e.jsxs(o,{className:"mt-2 text-xs text-slate-400",children:["Ø¨ØªÙƒÙ„ÙØ©: ",v((S=(m=t==null?void 0:t.warehouse)==null?void 0:m.incoming_stock)==null?void 0:S.total_cost)]})]}),e.jsxs(y,{decoration:"top",decorationColor:"orange",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(o,{className:"dark:text-slate-400",children:"ÙØ§Ù‚Ø¯ Ø§Ù„ØªØ¨Ø®Ø± (ØªÙ‚Ø¯ÙŠØ±ÙŠ)"}),e.jsxs(q,{className:"mt-2 text-orange-700 dark:text-orange-400",children:[j((b=t==null?void 0:t.financial)==null?void 0:b.evaporation_loss)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]}),e.jsx(o,{className:"mt-2 text-xs text-slate-400",children:"Ø­Ø³Ø¨ Ø§Ù„ØªØ¨Ø§ÙŠÙ† Ø¨ÙŠÙ† Ø§Ù„Ø£Ø±ØµØ¯Ø©"})]})]}),e.jsx(T,{className:"text-slate-700 mt-4 mb-2",children:"ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(n=t==null?void 0:t.warehouse)==null?void 0:n.tanks.map((s,U)=>{const M=s.volume/(s.capacity||1)*100,O=M<20,K=M<10,V=ee=>{const C=(ee||"").toLowerCase();return C.includes("diesel")||C.includes("Ø¯ÙŠØ²Ù„")?"from-amber-400 to-orange-500":C.includes("petrol")||C.includes("Ø¨Ù†Ø²ÙŠÙ†")||C.includes("91")||C.includes("95")?"from-emerald-400 to-teal-500":C.includes("gas")||C.includes("ØºØ§Ø²")?"from-purple-400 to-pink-500":"from-blue-400 to-indigo-500"},de=ee=>{const C=(ee||"").toLowerCase();return C.includes("diesel")||C.includes("Ø¯ÙŠØ²Ù„")?"bg-amber-50":C.includes("petrol")||C.includes("Ø¨Ù†Ø²ÙŠÙ†")||C.includes("91")||C.includes("95")?"bg-emerald-50":C.includes("gas")||C.includes("ØºØ§Ø²")?"bg-purple-50":"bg-blue-50"};return e.jsx(X.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:U*.1},children:e.jsxs(y,{className:`relative overflow-hidden group hover:shadow-xl transition-all duration-300 border-2 dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 ${K?"border-red-300 animate-pulse":O?"border-orange-300":"border-slate-200"}`,children:[e.jsx("div",{className:`absolute bottom-0 left-0 w-full transition-all duration-1000 ${de(s.fuel)}`,style:{height:`${M}%`,opacity:.4}}),(O||K)&&e.jsxs("div",{className:`absolute top-3 left-3 px-2 py-1 rounded-full text-xs font-bold flex items-center gap-1 z-20 ${K?"bg-red-500 text-white animate-bounce":"bg-orange-500 text-white"}`,children:[e.jsx(ye,{className:"w-3 h-3"}),K?"Ø­Ø±Ø¬!":"Ù…Ù†Ø®ÙØ¶"]}),e.jsxs(J,{justifyContent:"between",alignItems:"start",className:"relative z-10",children:[e.jsxs("div",{children:[e.jsx(o,{className:"font-bold text-slate-800 text-lg",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full bg-gradient-to-r ${V(s.fuel)}`}),e.jsx(o,{className:"text-xs text-slate-500",children:s.fuel})]})]}),e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-xs font-bold bg-gradient-to-r ${V(s.fuel)} text-white shadow-lg`,children:[M.toFixed(1),"%"]})]}),e.jsxs("div",{className:"mt-6 mb-4 relative z-10",children:[e.jsx("div",{className:"h-3 bg-slate-200 rounded-full overflow-hidden relative",children:e.jsx(X.div,{initial:{width:0},animate:{width:`${M}%`},transition:{duration:1,ease:"easeOut"},className:`h-full bg-gradient-to-r ${V(s.fuel)} shadow-lg`})}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1.5 font-mono",children:[e.jsx("span",{children:"0"}),e.jsxs("span",{className:"font-bold text-slate-600",children:[j(s.volume)," L"]}),e.jsx("span",{children:j(s.capacity)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4 relative z-10",children:[e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-xl border border-slate-100 dark:bg-slate-800/80 dark:border-slate-700",children:[e.jsx(o,{className:"text-xs text-slate-500 mb-1 dark:text-slate-400",children:"Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©"}),e.jsx("div",{className:"font-bold text-emerald-600",children:v(s.value)})]}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-3 rounded-xl border border-slate-100 dark:bg-slate-800/80 dark:border-slate-700",children:[e.jsx(o,{className:"text-xs text-slate-500 mb-1 dark:text-slate-400",children:"Ø¢Ø®Ø± Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"font-mono text-xs font-bold text-slate-700 dark:text-slate-300",children:s.last_calibration==="N/A"?"ØºÙŠØ± Ù…ØªÙˆÙØ±":new Date(s.last_calibration).toLocaleDateString("ar-EG",{month:"short",day:"numeric"})})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 flex justify-between items-center relative z-10 dark:border-white/10",children:[e.jsx(o,{className:"text-xs text-slate-500",children:"Ø§Ù„ØªØ¨Ø§ÙŠÙ† (Variance)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`font-mono font-bold text-sm ${s.variance<-50?"text-red-600":s.variance<0?"text-orange-600":s.variance>50?"text-blue-600":"text-emerald-600"}`,children:[s.variance>0?"+":"",j(s.variance)," L"]}),Math.abs(s.variance)>50&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]})]})]})},U)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2 dark:text-white dark:border-white/10",children:"Ø³Ø¬Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯ (Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª)"}),((_=(x=(N=t==null?void 0:t.warehouse)==null?void 0:N.incoming_stock)==null?void 0:x.list)==null?void 0:_.length)>0?e.jsx("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10 dark:bg-white/5 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…ÙˆØ±Ø¯"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/10",children:t.warehouse.incoming_stock.list.map((s,U)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"p-3 whitespace-nowrap dark:text-slate-300",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"p-3 font-bold dark:text-white",children:s.supplier_name}),e.jsx("td",{className:"p-3 text-xs dark:text-slate-400",children:s.tank_name}),e.jsx("td",{className:"p-3 font-mono text-blue-600 dark:text-blue-400",children:j(s.volume_received)})]},U))})]})}):e.jsx(o,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª ÙˆØ§Ø±Ø¯Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]}),e.jsxs(y,{className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2 dark:text-white dark:border-white/10",children:"Ø³Ø¬Ù„ Ù‚Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø®Ø²Ø§Ù†Ø§Øª (Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø© ÙˆØ§Ù„Ù‚ÙŠØ§Ø³)"}),((B=(L=t==null?void 0:t.warehouse)==null?void 0:L.readings)==null?void 0:B.length)>0?e.jsx("div",{className:"overflow-x-auto max-h-80 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10 dark:bg-white/5 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"ÙˆÙ‚Øª Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ù…Ø´Ø±Ù Ø§Ù„ÙˆØ±Ø¯ÙŠØ©"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©"}),e.jsx("th",{className:"p-3",children:"Ø¹Ø¬Ø² ÙˆØ²ÙŠØ§Ø¯Ø©"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/10",children:t.warehouse.readings.map((s,U)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"p-3 whitespace-nowrap dark:text-slate-300",children:new Date(s.created_at).toLocaleDateString("ar-EG")}),e.jsx("td",{className:"p-3 whitespace-nowrap dark:text-slate-300 font-mono text-xs",children:new Date(s.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("td",{className:"p-3 font-bold dark:text-white",children:s.tank_name}),e.jsx("td",{className:"p-3 text-xs text-slate-600 dark:text-slate-400",children:s.user_name||"-"}),e.jsx("td",{className:"p-3 font-mono text-slate-500 dark:text-slate-400",children:s.previous_quantity?j(s.previous_quantity):"-"}),e.jsx("td",{className:"p-3 font-mono font-bold text-slate-700 dark:text-white",children:j(s.volume_liters)}),e.jsxs("td",{className:`p-3 font-mono font-bold ${parseFloat(s.variance)<0?"text-red-600 dark:text-red-400":parseFloat(s.variance)>0?"text-lime-600 dark:text-lime-400":"text-slate-400"}`,children:[parseFloat(s.variance)>0&&"+",j(s.variance)]})]},U))})]})}):e.jsx(o,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±Ø§Ø¡Ø§Øª Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]}),((G=t==null?void 0:t.warehouse)==null?void 0:G.calibration_logs)&&t.warehouse.calibration_logs.length>0&&e.jsxs(y,{className:"bg-white mt-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2 dark:text-white dark:border-white/10",children:"Ø³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"}),e.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 sticky top-0 z-10 dark:bg-white/5 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„ÙØ¹Ù„ÙŠØ©"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙØ±Ù‚"}),e.jsx("th",{className:"p-3",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/10",children:t.warehouse.calibration_logs.map((s,U)=>e.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-white/5 ${s.tank_updated?"bg-amber-50/30":""}`,children:[e.jsx("td",{className:"p-3 whitespace-nowrap text-xs dark:text-slate-300",children:new Date(s.created_at).toLocaleString("ar-EG",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"p-3 font-bold text-slate-700 dark:text-white",children:s.tank_name}),e.jsx("td",{className:"p-3 text-xs text-slate-600 dark:text-slate-400",children:s.user_name||"ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ"}),e.jsxs("td",{className:"p-3 font-mono text-blue-600 dark:text-blue-400",children:[j(s.previous_quantity)," L"]}),e.jsxs("td",{className:"p-3 font-mono text-indigo-600 font-bold dark:text-indigo-400",children:[j(s.actual_quantity)," L"]}),e.jsxs("td",{className:`p-3 font-mono font-bold ${parseFloat(s.variance)>0?"text-green-600":parseFloat(s.variance)<0?"text-red-600":"text-gray-600"}`,children:[parseFloat(s.variance)>0&&"+",j(s.variance)," L",e.jsx("span",{className:"text-xs ml-2",children:parseFloat(s.variance)>0?"(Ø²ÙŠØ§Ø¯Ø©)":parseFloat(s.variance)<0?"(Ø¹Ø¬Ø²)":"(Ù…ØªØ·Ø§Ø¨Ù‚)"})]}),e.jsx("td",{className:"p-3 text-xs text-slate-500 max-w-xs truncate",children:s.notes||"-"})]},U))})]})}),e.jsx("div",{className:"mt-3 p-3 bg-slate-50 rounded-lg text-xs text-slate-600 dark:bg-white/5 dark:text-slate-400",children:"ğŸ’¡ Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø°Ø§Øª Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ±Ø§Ø¡ ØªØ´ÙŠØ± Ø¥Ù„Ù‰ ØªØ­Ø¯ÙŠØ« Ø±ØµÙŠØ¯ Ø§Ù„Ø®Ø²Ø§Ù† Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù…Ø¹Ø§ÙŠØ±Ø©"})]}),e.jsxs(y,{className:"bg-white mt-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 pb-3 border-b border-slate-100 dark:border-white/10",children:[e.jsxs(T,{className:"text-slate-700 flex items-center gap-2 dark:text-white",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-500"}),"ØªÙ†Ø§ÙƒØ± Ø´Ø§Ø­Ù†Ø©"]}),e.jsxs(oe,{className:"bg-orange-100 text-orange-700 border-orange-200",children:[((Z=(H=t==null?void 0:t.warehouse)==null?void 0:H.pending_shipments)==null?void 0:Z.length)||0," ØªÙ†ÙƒØ± Ù…Ø¹Ù„Ù‚"]})]}),((se=(Y=t==null?void 0:t.warehouse)==null?void 0:Y.pending_shipments)==null?void 0:se.length)>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.warehouse.pending_shipments.map((s,U)=>{const M=Math.floor((new Date-new Date(s.created_at))/864e5),O=M>3;return e.jsxs(X.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:U*.05},className:`p-4 rounded-xl border-2 transition-all hover:shadow-md dark:bg-white/5 ${O?"border-red-200 bg-red-50/50 hover:border-red-300 dark:border-red-900/50 dark:bg-red-900/20":"border-orange-200 bg-orange-50/30 hover:border-orange-300 dark:border-orange-900/50 dark:bg-orange-900/20"}`,children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold ${O?"bg-red-500":"bg-orange-500"}`,children:e.jsx(ne,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-800 dark:text-white",children:["#",s.invoice_number]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:s.supplier_name})]}),O&&e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-bold rounded-full animate-pulse",children:"ØªØ£Ø®ÙŠØ±!"})]})}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Ù†ÙˆØ¹ Ø§Ù„ÙˆÙ‚ÙˆØ¯:"}),e.jsxs("span",{className:"font-bold text-slate-700 flex items-center gap-1 dark:text-slate-200",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.fuel_color||"#94a3b8"}}),s.fuel_type||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Ø§Ù„ÙƒÙ…ÙŠØ©:"}),e.jsxs("span",{className:"font-mono font-bold text-blue-600 dark:text-blue-400",children:[j(s.volume_ordered)," L"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Ø§Ù„Ø³Ø§Ø¦Ù‚:"}),e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:s.driver_name_resolved||s.driver_name||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®:"}),e.jsxs("span",{className:"font-mono text-slate-600 text-xs dark:text-slate-400",children:[new Date(s.created_at).toLocaleDateString("ar-EG"),e.jsxs("span",{className:`mr-1 ${O?"text-red-600 dark:text-red-400":"text-slate-400 dark:text-slate-500"}`,children:["(",M," ",M===1?"ÙŠÙˆÙ…":"Ø£ÙŠØ§Ù…",")"]})]})]})]}),e.jsx("div",{className:`mt-3 pt-3 border-t ${O?"border-red-200 dark:border-red-900/50":"border-orange-200 dark:border-orange-900/50"} text-center`,children:e.jsxs("span",{className:`text-xs font-bold ${O?"text-red-700":"text-orange-700"}`,children:[s.status==="ordered"&&"ğŸ“¦ ØªÙ… Ø§Ù„Ø·Ù„Ø¨",s.status==="in_transit"&&"ğŸšš ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚",s.status==="arrived"&&"âœ… ÙˆØµÙ„Øª - Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªÙØ±ÙŠØº",s.status==="offloading"&&"â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ±ÙŠØº"]})})]},U)})}):e.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-xl border-2 border-dashed border-slate-200",children:e.jsxs("div",{className:"flex flex-col items-center text-slate-400",children:[e.jsx(Le,{className:"w-16 h-16 mb-3 text-emerald-400"}),e.jsx(o,{className:"font-bold text-slate-600",children:"Ù…Ù…ØªØ§Ø²! Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªÙ†Ø§ÙƒØ± ØªÙ… ØªÙØ±ÙŠØºÙ‡Ø§"}),e.jsx(o,{className:"text-sm mt-1",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ†Ø§ÙƒØ± Ø´Ø§Ø­Ù†Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ"})]})})]}),e.jsxs(y,{className:"bg-white mt-6 dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 dark:ring-white/10",children:[e.jsx(T,{className:"mb-4 text-slate-700 border-b border-slate-100 pb-2 dark:text-white dark:border-white/10",children:"ØªÙØ§ØµÙŠÙ„ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠØ© (Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø£Ø±ØµØ¯Ø©)"}),((re=(ae=t==null?void 0:t.warehouse)==null?void 0:ae.daily_reconciliation)==null?void 0:re.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold dark:bg-white/5 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ø®Ø²Ø§Ù†"}),e.jsx("th",{className:"p-3",children:"Ø±ØµÙŠØ¯ Ø£ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø©"}),e.jsx("th",{className:"p-3 text-cyan-600",children:"ÙˆØ§Ø±Ø¯ (+)"}),e.jsx("th",{className:"p-3 text-rose-600",children:"Ù…Ù†ØµØ±Ù (-)"}),e.jsx("th",{className:"p-3 text-blue-600",children:"Ø±ØµÙŠØ¯ Ù†Ø¸Ø±ÙŠ (=)"}),e.jsx("th",{className:"p-3 text-purple-600",children:"Ø±ØµÙŠØ¯ ÙØ¹Ù„ÙŠ (Ù‚ÙŠØ§Ø³)"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙØ§Ø±Ù‚ (Variance)"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-white/10",children:t.warehouse.daily_reconciliation.map((s,U)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-white/5",children:[e.jsx("td",{className:"p-3 whitespace-nowrap dark:text-slate-300",children:s.date}),e.jsx("td",{className:"p-3 font-bold dark:text-white",children:s.tank_name}),e.jsx("td",{className:"p-3 font-mono",children:j(s.opening)}),e.jsx("td",{className:"p-3 font-mono text-cyan-600",children:j(s.in)}),e.jsx("td",{className:"p-3 font-mono text-rose-600",children:j(s.out)}),e.jsx("td",{className:"p-3 font-mono font-bold text-blue-600",children:j(s.theoretical)}),e.jsx("td",{className:"p-3 font-mono font-bold text-purple-600",children:s.actual!==null?j(s.actual):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-3",children:s.actual!==null?e.jsx("span",{className:`font-mono font-bold px-2 py-1 rounded ${s.variance<0?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:j(s.variance)}):e.jsx("span",{className:"text-slate-300",children:"-"})})]},U))})]})}):e.jsx(o,{className:"text-center py-6 text-slate-400",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø±ÙƒØ§Øª Ù…Ø®Ø²ÙˆÙ† ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})},[i,F]=k.useState(0);k.useEffect(()=>{const r=new URLSearchParams(window.location.search);r.get("tab")==="sales"&&r.get("subtab")==="tank_sales"&&F(2)},[]);const $=()=>{var r,d,c,m,S,b,n;return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100/50 rounded-xl w-fit",children:[e.jsx("button",{onClick:()=>F(0),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===0?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©"}),e.jsx("button",{onClick:()=>F(1),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===1?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ"}),e.jsx("button",{onClick:()=>F(2),className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${i===2?"bg-white shadow text-violet-700":"text-slate-500 hover:text-slate-700"}`,children:"Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø¢Ø¨Ø§Ø±"})]}),i===0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"violet",className:"bg-white",children:[e.jsx(o,{children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsx(q,{className:"mt-2 text-violet-700",children:v((r=t==null?void 0:t.sales)==null?void 0:r.total_revenue)}),e.jsxs(J,{className:"mt-4 pt-4 border-t border-slate-100",children:[e.jsx(o,{children:"Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª"}),e.jsx(o,{className:"font-bold",children:(d=t==null?void 0:t.sales)==null?void 0:d.total_transactions})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"indigo",className:"bg-white",children:[e.jsx(o,{children:"Ø§Ù„ÙƒÙ…ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©"}),e.jsxs(q,{className:"mt-2 text-indigo-700",children:[j((c=t==null?void 0:t.sales)==null?void 0:c.total_liters)," ",e.jsx("span",{className:"text-sm",children:"Ù„ØªØ±"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"bg-white",children:[e.jsx(T,{className:"mb-4",children:"ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("div",{className:"space-y-4",children:((S=(m=t==null?void 0:t.sales)==null?void 0:m.by_product)==null?void 0:S.length)>0?t.sales.by_product.map((N,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:N.color_hex||"#94a3b8"}}),e.jsx("span",{className:"font-bold text-slate-700",children:N.product_name})]}),e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"text-slate-500",children:[e.jsx("span",{className:"font-bold text-slate-800",children:j(N.total_liters)})," Ù„ØªØ±"]}),e.jsxs("div",{className:"text-slate-500 font-mono",children:[e.jsx("span",{className:"font-bold text-slate-800",children:j(N.total_revenue)})," SDG"]})]})]},x)):e.jsx("div",{className:"text-center text-slate-400 py-6",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Øª ØªÙØµÙŠÙ„ÙŠØ© Ù„Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})})]}),e.jsxs(y,{className:"bg-white",children:[e.jsx(T,{className:"mb-4",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø© (Ù…Ø¨Ø§Ø´Ø±)"}),((n=(b=t==null?void 0:t.sales)==null?void 0:b.recent_sales)==null?void 0:n.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"Ø§Ù„ÙˆÙ‚Øª"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„Ù…ÙƒÙ†Ø©"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„ÙƒÙ…ÙŠØ©"}),e.jsx("th",{className:"p-2",children:"Ø§Ù„Ù…Ø¨Ù„Øº"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:t.sales.recent_sales.map((N,x)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"p-2 whitespace-nowrap text-slate-400 text-xs",children:new Date(N.created_at).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("td",{className:"p-2 font-medium",children:[N.pump_name,e.jsx("span",{className:"block text-xs text-slate-400",children:N.fuel_type})]}),e.jsx("td",{className:"p-2 font-mono text-blue-600",children:j(N.volume_sold)}),e.jsx("td",{className:"p-2 font-mono font-bold text-emerald-600",children:j(N.total_amount)})]},x))})]})}):e.jsx("div",{className:"text-center text-slate-400 py-6",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨ÙŠØ¹Ø§Øª Ø­Ø¯ÙŠØ«Ø©"})]})]})]}):i===1?e.jsx(Te,{stationId:u.station_id}):e.jsx(Ae,{stationId:u.station_id})]})},a=()=>{var S;const r=((S=t==null?void 0:t.employees)==null?void 0:S.list)||[],d=[...r].sort((b,n)=>n.total_sales-b.total_sales)[0],c=[...r].sort((b,n)=>n.total_volume-b.total_volume)[0],m=[...r].sort((b,n)=>n.shifts_count-b.shifts_count)[0];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[r.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(y,{decoration:"top",decorationColor:"emerald",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(le,{className:"w-24 h-24 text-emerald-600"})}),e.jsx(o,{children:"Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù…Ø¨ÙŠØ¹Ø§Ù‹ (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold text-xl border-2 border-emerald-200",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:d==null?void 0:d.worker_name}),e.jsx(q,{className:"text-emerald-600 text-xl",children:v(d==null?void 0:d.total_sales)})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"blue",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(ie,{className:"w-24 h-24 text-blue-600"})}),e.jsx(o,{children:"Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ø§Ù‹ (ÙƒÙ…ÙŠØ©)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-700 font-bold text-xl border-2 border-blue-200",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:c==null?void 0:c.worker_name}),e.jsxs(q,{className:"text-blue-600 text-xl",children:[j(c==null?void 0:c.total_volume)," Ù„ØªØ±"]})]})]})]}),e.jsxs(y,{decoration:"top",decorationColor:"amber",className:"bg-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:e.jsx(we,{className:"w-24 h-24 text-amber-600"})}),e.jsx(o,{children:"Ø§Ù„Ø£ÙƒØ«Ø± Ø­Ø¶ÙˆØ±Ø§Ù‹ (ÙˆØ±Ø¯ÙŠØ§Øª)"}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-100 flex items-center justify-center text-amber-700 font-bold text-xl border-2 border-amber-200",children:"â˜…"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-800",children:m==null?void 0:m.worker_name}),e.jsxs(q,{className:"text-amber-600 text-xl",children:[m==null?void 0:m.shifts_count," ÙˆØ±Ø¯ÙŠØ©"]})]})]})]})]}),e.jsxs(y,{className:"bg-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-slate-500"}),"Ø³Ø¬Ù„ Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„Ù…Ø³ØªØ­Ù‚Ø§Øª"]}),e.jsxs(oe,{className:"bg-slate-100 text-slate-600",children:[r.length," Ù…ÙˆØ¸Ù Ù†Ø´Ø·"]})]}),r.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right text-sm border-separate border-spacing-y-2",children:[e.jsx("thead",{className:"bg-slate-50 text-slate-500 font-bold text-xs uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 rounded-r-lg",children:"Ø§Ù„Ù…ÙˆØ¸Ù"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„ÙˆØ±Ø¯ÙŠØ§Øª"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ù„ØªØ±)"}),e.jsx("th",{className:"p-3",children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Ø¥ÙŠØ±Ø§Ø¯)"}),e.jsx("th",{className:"p-3 text-emerald-600",children:"Ø§Ù„Ø­ÙˆØ§ÙØ² (+)"}),e.jsx("th",{className:"p-3 text-red-600",children:"Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª (-)"}),e.jsx("th",{className:"p-3",children:"Ù…Ø¤Ø´Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡"})]})}),e.jsx("tbody",{children:r.map((b,n)=>{const N=(c==null?void 0:c.total_volume)||1,x=b.total_volume/N*100;return e.jsxs("tr",{className:"bg-white hover:bg-slate-50 transition-shadow hover:shadow-sm group",children:[e.jsxs("td",{className:"p-3 border-y border-r border-slate-100 rounded-r-lg font-bold text-slate-700 flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 text-xs",children:b.worker_name.charAt(0)}),b.worker_name,b===d&&e.jsx("span",{className:"text-emerald-500 text-xs",children:"ğŸ‘‘"})]}),e.jsx("td",{className:"p-3 border-y border-slate-100 text-slate-500 font-mono",children:b.shifts_count}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono text-blue-600 font-medium",children:j(b.total_volume)}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono font-bold text-slate-700",children:v(b.total_sales)}),e.jsx("td",{className:"p-3 border-y border-slate-100 font-mono text-emerald-600 bg-emerald-50/50 group-hover:bg-emerald-100/50 transition-colors",children:b.bonuses>0?j(b.bonuses):"-"}),e.jsx("td",{className:"p-3 border-y border-l border-slate-100 rounded-l-lg font-mono text-red-600 bg-red-50/50 group-hover:bg-red-100/50 transition-colors",children:b.deductions>0?j(b.deductions):"-"}),e.jsx("td",{className:"p-3 border-y border-l border-slate-100",children:e.jsx("div",{className:"w-24 h-1.5 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${x}%`}})})})]},n)})})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-slate-400",children:[e.jsx(le,{className:"w-12 h-12 mb-3 text-slate-200"}),e.jsx(o,{children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØªØ±Ø©"})]})]})]})};return e.jsx("div",{className:"p-6 max-w-[1800px] mx-auto min-h-screen space-y-6",children:e.jsxs(Re,{index:D,onIndexChange:w,children:[e.jsxs(Ee,{variant:"solid",className:"bg-white/80 backdrop-blur-md p-1 rounded-2xl shadow-sm border border-slate-100 dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 dark:ring-white/10",children:[e.jsx("div",{className:"hidden md:inline-flex items-center px-3 py-1 bg-slate-100/50 rounded-lg mr-2 dark:bg-white/5 mx-2",children:e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider dark:text-slate-400",children:"ğŸ“ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ø­Ù„ÙŠØ©"})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-emerald-600 ui-selected:text-white ui-selected:shadow-md transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø§Ù„ÙŠØ©"})]})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-blue-600 ui-selected:text-white ui-selected:shadow-md transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª"})]})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-violet-600 ui-selected:text-white ui-selected:shadow-md transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª"})]})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-amber-500 ui-selected:text-white ui-selected:shadow-md transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"})," ",e.jsx("span",{children:"Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†"})]})}),e.jsx("div",{className:"hidden md:inline-block w-px h-8 bg-slate-200 mx-3 dark:bg-white/10"}),e.jsx("div",{className:"hidden md:inline-flex items-center px-3 py-1 bg-gradient-to-r from-cyan-100/50 to-blue-100/50 rounded-lg mr-2 dark:from-cyan-900/20 dark:to-blue-900/20",children:e.jsx("span",{className:"text-xs font-bold text-cyan-700 uppercase tracking-wider dark:text-cyan-400",children:"ğŸŒ ØªÙ‚Ø§Ø±ÙŠØ± Ø¹Ø§Ù…Ø©"})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-gradient-to-r ui-selected:from-cyan-600 ui-selected:to-blue-600 ui-selected:text-white ui-selected:shadow-lg transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5"})," ",e.jsx("span",{children:"ØªÙ‚Ø±ÙŠØ± Ù…ÙˆØ±Ø¯"})]})}),e.jsx(te,{className:"px-5 py-2.5 rounded-xl font-bold text-slate-500 ui-selected:bg-gradient-to-r ui-selected:from-emerald-600 ui-selected:to-green-600 ui-selected:text-white ui-selected:shadow-lg transition-all dark:text-slate-400 dark:ui-selected:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"})," ",e.jsx("span",{children:"ØªÙ‚Ø±ÙŠØ± Ø¹Ù…ÙŠÙ„"})]})})]}),e.jsxs("div",{className:"mt-8",children:[D===0&&A(),D===1&&l(),D===2&&$(),D===3&&a(),D===4&&e.jsx(Be,{stationId:u.station_id}),D===5&&e.jsx(Ue,{stationId:u.station_id})]})]})})}export{Me as default};
