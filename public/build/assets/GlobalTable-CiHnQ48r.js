import{r as b,j as e,m as G}from"./main-BZye3MWh.js";import{b as U,m as C,c as S,p as z}from"./Tracker-B3Wsk5ua.js";import{D as B}from"./download-CUXfZPiX.js";import{P as I}from"./printer-yTjQXX8F.js";import{P as T}from"./plus-CeiUBWS7.js";import{S as P}from"./search-CFPY5UOd.js";import{C as V}from"./chevron-right-DuGftnQt.js";import{C as _}from"./chevron-left-COH1Qeub.js";function A({title:k,subtitle:f,data:E=[],columns:r=[],actions:n,onAdd:g,addButtonLabel:D="إضافة جديد",searchPlaceholder:L="بحث...",filters:M,stats:j,exportName:$="export"}){const[u,F]=b.useState(""),[l,w]=b.useState(1),[v,N]=b.useState(!1),x=10,o=E.filter(s=>Object.values(s).some(t=>String(t).toLowerCase().includes(u.toLowerCase()))),i=Math.ceil(o.length/x),h=o.slice((l-1)*x,l*x),y=s=>{if(s==="csv"){const a=r.map(c=>c.header).join(","),t=o.map(c=>r.map(d=>`"${d.accessor?typeof d.accessor=="function"?d.accessor(c):c[d.accessor]:""}"`).join(",")),m=[a,...t].join(`
`),R=new Blob(["\uFEFF"+m],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(R),p=document.createElement("a");p.href=O,p.download=`${$}_${new Date().toISOString().slice(0,10)}.csv`,p.click()}else s==="print"&&window.print();N(!1)};return e.jsxs(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 print:hidden",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-2xl font-bold text-navy-900 font-cairo",children:k}),f&&e.jsx(C,{className:"text-slate-500",children:f})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!v),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:[e.jsx(B,{className:"w-4 h-4"})," تصدير"]}),v&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-32 bg-white rounded-xl shadow-lg border border-slate-100 py-2 z-50",children:[e.jsx("button",{onClick:()=>y("csv"),className:"w-full text-right px-4 py-2 hover:bg-slate-50 text-sm font-medium",children:"Excel (CSV)"}),e.jsx("button",{onClick:()=>y("print"),className:"w-full text-right px-4 py-2 hover:bg-slate-50 text-sm font-medium",children:"PDF / Print"})]})]}),e.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:[e.jsx(I,{className:"w-4 h-4"})," طباعة"]}),g&&e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-6 py-2 bg-navy-900 text-white rounded-xl font-bold hover:bg-navy-800 transition-colors shadow-lg shadow-navy-900/20",children:[e.jsx(T,{className:"w-5 h-5"})," ",D]})]})]}),j&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 print:hidden",children:j}),e.jsx(S,{className:"rounded-2xl shadow-sm ring-1 ring-slate-200 print:hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute right-3 top-3 text-slate-400 w-5 h-5"}),e.jsx(z,{placeholder:L,className:"pl-4 pr-10 py-2 rounded-xl",value:u,onChange:s=>F(s.target.value)})]}),M]})}),e.jsxs(S,{className:"rounded-2xl shadow-lg ring-1 ring-slate-200 overflow-hidden p-0 print:shadow-none print:ring-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-right",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 print:bg-white",children:e.jsxs("tr",{children:[r.map((s,a)=>e.jsx("th",{className:`p-4 text-sm font-bold text-slate-600 ${s.className||""}`,children:s.header},a)),n&&e.jsx("th",{className:"p-4 text-sm font-bold text-slate-600 text-center print:hidden",children:"إجراءات"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.length>0?h.map((s,a)=>e.jsxs("tr",{className:"hover:bg-blue-50/30 transition-colors group",children:[r.map((t,m)=>e.jsx("td",{className:`p-4 ${t.className||""}`,children:t.render?t.render(s):t.accessor?s[t.accessor]:""},m)),n&&e.jsx("td",{className:"p-4 print:hidden",children:e.jsx("div",{className:"flex justify-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:n(s)})})]},s.id||a)):e.jsx("tr",{children:e.jsx("td",{colSpan:r.length+(n?1:0),className:"p-12 text-center text-slate-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center",children:e.jsx(P,{className:"w-6 h-6 text-slate-300"})}),e.jsx("p",{children:"لا توجد نتائج مطابقة"})]})})})})]})}),e.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-between items-center bg-slate-50/50 print:hidden",children:[e.jsxs(C,{className:"text-sm text-slate-500",children:["عرض ",h.length," من أصل ",o.length," سجل"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{disabled:l===1,onClick:()=>w(s=>Math.max(1,s-1)),className:"p-2 border border-slate-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsxs("span",{className:"flex items-center px-4 font-mono font-bold text-slate-600",children:[l," / ",i||1]}),e.jsx("button",{disabled:l===i||i===0,onClick:()=>w(s=>Math.min(i,s+1)),className:"p-2 border border-slate-200 rounded-lg hover:bg-white disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(_,{className:"w-4 h-4"})})]})]})]})]})}export{A as G};
