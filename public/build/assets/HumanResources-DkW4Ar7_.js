import{j as e,m as N,ab as z,r as R,k as P,ac as H,t as g,T,h as U,ad as W,W as $,w as Y,P as _,U as B,ae as G,q as J,f as K}from"./ui-DtuMUTb1.js";import{r,R as V}from"./vendor-BdFMDtQB.js";import{D as F,g as O,c as Q,b as X,j as Z,k as ee,l as M}from"./main-D8tG-o71.js";import te from"./WorkerList-B7BwBYlv.js";const se=r.forwardRef(({employees:s=[],search:c=""},a)=>{const[t,l]=r.useState(Array.isArray(s)?s:[]);V.useEffect(()=>{l(Array.isArray(s)?s:[])},[s]);const[x,d]=r.useState(!1),[i,o]=r.useState("add"),[u,b]=r.useState(null);r.useImperativeHandle(a,()=>({openAddModal:v}));const p=t.filter(n=>{var f,w;return((f=n.name)==null?void 0:f.toLowerCase().includes(c.toLowerCase()))||((w=n.email)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))}),v=()=>{o("add"),b(null),d(!0)},S=n=>{o("edit"),b(n),d(!0)},C=n=>{i==="add"?window.location.reload():(l(f=>f.map(w=>w.id==n.id?{...w,...n}:w)),d(!1))},[E,y]=r.useState(!1),[j,m]=r.useState(null),[k,D]=r.useState(!1),L=n=>{m(n),y(!0)},A=async()=>{if(!j)return;D(!0);const n=new FormData;n.append("id",j.id);try{const w=await(await fetch("/PETRODIESEL2/public/hr/api?entity=employee&action=delete",{method:"POST",body:n})).json();w.success?(g.success("تم الحذف بنجاح"),l(I=>I.filter(q=>q.id!==j.id))):g.error(w.message||"فشل الحذف")}catch{g.error("خطأ في الاتصال")}finally{D(!1),y(!1),m(null)}},h=n=>{switch(n){case"admin":return"rose";case"super_admin":return"purple";case"manager":return"blue";default:return"slate"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{isOpen:E,onClose:()=>y(!1),onConfirm:A,title:"تحذير: حذف موظف",message:`سيتم حذف الموظف "${j==null?void 0:j.name}" ولن يتمكن من الدخول للنظام. هل أنت متأكد؟`,isDeleting:k}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(n=>e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 rounded-xl p-4 border border-slate-100 shadow-sm hover:shadow-md transition-shadow group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1 h-full bg-indigo-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-500/10 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-lg",children:n.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-900 dark:text-white",children:n.name}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),n.email]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>S(n),className:"p-1.5 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(n),className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg text-red-600 dark:text-red-400",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-4 pt-4 border-t border-slate-50 dark:border-white/5",children:[e.jsx(O,{size:"xs",color:h(n.role),icon:H,children:n.role}),e.jsxs("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:["ID: ",n.id]})]})]},n.id))}),x&&e.jsx(ae,{isOpen:x,onClose:()=>d(!1),mode:i,employee:u,onSuccess:C})]})});function ae({isOpen:s,onClose:c,mode:a,employee:t,onSuccess:l}){if(!s)return null;const x=async d=>{d.preventDefault();const i=new FormData(d.target);a==="edit"&&t&&i.append("id",t.id);let o=!1;try{const p=await(await fetch(`/PETRODIESEL2/public/hr/api?entity=employee&action=${a==="add"?"store":"update"}`,{method:"POST",body:i})).json();p.success?(g.success("تم الحفظ بنجاح"),o=!0):g.error(p.message||"حدث خطأ")}catch{g.error("خطأ في الاتصال")}o&&l({id:t==null?void 0:t.id,...t,name:i.get("name"),email:i.get("email"),role:i.get("role")})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg text-navy-900",children:a==="add"?"إضافة موظف جديد":"تعديل بيانات موظف"}),e.jsx("button",{onClick:c,className:"text-slate-400 hover:text-red-500 transition-colors",children:"×"})]}),e.jsxs("form",{onSubmit:x,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"الاسم"}),e.jsx("input",{type:"text",name:"name",required:!0,defaultValue:t==null?void 0:t.name,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"البريد الإلكتروني"}),e.jsx("input",{type:"email",name:"email",defaultValue:t==null?void 0:t.email,placeholder:"اختياري (سيتم توليده تلقائياً)",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"كلمة المرور"}),e.jsx("input",{type:"password",name:"password",required:a==="add",placeholder:a==="edit"?"اتركها فارغة لعدم التغيير":"",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"الصلاحية"}),e.jsxs("select",{name:"role",defaultValue:(t==null?void 0:t.role)||"viewer",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white",children:[e.jsx("option",{value:"viewer",children:"مشاهد (Viewer)"}),e.jsx("option",{value:"manager",children:"مدير (Manager)"}),e.jsx("option",{value:"admin",children:"مسؤول (Admin)"})]})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-2 text-sm font-bold",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-xl text-slate-600 hover:bg-slate-100 transition-colors",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-200",children:"حفظ البيانات"})]})]})]})})}const le=r.forwardRef(({drivers:s=[],search:c=""},a)=>{const[t,l]=r.useState(Array.isArray(s)?s:[]);V.useEffect(()=>{l(Array.isArray(s)?s:[])},[s]);const[x,d]=r.useState(!1),[i,o]=r.useState("add"),[u,b]=r.useState(null);r.useImperativeHandle(a,()=>({openAddModal:v}));const p=t.filter(h=>{var n,f,w;return((n=h.name)==null?void 0:n.toLowerCase().includes(c.toLowerCase()))||((f=h.phone)==null?void 0:f.includes(c))||((w=h.truck_number)==null?void 0:w.toLowerCase().includes(c.toLowerCase()))}),v=()=>{o("add"),b(null),d(!0)},S=h=>{o("edit"),b(h),d(!0)},C=h=>{i==="add"?window.location.reload():(l(n=>n.map(f=>f.id==h.id?{...f,...h}:f)),d(!1))},[E,y]=r.useState(!1),[j,m]=r.useState(null),[k,D]=r.useState(!1),L=h=>{m(h),y(!0)},A=async()=>{if(!j)return;D(!0);const h=new FormData;h.append("id",j.id);try{const f=await(await fetch("/PETRODIESEL2/public/hr/api?entity=driver&action=delete",{method:"POST",body:h})).json();f.success?(g.success("تم الحذف بنجاح"),l(w=>w.filter(I=>I.id!==j.id))):g.error(f.message||"فشل الحذف")}catch{g.error("خطأ في الاتصال")}finally{D(!1),y(!1),m(null)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(F,{isOpen:E,onClose:()=>y(!1),onConfirm:A,title:"تحذير: حذف سائق",message:`سيتم حذف السائق "${j==null?void 0:j.name}". هل أنت متأكد؟ لا يمكن التراجع عن هذا الإجراء.`,isDeleting:k}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[p.map(h=>e.jsxs(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 rounded-xl p-4 border border-slate-100 shadow-sm hover:shadow-md transition-shadow group relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-1 h-full bg-blue-500"}),e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-500/10 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold text-lg",children:h.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-navy-900 dark:text-white",children:h.name}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3"}),h.truck_number||"بدون شاحنة"]})]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>S(h),className:"p-1.5 hover:bg-slate-100 dark:hover:bg-white/10 rounded-lg text-slate-600 dark:text-slate-300",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>L(h),className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-lg text-red-600 dark:text-red-400",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm mt-4 pt-4 border-t border-slate-50 dark:border-white/5",children:[e.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:h.phone||"لا يوجد هاتف"}),e.jsx(O,{size:"xs",color:"slate",children:"سائق"})]})]},h.id)),p.length===0&&e.jsx("div",{className:"col-span-full text-center py-10 text-slate-400",children:"لا توجد نتائج"})]}),x&&e.jsx(re,{isOpen:x,onClose:()=>d(!1),mode:i,driver:u,onSuccess:C})]})});function re({isOpen:s,onClose:c,mode:a,driver:t,onSuccess:l}){if(!s)return null;const x=async d=>{d.preventDefault();const i=new FormData(d.target);a==="edit"&&t&&i.append("id",t.id);let o=!1;try{const p=await(await fetch(`/PETRODIESEL2/public/hr/api?entity=driver&action=${a==="add"?"store":"update"}`,{method:"POST",body:i})).json();p.success?(g.success(a==="add"?"تمت الإضافة بنجاح":"تم التحديث بنجاح"),o=!0):g.error(p.message||"حدث خطأ")}catch{g.error("خطأ في الاتصال")}o&&l({id:t==null?void 0:t.id,...t,name:i.get("name"),phone:i.get("phone"),truck_number:i.get("truck_number")})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 p-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-lg text-navy-900",children:a==="add"?"إضافة سائق جديد":"تعديل بيانات سائق"}),e.jsx("button",{onClick:c,className:"text-slate-400 hover:text-red-500 transition-colors",children:"×"})]}),e.jsxs("form",{onSubmit:x,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"الاسم"}),e.jsx("input",{type:"text",name:"name",required:!0,defaultValue:t==null?void 0:t.name,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"رقم الهاتف"}),e.jsx("input",{type:"text",name:"phone",defaultValue:t==null?void 0:t.phone,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"رقم الشاحنة / اللوحة"}),e.jsx("input",{type:"text",name:"truck_number",defaultValue:t==null?void 0:t.truck_number,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-2 text-sm font-bold",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-xl text-slate-600 hover:bg-slate-100 transition-colors",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-xl bg-blue-600 text-white hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200",children:"حفظ البيانات"})]})]})]})})}function ne({employees:s=[],workers:c=[],drivers:a=[],search:t=""}){const[l,x]=r.useState("sheet"),[d,i]=r.useState(new Date().getMonth()+1),[o,u]=r.useState(new Date().getFullYear()),[b,p]=r.useState(!1),[v,S]=r.useState("advance"),[C,E]=r.useState(null);r.useEffect(()=>{},[d,o]);const y=[...s.map(m=>({...m,type:"employee",typeName:"موظف"})),...c.map(m=>({...m,type:"worker",typeName:"عامل"})),...a.map(m=>({...m,type:"driver",typeName:"سائق"}))].filter(m=>m.name.toLowerCase().includes(t.toLowerCase())),j=(m,k)=>{E(m),S(k),p(!0)};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(Q,{className:"rounded-2xl shadow-sm ring-1 ring-slate-200 p-4 dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 dark:ring-white/10",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"dark:text-white",children:"كشف الرواتب"}),e.jsxs(O,{children:[y.length," موظف"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[e.jsx("select",{value:d,onChange:m=>i(m.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-700 outline-none dark:bg-white/10 dark:border-white/10 dark:text-white",children:Array.from({length:12},(m,k)=>e.jsxs("option",{value:k+1,className:"dark:bg-slate-800",children:[k+1," - ",new Date(0,k).toLocaleString("ar-EG",{month:"long"})]},k+1))}),e.jsxs("select",{value:o,onChange:m=>u(m.target.value),className:"bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm font-bold text-slate-700 outline-none dark:bg-white/10 dark:border-white/10 dark:text-white",children:[e.jsx("option",{value:"2024",className:"dark:bg-slate-800",children:"2024"}),e.jsx("option",{value:"2025",className:"dark:bg-slate-800",children:"2025"}),e.jsx("option",{value:"2026",className:"dark:bg-slate-800",children:"2026"})]})]})]})}),e.jsx("div",{className:"grid gap-4",children:y.map(m=>e.jsx(de,{staff:m,onAction:j},`${m.type}-${m.id}`))}),e.jsx(ie,{isOpen:b,onClose:()=>p(!1),type:v,entity:C})]})}function de({staff:s,onAction:c}){const[a,t]=r.useState(0),[l,x]=r.useState(!1),[d,i]=r.useState(!1);r.useEffect(()=>{(async()=>{try{const p=await(await fetch(`/PETRODIESEL2/public/hr/api?entity=payroll&action=get_salary&e_type=${s.type}&e_id=${s.id}`)).json();p.success&&t(p.amount)}catch{}})()},[s]);const o=async()=>{i(!0);try{const u=new FormData;u.append("e_type",s.type),u.append("e_id",s.id),u.append("amount",a),await fetch("/PETRODIESEL2/public/hr/api?entity=payroll&action=set_salary",{method:"POST",body:u}),x(!1),g.success("تم حفظ الراتب الأساسي")}catch{g.error("خطأ في الحفظ")}finally{i(!1)}};return e.jsx(N.div,{layout:!0,className:"bg-white rounded-xl shadow-sm border border-slate-100 p-4 transition-all hover:shadow-md dark:bg-white/5 dark:backdrop-blur-md dark:border-white/10 dark:shadow-none",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-1/4",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-white
                        ${s.type==="employee"?"bg-indigo-500":s.type==="worker"?"bg-blue-500":"bg-emerald-500"}`,children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800 dark:text-white",children:s.name}),e.jsx(O,{size:"xs",color:"slate",children:s.typeName})]})]}),e.jsxs("div",{className:"flex-1 w-full grid grid-cols-2 md:grid-cols-4 gap-4 items-center",children:[e.jsxs("div",{className:"bg-slate-50 p-2 rounded-lg border border-slate-200 dark:bg-white/5 dark:border-white/10",children:[e.jsx("div",{className:"text-xs text-slate-500 mb-1 dark:text-slate-400",children:"الراتب الأساسي"}),e.jsxs("div",{className:"flex items-center gap-2",children:[l?e.jsx("input",{type:"number",value:a,onChange:u=>t(u.target.value),className:"w-20 bg-white border border-slate-300 rounded px-1 text-sm dark:bg-slate-800 dark:border-slate-700 dark:text-white"}):e.jsx("span",{className:"font-bold font-mono dark:text-white",children:Number(a).toLocaleString()}),l?e.jsx("button",{onClick:o,disabled:d,className:"text-green-600 hover:bg-green-100 p-1 rounded",children:e.jsx(U,{className:"w-4 h-4"})}):e.jsx("button",{onClick:()=>x(!0),className:"text-slate-400 hover:text-blue-600 p-1 rounded dark:hover:text-blue-400",children:e.jsx(W,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"col-span-2 flex gap-2 justify-center",children:[e.jsxs("button",{onClick:()=>c(s,"advance"),className:"flex-1 py-2 px-3 bg-amber-50 text-amber-700 rounded-lg hover:bg-amber-100 font-bold text-sm flex justify-center items-center gap-2 dark:bg-amber-500/10 dark:text-amber-400 dark:hover:bg-amber-500/20",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"سلفة"})]}),e.jsxs("button",{onClick:()=>c(s,"deduction"),className:"flex-1 py-2 px-3 bg-red-50 text-red-700 rounded-lg hover:bg-red-100 font-bold text-sm flex justify-center items-center gap-2 dark:bg-red-500/10 dark:text-red-400 dark:hover:bg-red-500/20",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"خصم"})]}),e.jsxs("button",{onClick:()=>c(s,"bonus"),className:"flex-1 py-2 px-3 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 font-bold text-sm flex justify-center items-center gap-2 dark:bg-green-500/10 dark:text-green-400 dark:hover:bg-green-500/20",children:[e.jsx(_,{className:"w-4 h-4"}),e.jsx("span",{children:"مكافأة"})]})]}),e.jsxs("div",{className:"text-center bg-slate-800 text-white rounded-lg p-2 dark:bg-slate-900",children:[e.jsx("div",{className:"text-[10px] text-slate-400",children:"الصافي التقديري"}),e.jsx("div",{className:"font-bold font-mono text-lg",children:Number(a).toLocaleString()})]})]})]})})}function ie({isOpen:s,onClose:c,type:a,entity:t}){if(!s||!t)return null;const l={advance:"تسجيل سلفة",deduction:"تسجيل خصم / جزاء",bonus:"تسجيل مكافأة"},x={advance:"amber",deduction:"red",bonus:"green"},d=async i=>{i.preventDefault();const o=new FormData(i.target);o.append("e_type",t.type),o.append("e_id",t.id),o.append("type",a);try{const b=await(await fetch("/PETRODIESEL2/public/hr/api?entity=payroll&action=add_entry",{method:"POST",body:o})).json();b.success?(g.success("تمت العملية بنجاح"),c()):g.error(b.message||"خطأ")}catch{g.error("خطأ في الاتصال")}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden dark:bg-slate-900 dark:border dark:border-white/10",children:[e.jsxs("div",{className:`p-4 border-b border-${x[a]}-100 bg-${x[a]}-50 flex justify-between items-center dark:bg-${x[a]}-900/20 dark:border-${x[a]}-900/50`,children:[e.jsx("h3",{className:`font-bold text-lg text-${x[a]}-800 dark:text-${x[a]}-400`,children:l[a]}),e.jsx("button",{onClick:c,className:"dark:text-slate-400",children:"×"})]}),e.jsxs("form",{onSubmit:d,className:"p-4 space-y-4",children:[e.jsx("div",{className:"text-center font-bold text-slate-700 dark:text-white",children:t.name}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300",children:"المبلغ (ريال)"}),e.jsx("input",{type:"number",name:"amount",required:!0,step:"0.01",className:"w-full px-3 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none text-xl font-mono text-center dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300",children:"ملاحظات / السبب"}),e.jsx("textarea",{name:"notes",rows:"2",className:"w-full px-3 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-1 dark:text-slate-300",children:"التاريخ"}),e.jsx("input",{type:"date",name:"date",required:!0,defaultValue:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none dark:bg-slate-800 dark:border-slate-700 dark:text-white"})]}),e.jsx("button",{type:"submit",className:`w-full py-3 rounded-xl font-bold text-white shadow-lg bg-${x[a]==="amber"?"amber-500 hover:bg-amber-600":x[a]==="red"?"red-600 hover:bg-red-700":"green-600 hover:bg-green-700"}`,children:"حفظ"})]})]})})}function me(s){const{workers:c=[],employees:a=[],drivers:t=[]}=s,[l,x]=r.useState(0),[d,i]=r.useState(""),o=r.useRef(null),u=r.useRef(null),b=r.useRef(null),p=()=>{l===0&&o.current?o.current.openAddModal():l===1&&u.current?u.current.openAddModal():l===2&&b.current&&b.current.openAddModal()};return e.jsx("div",{className:"p-6 max-w-[1800px] mx-auto space-y-8 animate-fade-in dark:bg-[#0F172A] min-h-screen",children:e.jsx("div",{className:"space-y-6",children:e.jsxs(Z,{index:l,onIndexChange:x,children:[e.jsxs("div",{className:"flex flex-col xl:flex-row justify-between items-start xl:items-center gap-4",children:[e.jsxs(ee,{variant:"solid",className:"bg-white dark:bg-white/5 dark:backdrop-blur-md dark:border dark:border-white/10 p-1 rounded-2xl shadow-sm border border-slate-100 w-full xl:w-auto overflow-x-auto",children:[e.jsx(M,{className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 dark:text-slate-400 ui-selected:bg-indigo-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("span",{children:"الموظفين"})]})}),e.jsx(M,{className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 dark:text-slate-400 ui-selected:bg-blue-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:"العمال"})]})}),e.jsx(M,{className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 dark:text-slate-400 ui-selected:bg-emerald-600 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsx("span",{children:"السائقين"})]})}),e.jsx(M,{className:"px-6 py-2.5 rounded-xl font-bold text-slate-500 dark:text-slate-400 ui-selected:bg-amber-500 ui-selected:text-white ui-selected:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5"}),e.jsx("span",{children:"الرواتب"})]})})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full xl:w-auto",children:[e.jsxs("div",{className:"relative flex-1 xl:w-80",children:[e.jsx(J,{className:"absolute right-3 top-2.5 text-slate-400 w-5 h-5 dark:text-slate-500"}),e.jsx("input",{type:"text",placeholder:l===0?"بحث في الموظفين...":l===1?"بحث في العمال...":l===2?"بحث في السائقين...":"بحث في السجلات...",className:"w-full pr-10 pl-4 py-2.5 rounded-xl border border-slate-200 dark:border-white/10 dark:bg-white/5 dark:text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all shadow-sm placeholder:dark:text-slate-500",value:d,onChange:v=>i(v.target.value)})]}),l!==3&&e.jsxs("button",{onClick:p,className:`
                                        px-6 py-2.5 rounded-xl font-bold text-white shadow-lg transition-all flex items-center gap-2 whitespace-nowrap
                                        ${l===0?"bg-navy-900 hover:bg-navy-800 dark:bg-indigo-600 dark:hover:bg-indigo-700":l===1?"bg-blue-600 hover:bg-blue-700":"bg-emerald-600 hover:bg-emerald-700"}
                                    `,children:[e.jsx(_,{className:"w-5 h-5"}),e.jsxs("span",{children:["إضافة ",l===0?"موظف":l===1?"عامل":"سائق"]})]})]})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(K,{mode:"wait",children:[l===0&&e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:e.jsx(se,{ref:o,employees:a,search:d})},"employees"),l===1&&e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:e.jsx(te,{ref:u,workers:c,search:d})},"workers"),l===2&&e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:e.jsx(le,{ref:b,drivers:t,search:d})},"drivers"),l===3&&e.jsx(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},children:e.jsx(ne,{employees:a,workers:c,drivers:t,search:d})},"payroll")]})})]})})})}export{me as default};
