import{j as e,m as b,u as f,s as j,A as v,P as k,T as N,ap as w,an as y,F as p,x as C,a8 as S,W as L,g as F}from"./ui-DtuMUTb1.js";import{r as A}from"./vendor-BdFMDtQB.js";import{u as $}from"./main-D8tG-o71.js";function h({title:d,value:r,subtitle:s,icon:o,trend:a,color:i="emerald",delay:l=0}){const c={emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-500/10",icon:"text-emerald-500",border:"border-emerald-100 dark:border-emerald-500/20"},red:{text:"text-red-600 dark:text-red-400",bg:"bg-red-50 dark:bg-red-500/10",icon:"text-red-500",border:"border-red-100 dark:border-red-500/20"},blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-500/10",icon:"text-blue-500",border:"border-blue-100 dark:border-blue-500/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-500/10",icon:"text-amber-500",border:"border-amber-100 dark:border-amber-500/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-500/10",icon:"text-slate-500",border:"border-slate-100 dark:border-slate-500/20"}},t=c[i]||c.emerald;return e.jsxs(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:l,duration:.5},className:`
                relative overflow-hidden rounded-2xl p-6
                bg-white dark:bg-slate-800
                border ${t.border}
                shadow-sm hover:shadow-md transition-all duration-300
                group
            `,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:d}),e.jsx("h3",{className:`text-2xl font-bold font-mono ${t.text}`,children:r}),s&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:s})]}),e.jsx("div",{className:`p-3 rounded-xl ${t.bg} ${t.icon} group-hover:scale-110 transition-transform`,children:e.jsx(o,{className:"w-6 h-6"})})]}),a&&e.jsxs("div",{className:`mt-4 flex items-center gap-1 text-xs font-bold ${a>0?"text-emerald-500":"text-red-500"}`,children:[a>0?e.jsx(f,{className:"w-3 h-3"}):e.jsx(j,{className:"w-3 h-3"}),e.jsxs("span",{children:[Math.abs(a),"%"]}),e.jsx("span",{className:"text-slate-400 font-normal ml-1",children:"من الأمس"})]})]})}function g({type:d,current:r,capacity:s,color:o="emerald"}){const a=Math.min(100,Math.max(0,r/s*100))||0,i={emerald:{bg:"bg-emerald-500",light:"bg-emerald-400",dark:"bg-emerald-600",gradient:"from-emerald-500 to-emerald-600",text:"text-emerald-500"},blue:{bg:"bg-blue-500",light:"bg-blue-400",dark:"bg-blue-600",gradient:"from-blue-500 to-blue-600",text:"text-blue-500"},amber:{bg:"bg-amber-500",light:"bg-amber-400",dark:"bg-amber-600",gradient:"from-amber-500 to-amber-600",text:"text-amber-500"}},l=i[o]||i.emerald;return e.jsx("div",{className:"relative group perspective-1000 h-full min-h-[180px]",children:e.jsxs("div",{className:"absolute inset-0 bg-white dark:bg-slate-800 rounded-3xl shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden transition-all duration-300 transform group-hover:scale-[1.02]",children:[e.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 z-20 flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200",children:d}),e.jsxs("p",{className:"text-sm text-slate-400 font-mono mt-1",children:[parseFloat(r).toLocaleString()," / ",parseFloat(s).toLocaleString()," L"]})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${l.bg} bg-opacity-10 ${l.text}`,children:[a.toFixed(1),"%"]})]}),e.jsx("div",{className:"absolute inset-0 flex items-end justify-center",children:e.jsxs(b.div,{initial:{height:"0%"},animate:{height:`${a}%`},transition:{duration:1.5,ease:"easeOut"},className:`w-full relative ${l.bg} opacity-90`,children:[e.jsxs("div",{className:"absolute -top-4 left-0 right-0 w-[200%] h-8 flex animate-wave",children:[e.jsx("svg",{className:"w-1/2 h-full",viewBox:"0 0 1440 320",preserveAspectRatio:"none",children:e.jsx("path",{fill:"currentColor",fillOpacity:"1",d:"M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,218.7C1248,224,1344,192,1392,176L1440,160V320H1392C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320H0Z",className:l.text})}),e.jsx("svg",{className:"w-1/2 h-full",viewBox:"0 0 1440 320",preserveAspectRatio:"none",children:e.jsx("path",{fill:"currentColor",fillOpacity:"1",d:"M0,160L48,170.7C96,181,192,203,288,197.3C384,192,480,160,576,144C672,128,768,128,864,149.3C960,171,1056,213,1152,218.7C1248,224,1344,192,1392,176L1440,160V320H1392C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320H0Z",className:l.text})})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent pointer-events-none"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-white/20 pointer-events-none rounded-3xl z-10 box-border border-2 border-white/20"})]})})}function R({data:d,categories:r,safes:s,banks:o,suppliers:a,customers:i}){const[l,c]=A.useState(null),t=d||{},m={petrol:t.petrolStock||{current:0,capacity:1e4},diesel:t.dieselStock||{current:0,capacity:1e4},gas:t.gasStock||{}};return e.jsxs("div",{className:"h-screen bg-slate-50 dark:bg-slate-900 transition-colors duration-500 p-3 pb-8 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"max-w-[1920px] mx-auto w-full h-full flex flex-col",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4 items-start h-full",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-3 h-full flex flex-col",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 shrink-0",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-800 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-blue-500"}),"عمليات سريعة"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(n,{label:"بيع جديد",icon:k,color:"bg-emerald-500",link:"/sales/create"}),e.jsx(n,{label:"استلام",icon:N,color:"bg-blue-500",link:"/purchases/create"}),e.jsx(n,{label:"مصروف",icon:w,color:"bg-red-500",onClick:()=>c("expense")}),e.jsx(n,{label:"إغلاق",icon:y,color:"bg-navy-900",link:"/shift/close"}),e.jsx(n,{label:"مبيعات الآبار",icon:p,color:"bg-orange-500",link:"/reports?tab=sales&subtab=tank_sales"}),e.jsx(n,{label:"كشف حساب",icon:C,color:"bg-indigo-500",link:"/reports?tab=financial&subtab=statement&group=fuel_type"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 xl:grid-cols-2 gap-3 h-[25vh] min-h-[180px] shrink-0",children:[e.jsx("div",{className:"h-full",children:e.jsx(g,{type:"بنزين",current:m.petrol.current,capacity:m.petrol.capacity,color:"emerald"})}),e.jsx("div",{className:"h-full",children:e.jsx(g,{type:"ديزل",current:m.diesel.current,capacity:m.diesel.capacity,color:"blue"})})]})]}),e.jsxs("div",{className:"xl:col-span-9 space-y-3 h-full flex flex-col",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 shrink-0",children:[e.jsx(h,{title:"مبيعات اليوم",value:parseFloat(t.todaySales||0).toLocaleString("en-US"),subtitle:"إجمالي مبيعات الوردية",icon:S,color:"emerald",trend:5.2,minimal:!0}),e.jsx(h,{title:"المصروفات",value:parseFloat(t.todayExpenses||0).toLocaleString("en-US"),subtitle:"نثريات وتشغيل",icon:L,color:"red",minimal:!0}),e.jsx(h,{title:"رصيد الخزينة",value:parseFloat(t.safeBalance||0).toLocaleString("en-US"),subtitle:"النقدية الحالية",icon:F,color:"amber",minimal:!0})]}),e.jsxs(b.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm overflow-hidden flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50 shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-800 dark:text-white",children:"سجل العمليات الحديثة"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"آخر المعاملات المسجلة في النظام"})]}),e.jsx("button",{className:"text-[10px] font-medium text-blue-500 hover:text-blue-600 bg-blue-50 dark:bg-blue-900/20 px-2 py-1 rounded transition-colors",children:"عرض الكل"})]}),e.jsx("div",{className:"overflow-auto scrollbar-thin flex-1",children:e.jsxs("table",{className:"w-full text-sm text-right",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-500 dark:text-slate-400 font-bold sticky top-0 z-10 text-xs",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 w-[15%]",children:"الوقت"}),e.jsx("th",{className:"p-3 w-[15%]",children:"النوع"}),e.jsx("th",{className:"p-3 w-[25%]",children:"الموظف"}),e.jsx("th",{className:"p-3 w-[25%]",children:"التفاصيل"}),e.jsx("th",{className:"p-3 w-[20%] text-left",children:"المبلغ"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700 text-slate-700 dark:text-slate-300",children:[t.recentSales&&t.recentSales.slice(0,10).map((x,u)=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors group text-xs sm:text-sm",children:[e.jsx("td",{className:"p-3 font-mono text-slate-400",children:x.time}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded bg-emerald-100 dark:bg-emerald-500/20 text-emerald-700 dark:text-emerald-400 text-[10px] font-bold",children:[e.jsx(p,{className:"w-3 h-3"})," بيع"]})}),e.jsx("td",{className:"p-3 font-medium truncate max-w-[120px]",children:x.worker_name}),e.jsxs("td",{className:"p-3 text-slate-500 dark:text-slate-400 truncate max-w-[180px]",children:[x.pump_name," ",e.jsx("span",{className:"opacity-50",children:"|"})," ",parseFloat(x.volume_sold).toFixed(2),"L"]}),e.jsx("td",{className:"p-3 font-mono font-bold text-emerald-600 dark:text-emerald-400 dir-ltr text-left",children:parseFloat(x.total_amount).toLocaleString()})]},u)),(!t.recentSales||t.recentSales.length===0)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-slate-400 text-xs",children:"لا توجد عمليات مسجلة"})})]})]})})]})]})]})}),e.jsx($,{isOpen:l==="expense",onClose:()=>c(null),type:"expense",categories:r||[],safes:s||[],banks:o||[],suppliers:a||[],customers:i||[],baseUrl:window.BASE_URL})]})}function n({label:d,icon:r,color:s,link:o,onClick:a}){return e.jsxs(b.button,{onClick:()=>a?a():window.location.href=window.BASE_URL?window.BASE_URL+o:o,whileHover:{scale:1.02},whileTap:{scale:.98},className:"flex flex-col items-center justify-center gap-1 p-2 rounded-xl bg-slate-50 dark:bg-slate-700/50 border border-transparent hover:border-slate-200 dark:hover:border-slate-600 transition-all group h-[70px]",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${s} text-white shadow-sm`,children:e.jsx(r,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200 text-[10px] sm:text-xs",children:d})]})}export{R as default};
